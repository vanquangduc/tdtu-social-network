(this.webpackJsonpsocialnw=this.webpackJsonpsocialnw||[]).push([[0],{214:function(e,t,n){},231:function(e,t,n){},249:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},276:function(e,t,n){},277:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(63),r=n.n(s),i=n(14),o=n.n(i),l=n(19),j=n(18),u=n(15),b=n(5),d=(n(214),n(338)),h=n(344),m=n(395),O=n(396),x=n(397),p=n(384),v=n(110),g=n(0);function f(e){var t=e.announcement,n=Object(a.useState)(new Date(t.createdAt)),c=Object(b.a)(n,2),s=c[0],r=(c[1],Object(a.useState)(!1)),i=Object(b.a)(r,2),o=i[0],l=i[1],j=function(){l(!1)},u=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(o){var e=u.current;null!==e&&e.focus()}}),[o]),Object(g.jsxs)("div",{className:"announcements",children:[Object(g.jsx)("ul",{className:"announcements-list",children:Object(g.jsxs)("li",{className:"announcements-list-item",onClick:function(){l(!0)},children:[Object(g.jsx)("div",{className:"announcements-list-item-title",children:t.title}),Object(g.jsx)("div",{className:"announcements-list-item-text",children:Object(v.a)(t.text)}),Object(g.jsxs)("div",{className:"announcements-list-item-bottom",children:[Object(g.jsx)("div",{className:"announcements-list-item-faculty",children:t.faculty}),Object(g.jsx)("div",{className:"announcements-list-item-date",children:s.toLocaleDateString("en-US")})]})]})}),Object(g.jsxs)(d.a,{open:o,onClose:j,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"lg",fullWidth:!0,children:[Object(g.jsx)(h.a,{id:"scroll-dialog-title",children:t.title}),Object(g.jsx)(m.a,{dividers:!0,children:Object(g.jsxs)("div",{className:"announcements-container",children:[Object(g.jsxs)("div",{className:"announcements-sender",children:[t.faculty," | ",s.toLocaleDateString("en-US")]}),Object(g.jsx)(O.a,{id:"scroll-dialog-description",ref:u,tabIndex:-1,children:Object(v.a)(t.text)})]})}),Object(g.jsx)(x.a,{children:Object(g.jsx)(p.a,{onClick:j,children:"\u0110\xf3ng"})})]})]})}var k=n(378),y=(n(231),n(16)),N=n.n(y);function S(e){var t=e.announceCategory,n="https://tdtu-social-nw-server.herokuapp.com/api",c=Object(a.useState)([]),s=Object(b.a)(c,2),r=s[0],i=s[1],j=Object(a.useState)([]),d=Object(b.a)(j,2),h=d[0],m=d[1],O=Object(a.useState)(1),x=Object(b.a)(O,2),p=x[0],v=x[1],y=Object(a.useState)(0),S=Object(b.a)(y,2),C=S[0],w=S[1],T=Object(a.useState)(""),I=Object(b.a)(T,2),_=I[0],E=I[1],F=[{id:"cthhsv",name:"Ph\xf2ng C\xf4ng t\xe1c h\u1ecdc sinh sinh vi\xean"},{id:"ptc",name:"Ph\xf2ng t\xe0i ch\xednh"},{id:"tdtclc",name:"TDT Creative Language Center"},{id:"ttth",name:"Trung t\xe2m tin h\u1ecdc"},{id:"ttdtptxh",name:"Trung t\xe2m \u0111\xe0o t\u1ea1o ph\xe1t tri\u1ec3n x\xe3 h\u1ed9i"},{id:"ttptkh",name:"Trung t\xe2m ph\xe1t tri\u1ec3n Khoa h\u1ecdc qu\u1ea3n l\xfd v\xe0 \u1ee8ng d\u1ee5ng c\xf4ng ngh\u1ec7"},{id:"tthtdn",name:"Trung t\xe2m h\u1ee3p t\xe1c doanh nghi\u1ec7p v\xe0 c\u1ef1u sinh vi\xean"},{id:"kl",name:"Khoa Lu\u1eadt"},{id:"ttnn",name:"Trung t\xe2m ngo\u1ea1i ng\u1eef - tin h\u1ecdc - b\u1ed3i d\u01b0\u1ee1ng v\u0103n h\xf3a"},{id:"vcskt",name:"Vi\u1ec7n ch\xednh s\xe1ch kinh t\u1ebf v\xe0 kinh doanh"},{id:"kmtcn",name:"Khoa M\u1ef9 thu\u1eadt c\xf4ng nghi\u1ec7p"},{id:"kddt",name:"Khoa \u0110i\u1ec7n - \u0110i\u1ec7n t\u1eed"},{id:"kcntt",name:"Khoa C\xf4ng ngh\u1ec7 th\xf4ng tin"},{id:"kqtkd",name:"Khoa Qu\u1ea3n tr\u1ecb kinh doanh"},{id:"kmt",name:"Khoa M\xf4i tr\u01b0\u1eddng v\xe0 b\u1ea3o h\u1ed9 lao \u0111\u1ed9ng"},{id:"kldcd",name:"Khoa Lao \u0111\u1ed9ng c\xf4ng \u0111o\xe0n"},{id:"ktcnn",name:"Khoa T\xe0i ch\xednh ng\xe2n h\xe0ng"},{id:"kgdqt",name:"Khoa gi\xe1o d\u1ee5c qu\u1ed1c t\u1ebf"}],P=function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,N.a.get(n+"/announcements/"+t);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,N.a.get(n+"/announcements/");case 9:e.t0=e.sent;case 10:a=e.t0,E(t?F.filter((function(e){return e.id==t}))[0].name:"T\u1ea5t c\u1ea3 th\xf4ng b\xe1o"),i(a.data),e.next=17;break;case 15:e.prev=15,e.t1=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){P()}),[t]),Object(a.useEffect)((function(){w(Math.ceil(r.length/5));var e=r.slice(5*(p-1),5*p);m(Object(u.a)(e))}),[p,r]);return Object(g.jsxs)("div",{className:"announcement",children:[Object(g.jsx)("div",{className:"announcement-top",children:Object(g.jsx)("div",{className:"announcement-category",children:_})}),Object(g.jsxs)("div",{className:"announcement-bottom",children:[h.map((function(e){return Object(g.jsx)(f,{announcement:e},e._id)})),Object(g.jsx)(k.a,{count:C,onChange:function(e,t){v(t)}})]})]})}var C=n(346),w=n(347),T=n(348),I=n(349),_=n(353),E=n(355),F=n(356),P=n(357),K=n(358),A=n(187),D=n(398),R=n(399),U=n(400),L=n(385),z=n(351),M=n(103),q=n(352),B=n(401),G=n(354),H=(n(249),n(25)),V=function(e,t){switch(t.type){case"SIGNIN_START":return{user:null,isFetching:!0,error:!1};case"SIGNIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"SIGNIN_FAILURE":return{user:null,isFetching:!1,error:t.payload};default:return e}},W={user:null,isFetching:!1,error:!1},J=Object(a.createContext)(W),Q=function(e){var t=e.children,n=Object(a.useReducer)(V,W),c=Object(b.a)(n,2),s=c[0],r=c[1];return Object(g.jsx)(J.Provider,{value:{user:s.user,isFetching:s.isFetching,error:s.error,dispatch:r},children:t})},Y=function(e,t){switch(t.type){case"SOCKET_START":return{socket:null,isFetching:!0,error:!1};case"SOCKET_SUCCESS":return{socket:t.payload,isFetching:!1,error:!1};case"SOCKET_FAILURE":return{socket:null,isFetching:!1,error:t.payload};default:return e}},X={socket:null,isFetching:!1,error:!1},Z=Object(a.createContext)(X),$=function(e){var t=e.children,n=Object(a.useReducer)(Y,X),c=Object(b.a)(n,2),s=c[0],r=c[1];return Object(g.jsx)(Z.Provider,{value:{socket:s.socket,isFetching:s.isFetching,error:s.error,dispatch:r},children:t})};function ee(){var e="https://tdtu-social-nw-server.herokuapp.com/images/",t=Object(a.useContext)(Z).socket,n=Object(a.useState)(null),c=Object(b.a)(n,2),s=c[0],r=c[1],i=Object(a.useState)(null),o=Object(b.a)(i,2),l=o[0],j=o[1],d=Object(a.useState)(null),h=Object(b.a)(d,2),m=h[0],O=h[1],x=Boolean(s),p=Boolean(l),v=Boolean(m),f=function(){r(null)},k=function(){j(null)},y=function(){O(null)},N=Object(a.useContext)(J).user,S=Object(a.useState)([]),V=Object(b.a)(S,2),W=V[0],Q=V[1],Y=Object(a.useState)(0),X=Object(b.a)(Y,2),$=X[0],ee=X[1],te=Object(a.useState)(0),ne=Object(b.a)(te,2),ae=ne[0],ce=ne[1];return Object(a.useEffect)((function(){t.on("getAnnouncementNotification",(function(e){Q((function(t){return[e].concat(Object(u.a)(t))}))}))}),[t]),Object(a.useEffect)((function(){ee(W.length-ae)}),[W]),Object(g.jsxs)("div",{className:"navbarContainer",children:[Object(g.jsxs)("div",{className:"navbar-left",children:[Object(g.jsx)(H.b,{to:"/",children:Object(g.jsx)("div",{className:"logo",children:"TDTU"})}),Object(g.jsxs)("div",{className:"navbar-search",children:[Object(g.jsx)(C.a,{className:"navbar-search-icon"}),Object(g.jsx)("input",{placeholder:"T\xecm ki\u1ebfm ng\u01b0\u1eddi d\xf9ng",className:"navbar-search-bar"})]})]}),Object(g.jsxs)("div",{className:"navbar-center",children:[Object(g.jsx)(H.b,{to:"/",children:Object(g.jsxs)("div",{className:"navbar-link",children:[Object(g.jsx)(w.a,{}),Object(g.jsx)("div",{className:"navbar-link-text",children:"Trang ch\u1ee7"})]})}),Object(g.jsx)(H.b,{to:"/announcement",children:Object(g.jsxs)("div",{className:"navbar-link",children:[Object(g.jsx)(T.a,{}),Object(g.jsx)("div",{className:"navbar-link-text",children:"Th\xf4ng b\xe1o"})]})})]}),Object(g.jsxs)("div",{className:"navbar-right",children:[Object(g.jsxs)("div",{className:"navbar-icons",children:[Object(g.jsxs)("div",{className:"navbar-icons-item",onClick:function(e){r(e.currentTarget)},children:[Object(g.jsx)(I.a,{className:"navbar-icons-item-icon"}),Object(g.jsx)("span",{className:"navbar-icons-item-badge",children:"1"})]}),Object(g.jsx)(A.a,{anchorEl:s,open:x,onClose:f,onClick:f,PaperProps:{elevation:0,sx:{overflowY:"scroll",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,height:"90vh",width:"100%",maxWidth:360}},transformOrigin:{horizontal:"center",vertical:"top"},anchorOrigin:{horizontal:"center",vertical:"bottom"},children:Object(g.jsxs)(D.a,{sx:{bgcolor:"background.paper"},children:[Object(g.jsxs)(R.a,{alignItems:"flex-start",children:[Object(g.jsx)(U.a,{children:Object(g.jsx)(L.a,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"})}),Object(g.jsx)(z.a,{primary:"Brunch this weekend?",secondary:Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(M.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Ali Connors"})," \u2014 I'll be in your neighborhood doing errands this\u2026"]})})]}),Object(g.jsx)(q.a,{variant:"inset",component:"li"}),Object(g.jsxs)(R.a,{alignItems:"flex-start",children:[Object(g.jsx)(U.a,{children:Object(g.jsx)(L.a,{alt:"Travis Howard",src:"/static/images/avatar/2.jpg"})}),Object(g.jsx)(z.a,{primary:"Summer BBQ",secondary:Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(M.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"to Scott, Alex, Jennifer"})," \u2014 Wish I could come, but I'm out of town this\u2026"]})})]}),Object(g.jsx)(q.a,{variant:"inset",component:"li"}),Object(g.jsxs)(R.a,{alignItems:"flex-start",children:[Object(g.jsx)(U.a,{children:Object(g.jsx)(L.a,{alt:"Cindy Baker",src:"/static/images/avatar/3.jpg"})}),Object(g.jsx)(z.a,{primary:"Oui Oui",secondary:Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(M.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Sandra Adams"})," \u2014 Do you have Paris recommendations? Have you ever\u2026"]})})]}),Object(g.jsx)(q.a,{variant:"inset",component:"li"}),Object(g.jsxs)(R.a,{alignItems:"flex-start",children:[Object(g.jsx)(U.a,{children:Object(g.jsx)(L.a,{alt:"Cindy Baker",src:"/static/images/avatar/3.jpg"})}),Object(g.jsx)(z.a,{primary:"Oui Oui",secondary:Object(g.jsxs)(a.Fragment,{children:[Object(g.jsx)(M.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:"Sandra Adams"})," \u2014 Do you have Paris recommendations? Have you ever\u2026"]})})]})]})}),Object(g.jsxs)("div",{className:"navbar-icons-item",onClick:function(e){O(e.currentTarget),ce($),ee(0)},children:[Object(g.jsx)(_.a,{className:"navbar-icons-item-icon"}),0===$?null:Object(g.jsx)("span",{className:"navbar-icons-item-badge",children:$})]}),Object(g.jsx)(A.a,{anchorEl:m,open:v,onClose:y,onClick:y,PaperProps:{elevation:0,sx:{overflowY:"scroll",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,height:"90vh",width:"100%",maxWidth:360}},transformOrigin:{horizontal:"center",vertical:"top"},anchorOrigin:{horizontal:"center",vertical:"bottom"},children:Object(g.jsx)(D.a,{sx:{bgcolor:"background.paper"},children:W.map((function(t){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(R.a,{alignItems:"flex-start",children:[Object(g.jsx)(U.a,{children:Object(g.jsx)(L.a,{alt:"Remy Sharp",src:e+t.avatar})}),Object(g.jsx)(z.a,{primary:t.sendName,secondary:Object(g.jsx)(a.Fragment,{children:Object(g.jsx)(M.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:t.category+" \u2014 V\u1eeba \u0111\u0103ng m\u1ed9t th\xf4ng b\xe1o m\u1edbi"})})})]}),Object(g.jsx)(q.a,{variant:"inset",component:"li"})]})}))})})]}),Object(g.jsxs)("div",{className:"navbar-user",onClick:function(e){j(e.currentTarget)},children:[Object(g.jsx)("div",{className:"navbar-user-name",children:N.username}),Object(g.jsx)("img",{src:e+N.avatar,alt:"",className:"navbar-avatar"})]}),Object(g.jsxs)(A.a,{anchorEl:l,open:p,onClose:k,onClick:k,className:"navbar-user-menu",PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[Object(g.jsx)(H.b,{to:"/profile/"+N.emailname,children:Object(g.jsxs)(B.a,{children:[Object(g.jsx)(L.a,{src:e+N.avatar})," Trang c\xe1 nh\xe2n"]})}),Object(g.jsx)(q.a,{}),"admin"===N.role?Object(g.jsx)(H.b,{to:"/register",children:Object(g.jsxs)(B.a,{children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(E.a,{fontSize:"small"})}),"T\u1ea1o t\xe0i kho\u1ea3n Ph\xf2ng/Khoa"]})}):"faculty"===N.role?Object(g.jsx)(H.b,{to:"/announcement/list",children:Object(g.jsxs)(B.a,{children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(F.a,{fontSize:"small"})}),"Qu\u1ea3n l\xfd th\xf4ng b\xe1o"]})}):null,Object(g.jsxs)(B.a,{children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(P.a,{fontSize:"small"})}),"C\xe0i \u0110\u1eb7t"]}),Object(g.jsxs)(B.a,{onClick:function(){localStorage.clear(),window.location.reload()},children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(K.a,{fontSize:"small"})}),"\u0110\u0103ng xu\u1ea5t"]})]})]})]})}n(251);function te(){var e=Object(a.useContext)(J).user,t=Object(a.useContext)(Z).socket,n=Object(a.useState)([]),c=Object(b.a)(n,2),s=c[0],r=c[1],i=Object(a.useState)([]),j=Object(b.a)(i,2),u=j[0],d=j[1],h=Object(a.useState)([]),m=Object(b.a)(h,2),O=m[0],x=m[1];return Object(a.useEffect)((function(){var n=function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://tdtu-social-nw-server.herokuapp.com/api/users/all");case 2:t=e.sent,d(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n(),t.emit("addUser",e._id),t.on("getUsers",(function(t){r(t.filter((function(t){return t.userId!==e._id})))}))}),[e]),Object(a.useEffect)((function(){x(u.filter((function(e){return s.some((function(t){return t.userId===e._id}))})))}),[u,s]),Object(g.jsxs)("div",{className:"rightbar",children:[Object(g.jsxs)("div",{className:"rightbar-title",children:["Tr\u1ef1c tuy\u1ebfn (",O.length,")"]}),Object(g.jsx)("ul",{className:"rightbar-online-list",children:O.map((function(e){return Object(g.jsxs)("li",{className:"rightbar-online-list-items",children:[Object(g.jsxs)("div",{className:"rightbar-online-list-item-avatar",children:[Object(g.jsx)("img",{src:"https://tdtu-social-nw-server.herokuapp.com/images/"+e.avatar,alt:""}),Object(g.jsx)("span",{className:"rightbar-online-tick"})]}),Object(g.jsx)("span",{className:"rightbar-online-list-item-user",children:e.username})]})}))})]})}n(252);var ne=n(71),ae=n(72);function ce(){var e="https://tdtu-social-nw-server.herokuapp.com/images/",t=Object(a.useContext)(J).user,n=[{name:"Trang ch\u1ee7",icon:Object(g.jsx)(ne.a,{icon:ae.f,className:"font-awesome"})},{name:"Th\xf4ng b\xe1o",icon:Object(g.jsx)(ne.a,{icon:ae.a,className:"font-awesome"})},{name:"Th\u1eddi kh\xf3a bi\u1ec3u",icon:Object(g.jsx)(ne.a,{icon:ae.e,className:"font-awesome"})},{name:"L\u1ecbch thi",icon:Object(g.jsx)(ne.a,{icon:ae.b,className:"font-awesome"})},{name:"\u0110i\u1ec3m thi",icon:Object(g.jsx)(ne.a,{icon:ae.d,className:"font-awesome"})},{name:"\u0110i\u1ec3m r\xe8n luy\u1ec7n",icon:Object(g.jsx)(ne.a,{icon:ae.c,className:"font-awesome"})}],c=[{id:"cthhsv",name:"Ph\xf2ng C\xf4ng t\xe1c h\u1ecdc sinh sinh vi\xean",avatar:e+"avatar/noAvatar.jpg"},{id:"ptc",name:"Ph\xf2ng t\xe0i ch\xednh",avatar:e+"avatar/noAvatar.jpg"},{id:"tdtclc",name:"TDT Creative Language Center",avatar:e+"avatar/noAvatar.jpg"},{id:"ttth",name:"Trung t\xe2m tin h\u1ecdc",avatar:e+"avatar/noAvatar.jpg"},{id:"ttdtptxh",name:"Trung t\xe2m \u0111\xe0o t\u1ea1o ph\xe1t tri\u1ec3n x\xe3 h\u1ed9i",avatar:e+"avatar/noAvatar.jpg"},{id:"ttptkh",name:"Trung t\xe2m ph\xe1t tri\u1ec3n Khoa h\u1ecdc qu\u1ea3n l\xfd v\xe0 \u1ee8ng d\u1ee5ng c\xf4ng ngh\u1ec7",avatar:e+"avatar/noAvatar.jpg"},{id:"tthtdn",name:"Trung t\xe2m h\u1ee3p t\xe1c doanh nghi\u1ec7p v\xe0 c\u1ef1u sinh vi\xean",avatar:e+"avatar/noAvatar.jpg"},{id:"kl",name:"Khoa Lu\u1eadt",avatar:e+"avatar/noAvatar.jpg"},{id:"ttnn",name:"Trung t\xe2m ngo\u1ea1i ng\u1eef - tin h\u1ecdc - b\u1ed3i d\u01b0\u1ee1ng v\u0103n h\xf3a",avatar:e+"avatar/noAvatar.jpg"},{id:"vcskt",name:"Vi\u1ec7n ch\xednh s\xe1ch kinh t\u1ebf v\xe0 kinh doanh",avatar:e+"avatar/noAvatar.jpg"},{id:"kmtcn",name:"Khoa M\u1ef9 thu\u1eadt c\xf4ng nghi\u1ec7p",avatar:e+"avatar/noAvatar.jpg"},{id:"kddt",name:"Khoa \u0110i\u1ec7n - \u0110i\u1ec7n t\u1eed",avatar:e+"avatar/noAvatar.jpg"},{id:"kcntt",name:"Khoa C\xf4ng ngh\u1ec7 th\xf4ng tin",avatar:e+"avatar/noAvatar.jpg"},{id:"kqtkd",name:"Khoa Qu\u1ea3n tr\u1ecb kinh doanh",avatar:e+"avatar/noAvatar.jpg"},{id:"kmt",name:"Khoa M\xf4i tr\u01b0\u1eddng v\xe0 b\u1ea3o h\u1ed9 lao \u0111\u1ed9ng",avatar:e+"avatar/noAvatar.jpg"},{id:"kldcd",name:"Khoa Lao \u0111\u1ed9ng c\xf4ng \u0111o\xe0n",avatar:e+"avatar/noAvatar.jpg"},{id:"ktcnn",name:"Khoa T\xe0i ch\xednh ng\xe2n h\xe0ng",avatar:e+"avatar/noAvatar.jpg"},{id:"kgdqt",name:"Khoa gi\xe1o d\u1ee5c qu\u1ed1c t\u1ebf",avatar:e+"avatar/noAvatar.jpg"}];return Object(g.jsx)("div",{className:"sidebar",children:Object(g.jsxs)("div",{className:"sidebar-items",children:[Object(g.jsxs)("div",{className:"sidebar-user",children:[Object(g.jsx)("img",{src:e+t.avatar,alt:"",className:"sidebar-user-avatar"}),Object(g.jsx)("div",{className:"sidebar-user-name",children:t.username})]}),Object(g.jsx)("ul",{className:"sidebar-list",children:n.map((function(e){return Object(g.jsxs)("li",{className:"sidebar-list-item",children:[e.icon,Object(g.jsx)("span",{className:"sidebar-list-item-text",children:e.name})]})}))}),Object(g.jsx)("hr",{className:"sidebar-line"}),Object(g.jsx)("div",{className:"sidebar-title",children:"L\u1ed1i t\u1eaft (Th\xf4ng b\xe1o)"}),Object(g.jsx)("ul",{className:"sidebar-group",children:c.map((function(e){return Object(g.jsx)(H.b,{to:"/announcement/"+e.id,children:Object(g.jsxs)("li",{className:"sidebar-group-item",children:[Object(g.jsx)("img",{src:e.avatar,alt:"",className:"sidebar-group-item-avatar"}),Object(g.jsx)("span",{className:"sidebar-group-item-user",children:e.name})]})})}))})]})})}function se(){var e=Object(j.h)().categoryId;return Object(g.jsxs)("div",{children:[Object(g.jsx)(ee,{}),Object(g.jsxs)("div",{className:"mainContainer",children:[Object(g.jsx)(ce,{}),Object(g.jsx)(S,{announceCategory:e}),Object(g.jsx)(te,{})]})]})}var re=n(59),ie=(n(255),n(359)),oe=n(386),le=n(402),je=n(403),ue=n(382),be=n(406),de=n(383),he=n(380),me=n(374),Oe=n(361),xe=n(375);function pe(e){var t=e.emailname,n=Object(a.useContext)(J),c=n.user,s=n.dispatch,r="https://tdtu-social-nw-server.herokuapp.com/images/",i="https://tdtu-social-nw-server.herokuapp.com/api",j=Object(a.useState)({}),u=Object(b.a)(j,2),O=u[0],v=u[1],f=Object(a.useState)(!1),k=Object(b.a)(f,2),y=k[0],S=k[1],C=Object(a.useState)(!1),w=Object(b.a)(C,2),T=w[0],I=w[1],_=Object(a.useState)(null),E=Object(b.a)(_,2),F=E[0],P=E[1],K=Object(a.useState)(""),A=Object(b.a)(K,2),D=A[0],R=A[1],U=Object(a.useState)({profileImage:r+O.avatar}),z=Object(b.a)(U,2),M=z[0],q=z[1],G=Object(a.useState)(c.major),H=Object(b.a)(G,2),V=H[0],W=H[1],Q=Object(a.useState)(new Date(c.birthday)),Y=Object(b.a)(Q,2),X=Y[0],Z=Y[1],$=Object(a.useState)(""),ee=Object(b.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(""),ce=Object(b.a)(ae,2),se=ce[0],pe=ce[1],ve=Object(a.useState)(""),ge=Object(b.a)(ve,2),fe=ge[0],ke=ge[1],ye=M.profileImage,Ne={PaperProps:{style:{maxHeight:224,width:300}}};Object(a.useEffect)((function(){var e=!0,n=function(){var n=Object(l.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.get("https://tdtu-social-nw-server.herokuapp.com/api/users?emailname="+t);case 2:a=n.sent,e&&v(a.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){return e=!1}}),[t]);var Se=function(){S(!0),q({profileImage:r+O.avatar})},Ce=function(){I(!0)},we=function(){I(!1)},Te=Object(a.useState)(c.username),Ie=Object(b.a)(Te,2),_e=Ie[0],Ee=Ie[1],Fe=Object(a.useState)(c.className),Pe=Object(b.a)(Fe,2),Ke=Pe[0],Ae=Pe[1],De=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=c,""!==_e&&null!==_e){e.next=8;break}return R("Name can not be empty"),console.log(D),e.abrupt("return",!1);case 8:if(!F){e.next=22;break}return a=new FormData,r=Date.now()+"_"+F.name,a.append("name",r),a.append("file",F),n.avatar="avatar/"+r,e.prev=14,e.next=17,N.a.post(i+"/upload/avatar",a);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(14),console.log(e.t0);case 22:return n.username=_e,n.className=Ke,n.major=V,n.birthday=X.toLocaleDateString("en-US"),e.prev=26,e.next=29,N.a.put(i+"/users/"+c._id,n);case 29:s({type:"SIGNIN_SUCCESS",payload:n}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(26),console.log(e.t1);case 35:case"end":return e.stop()}}),e,null,[[14,19],[26,32]])})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=c,""!==te&&null!==te){e.next=6;break}return R("Old password can not be empty"),console.log(D),e.abrupt("return",!1);case 6:if(""!==se&&null!==se){e.next=10;break}return R("New password can not be empty"),console.log(D),e.abrupt("return",!1);case 10:if(""!==fe&&null!==fe){e.next=14;break}return R("Re password can not be empty"),console.log(D),e.abrupt("return",!1);case 14:if(te!==se){e.next=18;break}return R("M\u1eadt kh\u1ea9u m\u1edbi tr\xf9ng v\u1edbi m\u1eadt kh\u1ea9u c\u0169"),console.log(D),e.abrupt("return",!1);case 18:if(fe===se){e.next=22;break}return R("X\xe1c nh\u1eadn m\u1eadt kh\u1ea9u kh\xf4ng ch\xednh x\xe1c"),console.log(D),e.abrupt("return",!1);case 22:return n.password=te,e.prev=23,e.next=26,N.a.post(i+"/users/compare/"+c._id,n);case 26:if("success"!==e.sent.data.code){e.next=35;break}return n.password=se,e.next=31,N.a.put(i+"/users/"+c._id,n);case 31:"success"===e.sent.data.code&&(we(),R("")),e.next=37;break;case 35:R("M\u1eadt kh\u1ea9u c\u0169 kh\xf4ng ch\xednh x\xe1c"),console.log(D);case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(23),console.log(e.t0);case 42:case"end":return e.stop()}}),e,null,[[23,39]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)("div",{children:Object(g.jsxs)("div",{className:"profile",children:[Object(g.jsxs)("div",{className:"profile-cover",children:[Object(g.jsx)("img",{src:r+O.background,alt:"",className:"profile-cover-background"}),Object(g.jsx)("img",{src:r+O.avatar,alt:"",className:"profile-cover-avatar"})]}),Object(g.jsxs)("div",{className:"profile-user",children:[Object(g.jsx)("div",{className:"profile-user-name",children:c.emailname===t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{className:"profile-user-name-box",children:"t"}),Object(g.jsx)("h2",{children:O.username}),Object(g.jsx)(oe.a,{title:"Click to update profile",children:Object(g.jsx)(le.a,{onClick:Se,children:Object(g.jsx)(ie.a,{fontSize:"small"})})})]}):Object(g.jsx)("h2",{children:O.username})}),Object(g.jsxs)(d.a,{open:y,onClose:Se,children:[Object(g.jsx)(h.a,{children:"C\u1eadp nh\u1eadt th\xf4ng tin"}),Object(g.jsxs)("div",{className:"profile-avatar-upload",children:[Object(g.jsx)("input",{accept:"image/*",id:"icon-button-file",type:"file",style:{display:"none"},onChange:function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&(q({profileImage:t.result}),console.log(t.result))},t.readAsDataURL(e.target.files[0]),P(e.target.files[0])}}),Object(g.jsx)("label",{htmlFor:"icon-button-file",style:{textAlign:"center"},children:Object(g.jsx)(le.a,{component:"span",children:Object(g.jsx)(L.a,{src:ye,style:{margin:"10px",width:"200px",height:"200px"}})})})]}),Object(g.jsx)(m.a,{children:Object(g.jsx)(je.a,{component:"form",sx:{"& .MuiTextField-root":{m:2,width:"25ch"}},autoComplete:"off",children:Object(g.jsxs)("div",{children:[Object(g.jsx)(ue.a,{required:!0,id:"outlined-required",label:"T\xean",defaultValue:c.username,onChange:function(e){return Ee(e.target.value)}}),Object(g.jsx)(ue.a,{id:"outlined-required",label:"L\u1edbp",defaultValue:c.className,onChange:function(e){return Ae(e.target.value)}}),Object(g.jsxs)(be.a,{sx:{m:2,width:"25ch"},children:[Object(g.jsx)(de.a,{id:"demo-simple-select-label",children:"Khoa"}),Object(g.jsxs)(he.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:V,label:"Khoa",onChange:function(e){W(e.target.value)},defaultValue:V,MenuProps:Ne,children:[Object(g.jsx)(B.a,{value:"CNTT",children:"CNTT"}),Object(g.jsx)(B.a,{value:"duoc",children:"D\u01b0\u1ee3c"}),Object(g.jsx)(B.a,{value:"dientu",children:"\u0110i\u1ec7n - \u0111i\u1ec7n t\u1eed"}),Object(g.jsx)(B.a,{value:"giaoducquocte",children:"Gi\xe1o d\u1ee5c qu\u1ed1c t\u1ebf"}),Object(g.jsx)(B.a,{value:"ketoan",children:"K\u1ebf to\xe1n"}),Object(g.jsx)(B.a,{value:"khthethao",children:"Khoa h\u1ecdc th\u1ec3 thao"}),Object(g.jsx)(B.a,{value:"khungdung",children:"Khoa h\u1ecdc \u1ee9ng d\u1ee5ng"}),Object(g.jsx)(B.a,{value:"khxhvnv",children:"Khoa h\u1ecdc x\xe3 h\u1ed9i v\xe0 nh\xe2n v\u0103n"}),Object(g.jsx)(B.a,{value:"kythuatcongtrinh",children:"K\u1ef9 thu\u1eadt c\xf4ng tr\xecnh"}),Object(g.jsx)(B.a,{value:"laodongvacongdoan",children:"Lao \u0111\u1ed9ng v\xe0 c\xf4ng \u0111o\xe0n"}),Object(g.jsx)(B.a,{value:"luat",children:"Lu\u1eadt"}),Object(g.jsx)(B.a,{value:"moitruong",children:"M\xf4i tr\u01b0\u1eddng v\xe0 b\u1ea3o h\u1ed9 lao \u0111\u1ed9ng"}),Object(g.jsx)(B.a,{value:"mythuat",children:"M\u1ef9 thu\u1eadt c\xf4ng nghi\u1ec7p"}),Object(g.jsx)(B.a,{value:"ngoaingu",children:"Ngo\u1ea1i ng\u1eef"}),Object(g.jsx)(B.a,{value:"qtkd",children:"Qu\u1ea3n tr\u1ecb kinh doanh"}),Object(g.jsx)(B.a,{value:"tcnh",children:"T\xe0i ch\xednh - ng\xe2n h\xe0ng"}),Object(g.jsx)(B.a,{value:"toanthongke",children:"To\xe1n - th\u1ed1ng k\xea"})]})]}),Object(g.jsx)(Oe.b,{dateAdapter:me.a,children:Object(g.jsx)(xe.a,{label:"Ng\xe0y/Th\xe1ng/N\u0103m sinh",value:X,defaultValue:X,onChange:function(e){Z(e)},renderInput:function(e){return Object(g.jsx)(ue.a,Object(re.a)({},e))}})})]})})}),Object(g.jsxs)(x.a,{children:[Object(g.jsx)(p.a,{onClick:De,type:"submit",children:"C\u1eadp nh\u1eadt"}),Object(g.jsx)(p.a,{onClick:function(){S(!1),q({profileImage:r+O.avatar})},children:"H\u1ee7y"})]})]}),Object(g.jsxs)(d.a,{open:T,onClose:Ce,children:[Object(g.jsx)(h.a,{children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}),Object(g.jsx)(m.a,{children:Object(g.jsx)(je.a,{component:"form",sx:{"& .MuiTextField-root":{m:2,width:"100%",maxWidth:"57ch"}},autoComplete:"off",children:Object(g.jsxs)("div",{children:[Object(g.jsx)(ue.a,{type:"password",required:!0,id:"outlined-password-input",label:"M\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i",onChange:function(e){return ne(e.target.value)}}),Object(g.jsx)(ue.a,{type:"password",required:!0,id:"outlined-password-input",label:"M\u1eadt kh\u1ea9u m\u1edbi",onChange:function(e){return pe(e.target.value)}}),Object(g.jsx)(ue.a,{type:"password",required:!0,id:"outlined-password-input",label:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u m\u1edbi",onChange:function(e){return ke(e.target.value)}}),Object(g.jsx)("div",{className:"change-password-message",children:""!=D?D:""})]})})}),Object(g.jsxs)(x.a,{children:[Object(g.jsx)(p.a,{onClick:Re,type:"submit",children:"C\u1eadp nh\u1eadt"}),Object(g.jsx)(p.a,{onClick:we,children:"H\u1ee7y"})]})]}),Object(g.jsx)("div",{className:"profile-user-email",children:O.email})]}),Object(g.jsxs)("div",{className:"profile-info",children:[Object(g.jsxs)("div",{className:"profile-info-left",children:[Object(g.jsxs)("div",{className:"profile-info-text",children:["Khoa: ",O.major?O.major:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"]}),Object(g.jsxs)("div",{className:"profile-info-text",children:["L\u1edbp: ",O.className?O.className:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"]})]}),Object(g.jsxs)("div",{className:"profile-info-right",children:[Object(g.jsxs)("div",{className:"profile-info-text",children:["Ng\xe0y sinh: ",O.birthday?O.birthday:"Kh\xf4ng x\xe1c \u0111\u1ecbnh"]}),"student"!=c.role&&c.emailname===t?Object(g.jsx)("div",{className:"profile-info-text pw",onClick:Ce,children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u "}):null]})]})]})})}var ve=n(363),ge=n(364),fe=n(365),ke=n(366),ye=n(367),Ne=n(407),Se=(n(256),n(81)),Ce=function(e,t){switch(t.type){case"POST_START":return{posts:[],isFetching:!0,error:!1};case"POST_SUCCESS":return{posts:t.payload,isFetching:!1,error:!1};case"POST_FAILURE":return{posts:[],isFetching:!1,error:t.payload};default:return e}},we={posts:[],isFetching:!1,error:!1},Te=Object(a.createContext)(we),Ie=function(e){var t=e.children,n=Object(a.useReducer)(Ce,we),c=Object(b.a)(n,2),s=c[0],r=c[1];return Object(g.jsx)(Te.Provider,{value:{posts:s.posts,isFetching:s.isFetching,error:s.error,dispatch:r},children:t})},_e=(n(257),n(362));function Ee(e){var t=e.comment,n="https://tdtu-social-nw-server.herokuapp.com/api",c=Object(a.useContext)(J).user,s=Object(a.useState)(null),r=Object(b.a)(s,2),i=r[0],j=r[1],u=Boolean(i),v=function(){j(null)},f=Object(a.useState)(!1),k=Object(b.a)(f,2),y=k[0],S=k[1],C=function(){S(!1)},w=Object(a.useState)({}),T=Object(b.a)(w,2),I=T[0],_=T[1],E=Object(a.useState)(!1),F=Object(b.a)(E,2),K=F[0],D=F[1];Object(a.useEffect)((function(){var e=!0,a=function(){var a=Object(l.a)(o.a.mark((function a(){var c;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.a.get(n+"/users?userId="+t.userId);case 2:c=a.sent,e&&_(c.data);case 4:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return a(),function(){return e=!1}}),[t.userId]);var R=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.post(n+"/comments/"+t._id,{userId:c._id});case 3:D(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"comment-container",children:K?Object(g.jsxs)("div",{className:"comment",children:[Object(g.jsx)("div",{className:"comment-left",children:Object(g.jsx)("div",{className:"comment-temp",children:"t"})}),Object(g.jsx)("div",{className:"comment-deleted",children:"This comment has been deleted"}),Object(g.jsx)("div",{className:"comment-right",children:Object(g.jsx)("div",{className:"comment-temp",children:"t"})})]}):Object(g.jsxs)("div",{className:"comment",children:[Object(g.jsx)("div",{className:"comment-left",children:I.avatar?Object(g.jsx)("img",{src:"https://tdtu-social-nw-server.herokuapp.com/images/"+I.avatar,alt:"",className:"comment-avatar"}):Object(g.jsx)(Ne.a,{})}),Object(g.jsxs)("div",{className:"comment-center",children:[Object(g.jsxs)("div",{className:"comment-name",children:[I.username,Object(g.jsx)("p",{className:"comment-time",children:Object(Se.a)(t.createdAt)})]}),Object(g.jsx)("div",{className:"comment-text",children:t.text})]}),Object(g.jsxs)("div",{className:"comment-right",children:[Object(g.jsx)(le.a,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":u?"true":void 0,"aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},children:Object(g.jsx)(_e.a,{})}),Object(g.jsxs)(d.a,{open:y,onClose:C,children:[Object(g.jsx)(h.a,{children:"Delete Confirmation"}),Object(g.jsx)(m.a,{children:Object(g.jsx)(O.a,{children:"Do you want to delete this post?"})}),Object(g.jsxs)(x.a,{children:[Object(g.jsx)(p.a,{onClick:R,children:"Confirm"}),Object(g.jsx)(p.a,{onClick:C,children:"Cancel"})]})]}),Object(g.jsxs)(A.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:i,open:u,onClose:v,onClick:v,PaperProps:{style:{maxHeight:270,width:"30ch"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[c._id===t.userId?Object(g.jsxs)(B.a,{onClick:function(){S(!0)},children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(P.a,{fontSize:"small"})}),"Delete comment"]}):null,c._id===t.userId?Object(g.jsxs)(B.a,{children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(P.a,{fontSize:"small"})}),"Edit comment"]}):null,Object(g.jsxs)(B.a,{children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(P.a,{fontSize:"small"})}),"Report"]})]})]})]})})})}function Fe(e){var t=e.post,n="https://tdtu-social-nw-server.herokuapp.com/images/",c="https://tdtu-social-nw-server.herokuapp.com/api",s=Object(a.useContext)(J).user,r=Object(a.useContext)(Te),i=r.posts,j=r.dispatch,v=Object(a.useState)(null),f=Object(b.a)(v,2),k=f[0],y=f[1],S=Boolean(k),C=function(){y(null)},w=Object(a.useState)(!1),T=Object(b.a)(w,2),I=T[0],_=T[1],E=function(){_(!1)},F=Object(a.useState)(!1),K=Object(b.a)(F,2),D=K[0],R=K[1],U=function(){R(!1)},L=Object(a.useState)({}),z=Object(b.a)(L,2),M=z[0],q=z[1],V=Object(a.useState)(0),W=Object(b.a)(V,2),Q=W[0],Y=W[1],X=Object(a.useState)(!1),Z=Object(b.a)(X,2),$=Z[0],ee=Z[1],te=Object(a.useState)([]),ne=Object(b.a)(te,2),ae=ne[0],ce=ne[1],se=Object(a.useState)(0),re=Object(b.a)(se,2),ie=re[0],oe=re[1],be=Object(a.useState)(!1),de=Object(b.a)(be,2),he=de[0],me=de[1];Object(a.useEffect)((function(){ee(t.likes.includes(s._id))}),[s._id,t.likes]),Object(a.useEffect)((function(){var e=!0,n=function(){var n=Object(l.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.get(c+"/users?userId="+t.userId);case 2:a=n.sent,e&&(q(a.data),Y(t.likes.length));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){return e=!1}}),[t.userId]);var Oe=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.put(c+"/posts/"+t._id+"/like",{userId:s._id});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:Y($?Q-1:Q+1),ee(!$);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(l.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get(c+"/comments/"+t._id);case 3:return n=e.sent,console.log(n.data),n.data.map(function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get(c+"/users?userId="+t.userId);case 2:return n=e.sent,e.next=5,N.a.post(c+"/comments/"+t._id,{userId:n.data._id});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,N.a.post(c+"/posts/"+t._id,{userId:s._id});case 8:j({type:"POST_SUCCESS",payload:i.filter((function(e){return e._id!==t._id}))}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),pe=Object(a.useState)(""),Ce=Object(b.a)(pe,2),we=Ce[0],Ie=Ce[1],_e=function(){var e=Object(l.a)(o.a.mark((function e(){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=t).text=we,e.next=5,N.a.put(c+"/posts/"+t._id,n);case 5:a=e.sent,console.log(a.data),s=i.map((function(e){return e._id===a.data._id?a.data:e})),console.log(s),j({type:"POST_SUCCESS",payload:s}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(l.a)(o.a.mark((function e(){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==ie){e.next=2;break}return e.abrupt("return",(function(){return console.log("No cmts")}));case 2:return e.prev=2,e.next=5,N.a.get(c+"/comments/pid/"+t._id+"/page/"+ie);case 5:(n=e.sent).data.sort((function(e,t){return e.createdAt-t.createdAt?1:-1})),a=[].concat(Object(u.a)(n.data),Object(u.a)(ae)),s=a.filter((function(e,t){return t===a.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(e)}))})),ce(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){Fe()}),[ie]);var Pe=function(){(ae.length<t.comments.length||ae.length>t.comments.length)&&oe(ie+1)},Ke=Object(a.useRef)(""),Ae=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""===Ke.current.value){e.next=16;break}return a={userId:s._id,postId:t._id,text:Ke.current.value},e.prev=3,e.next=6,N.a.post(c+"/comments/",a);case 6:r=e.sent,console.log(r.data),ce([].concat(Object(u.a)(ae),[r.data])),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:Ke.current.value="",e.next=16;break;case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"post",children:[Object(g.jsxs)(d.a,{open:I,onClose:E,children:[Object(g.jsx)(h.a,{children:"Delete Confirmation"}),Object(g.jsx)(m.a,{children:Object(g.jsx)(O.a,{children:"Do you want to delete this post?"})}),Object(g.jsxs)(x.a,{children:[Object(g.jsx)(p.a,{onClick:xe,children:"Confirm"}),Object(g.jsx)(p.a,{onClick:E,children:"Cancel"})]})]}),Object(g.jsxs)(d.a,{open:D,onClose:U,children:[Object(g.jsx)(h.a,{children:"C\u1eadp nh\u1eadt th\xf4ng tin"}),Object(g.jsx)(m.a,{children:Object(g.jsx)(je.a,{component:"form",sx:{"& .MuiTextField-root":{m:2,width:500,maxWidth:"100%"}},autoComplete:"off",children:Object(g.jsx)(ue.a,{required:!0,id:"outlined-required",defaultValue:t.text,onChange:function(e){return Ie(e.target.value)}})})}),Object(g.jsxs)(x.a,{children:[Object(g.jsx)(p.a,{onClick:_e,type:"submit",children:"C\u1eadp nh\u1eadt"}),Object(g.jsx)(p.a,{onClick:U,children:"H\u1ee7y"})]})]}),Object(g.jsxs)("div",{className:"post-top",children:[Object(g.jsx)(H.b,{to:"/profile/"+M.emailname,children:Object(g.jsxs)("div",{className:"post-top-left",children:[M.avatar?Object(g.jsx)("img",{src:n+M.avatar,alt:"",className:"post-top-avatar"}):Object(g.jsx)(Ne.a,{}),Object(g.jsxs)("div",{className:"post-top-user",children:[Object(g.jsx)("p",{className:"post-top-user-name",children:M.username}),Object(g.jsx)("p",{className:"post-top-user-time",children:Object(Se.a)(t.createdAt)})]})]})}),Object(g.jsxs)("div",{className:"post-top-right",children:[Object(g.jsx)(le.a,{"aria-label":"more",id:"long-button","aria-controls":"long-menu","aria-expanded":S?"true":void 0,"aria-haspopup":"true",onClick:function(e){y(e.currentTarget)},children:Object(g.jsx)(ve.a,{})}),Object(g.jsxs)(A.a,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:k,open:S,onClose:C,onClick:C,PaperProps:{style:{maxHeight:270,width:"30ch"}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[s._id===t.userId?Object(g.jsxs)(B.a,{onClick:function(){_(!0)},children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(P.a,{fontSize:"small"})}),"X\xf3a b\xe0i vi\u1ebft"]}):null,s._id===t.userId?Object(g.jsxs)(B.a,{onClick:function(){R(!0)},children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(P.a,{fontSize:"small"})}),"S\u1eeda b\xe0i vi\u1ebft"]}):null,Object(g.jsxs)(B.a,{children:[Object(g.jsx)(G.a,{children:Object(g.jsx)(P.a,{fontSize:"small"})}),"B\xe1o c\xe1o"]})]})]})]}),Object(g.jsxs)("div",{className:"post-center",children:[Object(g.jsx)("div",{className:"post-center-text",children:t.text}),t.img?Object(g.jsx)("img",{src:n+t.img,alt:"",className:"post-center-media"}):null]}),Object(g.jsxs)("div",{className:"post-bottom",children:[Object(g.jsxs)("div",{className:"post-bottom-count",children:[Object(g.jsxs)("div",{className:"post-bottom-count-like",children:[Object(g.jsx)(ge.a,{className:"post-bottom-count-icon"}),Object(g.jsx)("span",{className:"post-bottom-count-text",children:Q})]}),Object(g.jsx)("div",{className:"post-bottom-count-comments",children:t.comments.length+" comments"})]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{className:"post-bottom-item",children:[Object(g.jsxs)("div",{className:"post-bottom-like-comment",onClick:Oe,children:[Object(g.jsx)(ge.a,{style:{fill:"rgb(58, 174, 252)"}}),Object(g.jsx)("span",{className:"post-bottom-like-comment-text",children:"Th\xedch"})]}),Object(g.jsxs)("div",{className:"post-bottom-like-comment",onClick:function(){me(!0),Pe(),document.getElementById(t._id).focus()},children:[Object(g.jsx)(fe.a,{}),Object(g.jsx)("span",{className:"post-bottom-like-comment-text",children:"B\xecnh lu\u1eadn"})]})]}),Object(g.jsx)("hr",{})]}),Object(g.jsxs)("div",{className:"post-comments",children:[Object(g.jsxs)("div",{className:"post-load-comments",children:[Object(g.jsxs)("p",{className:"post-load-comments-text",onClick:function(){ie>1?(ce([]),oe(1)):1===ie&&(ce([]),Fe())},children:["T\u1ea3i l\u1ea1i ",Object(g.jsx)(ke.a,{className:"load-comments-icon"})]}),Object(g.jsxs)("p",{className:"post-load-comments-text",onClick:Pe,children:[Object(g.jsx)(ke.a,{className:"load-comments-icon"})," T\u1ea3i"]})]}),ae.map((function(e){return Object(g.jsx)(Ee,{comment:e},e._id)})),Object(g.jsxs)("form",{className:"post-send-comment "+(he?"active":""),onSubmit:Ae,children:[Object(g.jsx)("img",{src:n+s.avatar,alt:"",className:"comment-avatar"}),Object(g.jsx)("div",{className:"comment-input",children:Object(g.jsx)("input",{type:"text",placeholder:"Input message",id:t._id,ref:Ke})}),Object(g.jsx)("button",{type:"submit",className:"comment-input-btn",children:Object(g.jsx)(ye.a,{})})]})]})]})}var Pe=n(368),Ke=n(369),Ae=n(370);n(258);function De(){var e="https://tdtu-social-nw-server.herokuapp.com/api",t=Object(a.useContext)(J).user,n=Object(a.useContext)(Te),c=n.posts,s=n.dispatch,r=Object(a.useState)(null),i=Object(b.a)(r,2),j=i[0],d=i[1],h=Object(a.useState)(""),m=Object(b.a)(h,2),O=(m[0],m[1]),x=Object(a.useRef)(""),p=function(){var n=Object(l.a)(o.a.mark((function n(a){var r,i,l,b;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),""!==x.current.value&&null!==x.current.value){n.next=4;break}return O("Please enter Username"),n.abrupt("return",!1);case 4:if(r={userId:t._id,text:x.current.value},!j){n.next=19;break}return i=new FormData,l=Date.now()+"_"+j.name,i.append("name",l),i.append("file",j),r.img="post/"+l,n.prev=11,n.next=14,N.a.post(e+"/upload/post",i);case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(11),console.log(n.t0);case 19:return n.prev=19,n.next=22,N.a.post(e+"/posts/",{newPost:r});case 22:return n.next=24,N.a.get(e+"/posts/profile/emailname/"+t.emailname+"/page/1/limit/1");case 24:b=n.sent,s({type:"POST_SUCCESS",payload:[b.data[0]].concat(Object(u.a)(c))}),n.next=31;break;case 28:n.prev=28,n.t1=n.catch(19),console.log(n.t1);case 31:case"end":return n.stop()}}),n,null,[[11,16],[19,28]])})));return function(e){return n.apply(this,arguments)}}();return Object(g.jsx)("div",{className:"share",children:Object(g.jsxs)("form",{className:"shareContainer",onSubmit:p,children:[Object(g.jsxs)("div",{className:"share-top",children:[Object(g.jsx)("img",{src:"https://tdtu-social-nw-server.herokuapp.com/images/"+t.avatar,alt:"",className:"share-avatar"}),Object(g.jsx)("div",{className:"share-input",children:Object(g.jsx)("input",{type:"text",className:"share-input-box",placeholder:"What's on your mind "+t.username+"?",ref:x})}),Object(g.jsx)("div",{children:Object(g.jsx)("button",{className:"share-btn",type:"submit",children:"\u0110\u0103ng"})})]}),Object(g.jsx)("div",{className:"share-bottom",children:Object(g.jsxs)("div",{className:"share-options",children:[Object(g.jsxs)("label",{htmlFor:"file",className:"share-option-item",children:[Object(g.jsx)(Pe.a,{htmlColor:"#20ab00",className:"share-option-item-icon"}),Object(g.jsx)("span",{className:"share-option-item-text",children:"\u1ea2nh ho\u1eb7c Video"})]}),Object(g.jsx)("input",{type:"file",name:"file",id:"file",style:{display:"none"},onChange:function(e){return d(e.target.files[0])}}),Object(g.jsxs)("div",{className:"share-option-item",children:[Object(g.jsx)(Ke.a,{htmlColor:"#fa7500",className:"share-option-item-icon"}),Object(g.jsx)("span",{className:"share-option-item-text",children:"Tag Friends"})]}),Object(g.jsxs)("div",{className:"share-option-item",children:[Object(g.jsx)(Ae.a,{htmlColor:"#fcba03",className:"share-option-item-icon"}),Object(g.jsx)("span",{className:"share-option-item-text",children:"C\u1ea3m x\xfac"})]})]})})]})})}n(259);var Re=n(371);function Ue(e){var t=e.emailname,n=Object(a.useState)(1),c=Object(b.a)(n,2),s=c[0],r=c[1],i=Object(a.useState)(!1),j=Object(b.a)(i,2),d=j[0],h=j[1],m=Object(a.useContext)(Te),O=m.posts,x=m.isFetching,p=m.dispatch,v=Object(a.useContext)(J).user,f="https://tdtu-social-nw-server.herokuapp.com/api",k=function(){var e=Object(l.a)(o.a.mark((function e(){var n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=7;break}return e.next=4,N.a.get(f+"/posts/profile/emailname/"+t+"/page/"+s+"/limit/10");case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,N.a.get(f+"/posts/timeline/page/"+s+"/limit/10");case 9:e.t0=e.sent;case 10:n=e.t0,O.concat(n.data).length===O.length&&h(!0),1===s?p({type:"POST_SUCCESS",payload:Object(u.a)(n.data)}):(a=[].concat(Object(u.a)(O),Object(u.a)(n.data)),c=a.filter((function(e,t){return t===a.findIndex((function(t){return JSON.stringify(t)===JSON.stringify(e)}))})),p({type:"POST_SUCCESS",payload:c})),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(0),p({type:"POST_FAILURE",payload:e.t1});case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){k()}),[s,t]);var y=function(){var e=Math.ceil(window.innerHeight+window.scrollY)>=document.documentElement.scrollHeight;setTimeout((function(){e&&!d&&r(s+1)}),100)};Object(a.useEffect)((function(){return window.addEventListener("scroll",y,{passive:!0}),function(){window.removeEventListener("scroll",y)}}),[O]);var S=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(De,{}),O.map((function(e){return Object(g.jsx)(Fe,{post:e},e._id)}))]})},C=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(pe,{emailname:t}),v.emailname===t?Object(g.jsx)(De,{}):null,O.map((function(e){return Object(g.jsx)(Fe,{post:e},e._id)}))]})};return x?Object(g.jsx)(Ne.a,{}):Object(g.jsx)("div",{className:"feed",children:Object(g.jsxs)("div",{className:"feed-items",children:[t?Object(g.jsx)(C,{}):Object(g.jsx)(S,{}),d?Object(g.jsxs)("div",{className:"feed-end",children:[Object(g.jsx)(Re.a,{})," No more posts to load "]}):null]})})}function Le(){var e=Object(a.useContext)(Te),t=(e.posts,e.dispatch);return Object(a.useEffect)((function(){window.scrollTo(0,0),t({type:"POST_START"})}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)(ee,{}),Object(g.jsxs)("div",{className:"mainContainer",children:[Object(g.jsx)(ce,{}),Object(g.jsx)(Ue,{}),Object(g.jsx)(te,{})]})]})}function ze(){var e=Object(j.h)().emailname,t=Object(a.useContext)(Te),n=(t.posts,t.dispatch);return Object(a.useEffect)((function(){window.scrollTo(0,0),n({type:"POST_START"})}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)(ee,{}),Object(g.jsxs)("div",{className:"mainContainer",children:[Object(g.jsx)(ce,{}),Object(g.jsx)(Ue,{emailname:e}),Object(g.jsx)(te,{})]})]})}var Me=n(177);n(260);function qe(){var e=Object(a.useState)("toggle"),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)("toggle-btn std or"),r=Object(b.a)(s,2),i=r[0],j=r[1],u=Object(a.useState)("toggle-btn oth"),d=Object(b.a)(u,2),h=d[0],m=d[1],O=Object(a.useState)("students"),x=Object(b.a)(O,2),p=x[0],v=x[1],f=Object(a.useState)("others"),k=Object(b.a)(f,2),y=k[0],S=k[1],C=Object(a.useState)(""),w=Object(b.a)(C,2),T=w[0],I=w[1],_=Object(a.useState)(""),E=Object(b.a)(_,2),F=E[0],P=E[1],K="https://tdtu-social-nw-server.herokuapp.com/api",A=Object(a.useRef)(),D=Object(a.useRef)(),R=Object(a.useContext)(J),U=R.isFetching,L=(R.error,R.dispatch),z=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=A.current.value,a=D.current.value,""!==n&&null!==n){e.next=6;break}return P("Vui l\xf2ng nh\u1eadp t\xe0i kho\u1ea3n"),e.abrupt("return",!1);case 6:if(""!==a&&null!==a){e.next=9;break}return P("Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u"),e.abrupt("return",!1);case 9:return L({type:"SIGNIN_START"}),e.prev=10,e.next=13,N.a.post(K+"/auth/signin",{emailname:n,password:a});case 13:if("success"!==(c=e.sent).data.code){e.next=20;break}return localStorage.setItem("userToken",c.data.userToken),e.next=18,N.a.get(K+"/auth/user/"+localStorage.getItem("userToken"));case 18:s=e.sent,L({type:"SIGNIN_SUCCESS",payload:s.data});case 20:if("user not found"!==c.data.code){e.next=24;break}return P("T\xe0i kho\u1ea3n kh\xf4ng t\u1ed3n t\u1ea1i"),L({type:"SIGNIN_FAILURE",payload:c.data.code}),e.abrupt("return",!1);case 24:if("wrong password"!==c.data.code){e.next=28;break}return P("Sai m\u1eadt kh\u1ea9u"),L({type:"SIGNIN_FAILURE",payload:c.data.code}),e.abrupt("return",!1);case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(10),L({type:"SIGNIN_FAILURE",payload:e.t0});case 33:case"end":return e.stop()}}),e,null,[[10,30]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.profileObj,L({type:"SIGNIN_START"}),e.prev=2,e.next=5,N.a.post(K+"/auth/signin/google",{authId:n.googleId,email:n.email,name:n.name});case 5:if("success"!==(a=e.sent).data.code){e.next=12;break}return localStorage.setItem("userToken",a.data.userToken),e.next=10,N.a.get(K+"/auth/user/"+localStorage.getItem("userToken"));case 10:c=e.sent,L({type:"SIGNIN_SUCCESS",payload:c.data});case 12:if("email not aceptable"!==a.data.code){e.next=16;break}return I("Ch\u1ec9 \u0111\u01b0\u1ee3c ph\xe9p \u0111\u0103ng nh\u1eadp b\u1eb1ng email c\xf3 \u0111u\xf4i student.tdtu.edu.vn ho\u1eb7c tdtu.edu.vn"),L({type:"SIGNIN_FAILURE",payload:a.data.code}),e.abrupt("return",!1);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),L({type:"SIGNIN_FAILURE",payload:e.t0});case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{className:"signin-container",children:Object(g.jsxs)("div",{className:"signin-form",children:[Object(g.jsx)("h1",{className:"signin-logo",children:"TDTU"}),Object(g.jsxs)("div",{className:"toggle-box",children:[Object(g.jsx)("div",{className:n}),Object(g.jsx)("button",{type:"button",className:i,onClick:function(){c("toggle"),v("students"),S("others"),m("toggle-btn oth"),j("toggle-btn std or")},children:"Sinh vi\xean"}),Object(g.jsx)("button",{type:"button",className:h,onClick:function(){c("toggle or"),v("students or"),S("others or"),m("toggle-btn oth or"),j("toggle-btn std")},children:"Kh\xe1c"})]}),Object(g.jsxs)("form",{className:y,onSubmit:z,children:[Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{type:"text",placeholder:"T\xe0i kho\u1ea3n",ref:A})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{type:"password",placeholder:"M\u1eadt kh\u1ea9u",ref:D})}),F?Object(g.jsx)("div",{className:"signin-error",children:F}):null,Object(g.jsx)("button",{className:"signin-submit-btn",type:"submit",children:U?Object(g.jsx)(Ne.a,{color:"secondary",size:"20px"}):"\u0110\u0103ng nh\u1eadp"})]}),Object(g.jsxs)("div",{className:p,children:[Object(g.jsx)(Me.GoogleLogin,{clientId:"1088298890063-t5vib7q8bt521nue8f617lvu3ii0a5e4.apps.googleusercontent.com",buttonText:"\u0110\u0103ng nh\u1eadp v\u1edbi Google",onSuccess:M,onFailure:M,cookiePolicy:"single_host_origin"}),T?Object(g.jsx)("div",{className:"signin-error",children:T}):null]})]})})})}function Be(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(qe,{})})}n(261),n(262);var Ge=n(372);function He(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)(),s=Object(a.useState)([]),r=Object(b.a)(s,2),i=r[0],j=r[1],d=Object(a.useState)(""),h=Object(b.a)(d,2),m=h[0],O=h[1],x=function(e){e.target.checked?j([].concat(Object(u.a)(i),[e.target.value])):j(i.filter((function(t){return t!==e.target.value})))};Object(a.useEffect)((function(){console.log(m)}),[m]);var p=function(){var a=Object(l.a)(o.a.mark((function a(s){var r,l,j,u;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s.preventDefault(),r=e.current.value,l=t.current.value,j=n.current.value,u=c.current.value,""!==r&&null!==r){a.next=8;break}return O("Please enter Username"),a.abrupt("return",!1);case 8:if(""!==l&&null!==l){a.next=11;break}return O("Please enter Name"),a.abrupt("return",!1);case 11:if(""!==j&&null!==j){a.next=14;break}return O("Please enter Password"),a.abrupt("return",!1);case 14:if(j===u){a.next=17;break}return O("Password does not match"),a.abrupt("return",!1);case 17:if(0!==i.length){a.next=20;break}return O("You must grant at least one permission"),a.abrupt("return",!1);case 20:return a.prev=20,a.next=23,N.a.post("https://tdtu-social-nw-server.herokuapp.com/api/auth/register",{emailname:r,name:l,password:j,permissions:i});case 23:a.sent,a.next=28;break;case 26:a.prev=26,a.t0=a.catch(20);case 28:case"end":return a.stop()}}),a,null,[[20,26]])})));return function(e){return a.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"register-form",children:[Object(g.jsx)("h1",{className:"register-logo",children:"TDTU"}),Object(g.jsxs)("form",{className:"register",onSubmit:p,children:[Object(g.jsxs)("div",{className:"register-input-group",children:[Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{type:"text",placeholder:"Username",ref:e})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{type:"text",placeholder:"Name",ref:t})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{type:"password",placeholder:"Password",ref:n})}),Object(g.jsx)("br",{}),Object(g.jsx)("div",{className:"form-group",children:Object(g.jsx)("input",{type:"password",placeholder:"Confirm Password",ref:c})})]}),Object(g.jsxs)("div",{className:"register-checkbox-group1",children:[Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Ph\xf2ng C\xf4ng t\xe1c h\u1ecdc sinh sinh vi\xean",onChange:x})," Ph\xf2ng C\xf4ng t\xe1c h\u1ecdc sinh sinh vi\xean"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Ph\xf2ng \u0110\u1ea1i h\u1ecdc",onChange:x})," Ph\xf2ng \u0110\u1ea1i h\u1ecdc"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Ph\xf2ng Sau \u0111\u1ea1i h\u1ecdc",onChange:x})," Ph\xf2ng Sau \u0111\u1ea1i h\u1ecdc"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Ph\xf2ng \u0111i\u1ec7n to\xe1n v\xe0 m\xe1y t\xednh",onChange:x})," Ph\xf2ng \u0111i\u1ec7n to\xe1n v\xe0 m\xe1y t\xednh"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Ph\xf2ng kh\u1ea3o th\xed v\xe0 ki\u1ec3m \u0111\u1ecbnh ch\u1ea5t l\u01b0\u1ee3ng",onChange:x})," Ph\xf2ng kh\u1ea3o th\xed v\xe0 ki\u1ec3m \u0111\u1ecbnh ch\u1ea5t l\u01b0\u1ee3ng"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Ph\xf2ng t\xe0i ch\xednh",onChange:x})," Ph\xf2ng t\xe0i ch\xednh"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"TDT Creative Language Center",onChange:x})," TDT Creative Language Center"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Trung t\xe2m tin h\u1ecdc",onChange:x})," Trung t\xe2m tin h\u1ecdc"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Trung t\xe2m \u0111\xe0o t\u1ea1o ph\xe1t tri\u1ec3n x\xe3 h\u1ed9i",onChange:x})," Trung t\xe2m \u0111\xe0o t\u1ea1o ph\xe1t tri\u1ec3n x\xe3 h\u1ed9i"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Trung t\xe2m ph\xe1t tri\u1ec3n Khoa h\u1ecdc qu\u1ea3n l\xfd v\xe0 \u1ee8ng d\u1ee5ng c\xf4ng ngh\u1ec7",onChange:x})," Trung t\xe2m ph\xe1t tri\u1ec3n Khoa h\u1ecdc qu\u1ea3n l\xfd v\xe0 \u1ee8ng d\u1ee5ng c\xf4ng ngh\u1ec7"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Trung t\xe2m h\u1ee3p t\xe1c doanh nghi\u1ec7p v\xe0 c\u1ef1u sinh vi\xean",onChange:x})," Trung t\xe2m h\u1ee3p t\xe1c doanh nghi\u1ec7p v\xe0 c\u1ef1u sinh vi\xean"]})]}),Object(g.jsxs)("div",{className:"register-checkbox-group2",children:[Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa Lu\u1eadt",onChange:x})," Khoa Lu\u1eadt"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Trung t\xe2m ngo\u1ea1i ng\u1eef - tin h\u1ecdc - b\u1ed3i d\u01b0\u1ee1ng v\u0103n h\xf3a",onChange:x})," Trung t\xe2m ngo\u1ea1i ng\u1eef - tin h\u1ecdc - b\u1ed3i d\u01b0\u1ee1ng v\u0103n h\xf3a"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Vi\u1ec7n ch\xednh s\xe1ch kinh t\u1ebf v\xe0 kinh doanh",onChange:x})," Vi\u1ec7n ch\xednh s\xe1ch kinh t\u1ebf v\xe0 kinh doanh"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa M\u1ef9 thu\u1eadt c\xf4ng nghi\u1ec7p",onChange:x})," Khoa M\u1ef9 thu\u1eadt c\xf4ng nghi\u1ec7p"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa \u0110i\u1ec7n - \u0110i\u1ec7n t\u1eed",onChange:x})," Khoa \u0110i\u1ec7n - \u0110i\u1ec7n t\u1eed"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa C\xf4ng ngh\u1ec7 th\xf4ng tin",onChange:x})," Khoa C\xf4ng ngh\u1ec7 th\xf4ng tin"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa Qu\u1ea3n tr\u1ecb kinh doanh",onChange:x})," Khoa Qu\u1ea3n tr\u1ecb kinh doanh"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa M\xf4i tr\u01b0\u1eddng v\xe0 b\u1ea3o h\u1ed9 lao \u0111\u1ed9ng",onChange:x})," Khoa M\xf4i tr\u01b0\u1eddng v\xe0 b\u1ea3o h\u1ed9 lao \u0111\u1ed9ng"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa Lao \u0111\u1ed9ng c\xf4ng \u0111o\xe0n",onChange:x})," Khoa Lao \u0111\u1ed9ng c\xf4ng \u0111o\xe0n"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa T\xe0i ch\xednh ng\xe2n h\xe0ng",onChange:x}),"  Khoa T\xe0i ch\xednh ng\xe2n h\xe0ng"]}),Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:[Object(g.jsx)("input",{type:"checkbox",name:"permission",value:"Khoa gi\xe1o d\u1ee5c qu\u1ed1c t\u1ebf",onChange:x}),"  Khoa gi\xe1o d\u1ee5c qu\u1ed1c t\u1ebf"]})]}),Object(g.jsx)("button",{className:"submit-btn",type:"submit",children:"Register"}),Object(g.jsx)("br",{})]}),Object(g.jsx)(H.b,{className:"register-back",to:"/",children:Object(g.jsx)(Ge.a,{})})]})})}var Ve=n(186),We=(n(263),n(132)),Je=n(133),Qe=n.n(Je),Ye=n(379);function Xe(e){e.announceId;var t="https://tdtu-social-nw-server.herokuapp.com/api",n=Object(j.h)(),c=Object(a.useContext)(J).user,s=Object(a.useContext)(Z).socket,r=Object(Ve.a)(),i=r.acceptedFiles,u=r.getRootProps,d=r.getInputProps,h=Object(a.useState)(""),m=Object(b.a)(h,2),O=m[0],x=m[1],p=Object(a.useState)(""),v=Object(b.a)(p,2),f=(v[0],v[1],Object(a.useState)(!1)),k=Object(b.a)(f,2),y=k[0],S=k[1],C=Object(a.useState)(!1),w=Object(b.a)(C,2),T=w[0],I=w[1],_=Object(a.useRef)(),E=(Object(a.useRef)(),Object(a.useRef)()),F=Object(a.useRef)(),P=Object(a.useState)(""),K=Object(b.a)(P,2),A=K[0],D=K[1],R=Object(a.useState)({}),U=Object(b.a)(R,2),L=U[0],z=U[1];Object(a.useEffect)((function(){console.log(A)}),[A]),Object(a.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get(t+"/announcements/list/"+n.announceId);case 3:a=e.sent,z(a.data),x(a.data.text),document.getElementById("announce-title").value=a.data.title,document.getElementById("announce-type").value=a.data.type,document.getElementById("announce-faculty").value=a.data.faculty,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();e()}),[n.announceId]);var M=i.map((function(e){return Object(g.jsxs)("li",{children:[e.path," - ",e.size," bytes"]},e.path)})),q=function(e,t){var n=t.getData();x(n)},B=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,r,l,j,u,b,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=_.current.value,r=O,l=E.current.value,j=F.current.value,""!==a&&null!==a){e.next=9;break}return D("Enter the title"),I(!0),e.abrupt("return",!1);case 9:if(""!==r&&null!==r){e.next=13;break}return D("Enter your announcement's detail"),I(!0),e.abrupt("return",!1);case 13:if(""!==l&&null!==l){e.next=17;break}return D("Enter your announcement's type"),I(!0),e.abrupt("return",!1);case 17:if(""!==j&&null!==j){e.next=23;break}return D("Enter your announcement's faculty"),I(!0),e.abrupt("return",!1);case 23:return e.prev=23,u={userId:c._id,title:a,text:r,type:l,faculty:j},i&&(b=[],i.map((function(e){var n=new FormData,a=Date.now()+"_"+e.name;n.append("name",a),n.append("file",e),b.push("announcement/"+a);try{N.a.post(t+"/upload/announcement",n)}catch(c){console.log(c)}})),u.file=b),e.next=28,N.a.post(t+"/announcements/",u);case 28:200===(d=e.sent).status?(document.getElementById("announce-title").value="",document.getElementById("announce-type").value="",document.getElementById("announce-faculty").value="",x(""),S(!0),s.emit("createNewAnnouncement",{sendName:c.username,avatar:c.avatar,data:d.data})):I(!0),e.next=34;break;case 32:e.prev=32,e.t0=e.catch(23);case 34:case"end":return e.stop()}}),e,null,[[23,32]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(o.a.mark((function e(n){var a,r,l,j,u,b,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=_.current.value,r=O,l=E.current.value,j=F.current.value,""!==a&&null!==a){e.next=9;break}return D("Enter the title"),I(!0),e.abrupt("return",!1);case 9:if(""!==r&&null!==r){e.next=13;break}return D("Enter your announcement's detail"),I(!0),e.abrupt("return",!1);case 13:if(""!==l&&null!==l){e.next=17;break}return D("Enter your announcement's type"),I(!0),e.abrupt("return",!1);case 17:if(""!==j&&null!==j){e.next=23;break}return D("Enter your announcement's faculty"),I(!0),e.abrupt("return",!1);case 23:return e.prev=23,u={userId:c._id,title:a,text:r,type:l,faculty:j},i&&(b=[],i.map((function(e){var n=new FormData,a=Date.now()+"_"+e.name;n.append("name",a),n.append("file",e),b.push("announcement/"+a);try{N.a.post(t+"/upload/announcement",n)}catch(c){console.log(c)}})),u.file=b),e.next=28,N.a.put(t+"/announcements/"+L._id,u);case 28:200===(d=e.sent).status?(document.getElementById("announce-title").value="",document.getElementById("announce-type").value="",document.getElementById("announce-faculty").value="",x(""),S(!0),s.emit("createNewAnnouncement",{sendName:c.username,avatar:c.avatar,data:d.data})):I(!0),e.next=34;break;case 32:e.prev=32,e.t0=e.catch(23);case 34:case"end":return e.stop()}}),e,null,[[23,32]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)(ee,{}),Object(g.jsxs)("div",{className:"mainContainer",children:[Object(g.jsx)(ce,{}),Object(g.jsxs)("div",{className:"CA-container",children:[Object(g.jsx)("h1",{children:"TH\xd4NG B\xc1O"}),n.announceId?Object(g.jsxs)("form",{className:"announce-form",onSubmit:G,children:[Object(g.jsxs)("table",{className:"announce-table",children:[Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colspan:"2",children:Object(g.jsx)(le.a,{variant:"outlined",color:"error",children:Object(g.jsx)(H.b,{to:"/announcement/list",children:Object(g.jsx)(Ge.a,{})})})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:Object(g.jsx)("label",{htmlFor:"announce-title",children:Object(g.jsx)("h3",{children:"Ti\xeau \u0111\u1ec1"})})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"2",children:Object(g.jsx)("input",{ref:_,type:"text",name:"announce-title",id:"announce-title",className:"announce-input-text"})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:Object(g.jsxs)("label",{htmlFor:"announce-detail",children:[Object(g.jsx)("h3",{children:"Chi ti\u1ebft"})," "]})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"2",children:Object(g.jsx)("div",{className:"rich",children:Object(g.jsx)(We.CKEditor,{editor:Qe.a,data:O,onChange:q})})})}),Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{children:[Object(g.jsx)("label",{htmlFor:"announce-type"}),Object(g.jsx)("h3",{children:"Ch\u1ee7 \u0111\u1ec1"})]}),Object(g.jsxs)("td",{children:[Object(g.jsx)("label",{htmlFor:"announce-faculty"}),Object(g.jsx)("h3",{children:"Ph\xf2ng ban"})]})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsxs)("select",{name:"announce-type",id:"announce-type",ref:E,children:[Object(g.jsx)("option",{value:"",selected:"selected",disabled:!0,children:"Ch\u1ee7 \u0111\u1ec1"}),Object(g.jsx)("option",{value:"H\u01b0\u1edbng d\u1eabn",children:"H\u01b0\u1edbng d\u1eabn"}),Object(g.jsx)("option",{value:"K\u1ebf ho\u1ea1ch",children:"K\u1ebf ho\u1ea1ch"}),Object(g.jsx)("option",{value:"S\u1ef1 ki\u1ec7n",children:"S\u1ef1 ki\u1ec7n"})]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("select",{name:"announce-faculty",id:"announce-faculty",ref:F,children:[Object(g.jsx)("option",{value:"",selected:"selected",disabled:!0,children:"Khoa"}),c.permissions.map((function(e){return Object(g.jsx)("option",{value:e,children:e})}))]})})]}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:Object(g.jsx)("label",{htmlFor:"announce-file",children:Object(g.jsx)("h3",{children:"T\u1ec7p tin \u0111\xednh k\xe8m"})})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"2",children:Object(g.jsxs)("div",{className:"files-form",children:[Object(g.jsxs)("div",Object(re.a)(Object(re.a)({},u({className:"dropzone"})),{},{children:[Object(g.jsx)("input",Object(re.a)({},d())),Object(g.jsx)("p",{children:"K\xe9o th\u1ea3 files ho\u1eb7c nh\u1ea5n \u0111\u1ec3 ch\u1ecdn file"})]})),Object(g.jsxs)("aside",{children:[Object(g.jsx)("h4",{children:"Files"}),Object(g.jsx)("ul",{children:M})]})]})})})]}),y?Object(g.jsx)("div",{children:Object(g.jsx)(Ye.a,{severity:"success",children:"Update successfully"})}):Object(g.jsx)("div",{style:{display:"none"},children:Object(g.jsx)("h1",{style:{display:"none"},children:"Not Good"})}),T?Object(g.jsx)("div",{children:Object(g.jsx)(Ye.a,{severity:"error",children:A})}):Object(g.jsx)("div",{children:Object(g.jsx)("h1",{style:{display:"none"},children:"Not Good"})}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("button",{className:"announce-btn-submit",type:"submit",children:"Update"}),Object(g.jsx)("button",{className:"announce-btn-reset",type:"reset",children:"Cancel"})]})]}):Object(g.jsxs)("form",{className:"announce-form",onSubmit:B,children:[Object(g.jsxs)("table",{className:"announce-table",children:[Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colspan:"2",children:Object(g.jsx)(le.a,{variant:"outlined",color:"error",children:Object(g.jsx)(H.b,{to:"/announcement/list",children:Object(g.jsx)(Ge.a,{})})})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:Object(g.jsx)("label",{htmlFor:"announce-title",children:Object(g.jsx)("h3",{children:"Ti\xeau \u0111\u1ec1"})})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"2",children:Object(g.jsx)("input",{ref:_,type:"text",name:"announce-title",id:"announce-title",className:"announce-input-text"})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:Object(g.jsxs)("label",{htmlFor:"announce-detail",children:[Object(g.jsx)("h3",{children:"Chi ti\u1ebft"})," "]})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"2",children:Object(g.jsx)("div",{className:"rich",children:Object(g.jsx)(We.CKEditor,{editor:Qe.a,data:O,onChange:q})})})}),Object(g.jsxs)("tr",{children:[Object(g.jsxs)("td",{children:[Object(g.jsx)("label",{htmlFor:"announce-type"}),Object(g.jsx)("h3",{children:"Ch\u1ee7 \u0111\u1ec1"})]}),Object(g.jsxs)("td",{children:[Object(g.jsx)("label",{htmlFor:"announce-faculty"}),Object(g.jsx)("h3",{children:"Ph\xf2ng ban"})]})]}),Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:Object(g.jsxs)("select",{name:"announce-type",id:"announce-type",ref:E,children:[Object(g.jsx)("option",{value:"",selected:"selected",disabled:!0,children:"Ch\u1ee7 \u0111\u1ec1"}),Object(g.jsx)("option",{value:"H\u01b0\u1edbng d\u1eabn",children:"H\u01b0\u1edbng d\u1eabn"}),Object(g.jsx)("option",{value:"K\u1ebf ho\u1ea1ch",children:"K\u1ebf ho\u1ea1ch"}),Object(g.jsx)("option",{value:"S\u1ef1 ki\u1ec7n",children:"S\u1ef1 ki\u1ec7n"})]})}),Object(g.jsx)("td",{children:Object(g.jsxs)("select",{name:"announce-faculty",id:"announce-faculty",ref:F,children:[Object(g.jsx)("option",{value:"",selected:"selected",disabled:!0,children:"Khoa"}),c.permissions.map((function(e){return Object(g.jsx)("option",{value:e,children:e})}))]})})]}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{children:Object(g.jsx)("label",{htmlFor:"announce-file",children:Object(g.jsx)("h3",{children:"T\u1ec7p tin \u0111\xednh k\xe8m"})})})}),Object(g.jsx)("tr",{children:Object(g.jsx)("td",{colSpan:"2",children:Object(g.jsxs)("div",{className:"files-form",children:[Object(g.jsxs)("div",Object(re.a)(Object(re.a)({},u({className:"dropzone"})),{},{children:[Object(g.jsx)("input",Object(re.a)({},d())),Object(g.jsx)("p",{children:"K\xe9o th\u1ea3 files ho\u1eb7c nh\u1ea5n \u0111\u1ec3 ch\u1ecdn file"})]})),Object(g.jsxs)("aside",{children:[Object(g.jsx)("h4",{children:"Files"}),Object(g.jsx)("ul",{children:M})]})]})})})]}),y?Object(g.jsx)("div",{children:Object(g.jsx)(Ye.a,{severity:"success",children:"Submit successfully"})}):Object(g.jsx)("div",{style:{display:"none"},children:Object(g.jsx)("h1",{style:{display:"none"},children:"Not Good"})}),T?Object(g.jsx)("div",{children:Object(g.jsx)(Ye.a,{severity:"error",children:A})}):Object(g.jsx)("div",{children:Object(g.jsx)("h1",{style:{display:"none"},children:"Not Good"})}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("button",{className:"announce-btn-submit",type:"submit",children:"Submit"}),Object(g.jsx)("button",{className:"announce-btn-reset",type:"reset",children:"Cancel"})]})]})]}),Object(g.jsx)(te,{})]})]})}var Ze=n(4),$e=n(179),et=n(180),tt=n.n(et),nt=n(191),at=n(391),ct=n(393),st=n(373),rt=n(134),it=n(390),ot=n(392),lt=n(389),jt=n(394),ut=n(377),bt=n(6);n(276),n(277);function dt(e){var t=e.announce,n=e.index,c=(Object(j.h)(),Object(a.useState)({})),s=Object(b.a)(c,2),r=(s[0],s[1]),i=Object(a.useState)(new Date(t.updatedAt)),u=Object(b.a)(i,2),v=u[0],f=(u[1],Object(a.useContext)(J).user),k="https://tdtu-social-nw-server.herokuapp.com/api",y=Object(a.useState)(!1),S=Object(b.a)(y,2),C=S[0],w=S[1],T=Object(a.useState)(!1),I=Object(b.a)(T,2),_=(I[0],I[1],function(){w(!1)}),E=Object(bt.a)(st.a)((function(e){var t,n=e.theme;return t={},Object(Ze.a)(t,"&.".concat(rt.a.head),{backgroundColor:n.palette.primary.light,color:n.palette.common.black}),Object(Ze.a)(t,"&.".concat(rt.a.body),{fontSize:14}),t})),F=Object(bt.a)(lt.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));Object(a.useEffect)((function(){var e=!0,n=function(){var n=Object(l.a)(o.a.mark((function n(){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,N.a.get(k+"/users?userId="+t.userId);case 2:a=n.sent,e&&r(a.data);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){return e=!1}}),[t.userId]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(d.a,{open:C,onClose:_,children:[Object(g.jsx)(h.a,{children:"Delete Confirmation"}),Object(g.jsx)(m.a,{children:Object(g.jsx)(O.a,{children:"Do you want to delete this announcement?"})}),Object(g.jsxs)(x.a,{children:[Object(g.jsx)(p.a,{onClick:function(){try{N.a.post(k+"/announcements/"+t._id,{userId:f._id})}catch(e){console.log(e)}},children:"Confirm"}),Object(g.jsx)(p.a,{onClick:_,children:"Cancel"})]})]}),Object(g.jsxs)(F,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(g.jsx)(E,{component:"th",scope:"row",children:n}),Object(g.jsx)(E,{sx:{maxWidth:150,maxHeight:20},component:"th",scope:"row",className:"announce-overflow",children:t.title}),Object(g.jsx)(E,{align:"left",children:t.type}),Object(g.jsx)(E,{align:"left",sx:{maxWidth:150},children:t.faculty}),Object(g.jsx)(E,{align:"left",children:v.toLocaleDateString("en-US")}),Object(g.jsx)(E,{align:"left",children:Object(Se.a)(v)}),Object(g.jsxs)(E,{align:"left",children:[Object(g.jsx)(p.a,{variant:"outlined",href:"/announcement/create/"+t._id,children:"Detail"}),Object(g.jsx)(p.a,{variant:"outlined",sx:{ml:1},color:"error",onClick:function(){w(!0)},children:"Delete"})]})]},t._id)]})}function ht(e){Object($e.a)(e);var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(!1),i=Object(b.a)(r,2),j=i[0],u=i[1],d=Object(a.useState)([]),h=Object(b.a)(d,2),m=h[0],O=h[1],x=Object(a.useContext)(J).user,v=Object(a.useState)(0),f=Object(b.a)(v,2),k=f[0],y=f[1],S=Object(a.useState)(5),C=Object(b.a)(S,2),w=C[0],T=C[1],I=Object(bt.a)(st.a)((function(e){var t,n=e.theme;return t={},Object(Ze.a)(t,"&.".concat(rt.a.head),{backgroundColor:n.palette.primary.light,color:n.palette.common.black}),Object(Ze.a)(t,"&.".concat(rt.a.body),{fontSize:14}),t})),_=(Object(bt.a)(lt.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://tdtu-social-nw-server.herokuapp.com/api/announcements/list/userId/"+x._id).then((function(e){200===e.status?(e.data.length>0&&(u(!0),O(e.data),console.log(e.data)),s(!0)):s(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());Object(a.useEffect)((function(){_()}),[x._id]);var E=0;return Object(g.jsxs)("div",{children:[Object(g.jsx)(ee,{}),Object(g.jsxs)("div",{className:"mainContainer",children:[Object(g.jsx)(ce,{}),Object(g.jsxs)("div",{className:"MA-container",children:[Object(g.jsx)("h1",{children:"My Announcements"}),Object(g.jsx)("div",{id:"add-announcement",children:Object(g.jsx)(p.a,{startIcon:Object(g.jsx)(tt.a,{}),variant:"outlined",children:Object(g.jsx)(H.b,{to:"/announcement/create",children:"Add an announcement"})})}),c?j?Object(g.jsxs)(it.a,{sx:{mt:3},component:nt.a,children:[Object(g.jsxs)(at.a,{sx:{minWidth:800},"aria-label":"simple table",children:[Object(g.jsx)(ot.a,{children:Object(g.jsxs)(lt.a,{children:[Object(g.jsx)(I,{align:"left",children:"#"}),Object(g.jsx)(I,{align:"left",children:"Title"}),Object(g.jsx)(I,{align:"left",children:"Type"}),Object(g.jsx)(I,{align:"left",children:"Faculty"}),Object(g.jsx)(I,{align:"left",children:"Update at"}),Object(g.jsx)(I,{align:"left",children:"Time"}),Object(g.jsx)(I,{align:"left"})]})}),Object(g.jsx)(ct.a,{children:(w>0?m.slice(k*w,k*w+w):m).map((function(e){return Object(g.jsx)(dt,{announce:e,index:E+=1},e._id)}))})]}),Object(g.jsx)(q.a,{}),Object(g.jsx)(jt.a,{children:Object(g.jsx)(ut.a,{rowsPerPageOptions:[5,10,25,100],component:"div",count:m.length,rowsPerPage:w,page:k,onPageChange:function(e,t){y(t)},onRowsPerPageChange:function(e){T(+e.target.value),y(0)}})})]}):Object(g.jsxs)("div",{className:"feed-end",children:[Object(g.jsx)(Re.a,{})," No more announcements "]}):Object(g.jsx)("div",{children:"error"})]}),Object(g.jsx)(te,{})]})]})}var mt=n(184);var Ot=function(){var e=localStorage.getItem("userToken"),t=Object(a.useContext)(J),n=t.user,c=t.dispatch,s=Object(a.useContext)(Z),r=(s.socket,s.dispatch),i=function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:"SIGNIN_START"}),t.prev=1,t.next=4,N.a.get("https://tdtu-social-nw-server.herokuapp.com/api/auth/user/"+e);case 4:n=t.sent,c({type:"SIGNIN_SUCCESS",payload:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),c({type:"SIGNIN_FAILURE",payload:t.t0});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){e&&i(),r({type:"SOCKET_SUCCESS",payload:Object(mt.a)("ws://https://tdtu-social-nw-server.herokuapp.com/")})}),[]),Object(g.jsx)(H.a,{children:Object(g.jsxs)(j.d,{children:[Object(g.jsx)(j.b,{path:"/",element:n?Object(g.jsx)(Le,{}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/signin",element:n?Object(g.jsx)(j.a,{to:"/"}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/announcement",element:n?Object(g.jsx)(se,{}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/announcement/:categoryId",element:n?Object(g.jsx)(se,{}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/announcement/create",element:n&&"faculty"===n.role?Object(g.jsx)(Xe,{}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/announcement/create/:announceId",element:n&&"faculty"===n.role?Object(g.jsx)(Xe,{}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/announcement/list",element:n&&"faculty"===n.role?Object(g.jsx)(ht,{}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/profile/:emailname",element:n?Object(g.jsx)(ze,{}):Object(g.jsx)(Be,{})}),Object(g.jsx)(j.b,{path:"/register",element:n&&"admin"===n.role?Object(g.jsx)(He,{}):Object(g.jsx)(j.a,{to:"/"})}),Object(g.jsx)(j.b,{path:"*",element:Object(g.jsx)(j.a,{to:"/"})})]})})};r.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(Ie,{children:Object(g.jsx)(Q,{children:Object(g.jsx)($,{children:Object(g.jsx)(Ot,{})})})})}),document.getElementById("root"))}},[[284,1,2]]]);
//# sourceMappingURL=main.68abb3b4.chunk.js.map