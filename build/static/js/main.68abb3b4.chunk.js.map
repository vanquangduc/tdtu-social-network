{"version":3,"sources":["components/Announcemnet/Announcements/Announcements.jsx","components/Announcemnet/Announcement.jsx","context/AuthReducer.js","context/AuthContext.js","context/SocketReducer.js","context/SocketContext.js","components/NavBar/Navbar.jsx","components/Rightbar/Rightbar.jsx","components/Sidebar/Sidebar.jsx","pages/Announcement.jsx","components/Profile/Profile.jsx","context/PostReducer.js","context/PostContext.js","components/Comment/Comments.jsx","components/Post/Post.jsx","components/Share/Share.jsx","components/Feed/Feed.jsx","pages/Home.jsx","pages/Profile.jsx","components/Signin/Signin.jsx","pages/SigninPage.jsx","pages/Register/Register.jsx","pages/CreateAnnouncement/CreateAnnouncement.jsx","components/Announcemnet/MyAnnouncement/MyAnnouncement.jsx","pages/MyAnnouncement/MyAnnouncement.jsx","App.js","index.js"],"names":["Announcements","announcement","useState","Date","createdAt","date","open","setOpen","handleClose","descriptionElementRef","useRef","useEffect","descriptionElement","current","focus","className","onClick","title","parse","text","faculty","toLocaleDateString","Dialog","onClose","scroll","maxWidth","fullWidth","DialogTitle","id","DialogContent","dividers","DialogContentText","ref","tabIndex","DialogActions","Button","Announcement","announceCategory","SV","process","announcements","setAnnouncements","display","setDisplay","page","setPage","totalPage","setTotalPage","categoryName","setCategoryName","category","name","fetchAnnouncement","a","axios","get","res","filter","c","data","Math","ceil","length","dp","slice","map","_id","Pagination","count","onChange","event","value","AuthReducer","state","action","type","user","isFetching","error","payload","initialState","AuthContext","createContext","AuthContextProvider","children","useReducer","dispatch","Provider","SocketReducer","socket","SocketContext","SocketContextProvider","Navbar","PF","useContext","anchorEl","setAnchorEl","anchorE2","setAnchorE2","anchorE3","setAnchorE3","openE1","Boolean","openE2","openE3","handleCloseE1","handleCloseE2","handleCloseE3","notification","setNotification","notificationLength","setNotificationLength","read","setRead","on","prev","to","Search","placeholder","Home","NotificationImportant","currentTarget","Person","Menu","PaperProps","elevation","sx","overflowY","mt","height","width","transformOrigin","horizontal","vertical","anchorOrigin","List","bgcolor","ListItemButton","alignItems","ListItemAvatar","Avatar","alt","src","ListItemText","primary","secondary","Typography","component","variant","color","Divider","Notifications","n","avatar","sendName","username","overflow","ml","mr","content","position","top","right","transform","zIndex","emailname","MenuItem","role","ListItemIcon","PersonAdd","fontSize","AddAlert","Settings","localStorage","clear","window","location","reload","Logout","Rightbar","onlineUsers","setOnlineUsers","allUsers","setAllUsers","onlineUsersInfo","setOnlineUsersInfo","fetchUser","emit","users","u","userId","some","o","Sidebar","sidebarItem","icon","faHome","faBell","faClock","faCalendarAlt","faClipboardList","faClipboardCheck","s","Profile","useParams","categoryId","userProfile","setUserProfile","openChangePassword","setOpenChangePassword","avtFile","setAvtFile","errorMessage","setErrorMessage","profileImage","avt","setAvt","major","setMajor","birthday","setDate","oldPassword","setOldPassword","newPassword","setNewPassword","rePassword","setRePassword","MenuProps","style","maxHeight","ITEM_HEIGHT","isActive","clickOpen","clickOpenChangePassword","clickCloseChangePassword","nameRef","setNameRef","classNameRef","setClassNameRef","editProfileHandler","e","preventDefault","userToUpdate","console","log","FormData","fileName","now","append","post","put","changePasswordHandler","password","code","background","Tooltip","IconButton","Edit","accept","reader","FileReader","onload","readyState","result","readAsDataURL","target","files","htmlFor","textAlign","margin","Box","m","autoComplete","TextField","required","label","defaultValue","FormControl","InputLabel","Select","labelId","LocalizationProvider","dateAdapter","AdapterDateFns","DatePicker","newValue","renderInput","params","email","PostReducer","posts","PostContext","PostContextProvider","Comments","comment","openDelConfirm","setOpenDelConfirm","handleCloseDelConfirm","userComment","setUserComment","isDeleted","setIsDeleted","deleteHandle","CircularProgress","format","undefined","MoreHoriz","MenuListProps","Post","openUpdatePost","setOpenUpdatePost","handleCloseUpdatePost","userPost","setUserPost","likes","setLikes","isLiked","setIsLiked","comments","setComments","setIsActive","includes","likeClickHandle","cmts","cmt","p","postText","setPostText","updateHandle","postToUpdate","updatedPost","fetchComment","sort","b","ps","object","index","findIndex","obj","JSON","stringify","loadCmtHanlde","commentRef","commentHandle","newCmt","postId","MoreVert","img","ThumbUpAlt","fill","document","getElementById","Comment","Replay","onSubmit","Send","Share","file","setFile","statusTextRef","submitHandle","newPost","getNewPost","Photo","htmlColor","Tag","AddReaction","Feed","isEnd","setIsEnd","fetchPosts","concat","handleScroll","bottom","innerHeight","scrollY","documentElement","scrollHeight","setTimeout","addEventListener","passive","removeEventListener","HomeFeed","ProfileFeed","CheckCircleOutline","scrollTo","Signin","toggle","setToggle","toggleBtnStd","setToggleBtnStd","toggleBtnOth","setToggleBtnOth","students","setStudents","others","setOthers","ggErrorMessage","setGgErrorMessage","emailnameRef","passwordRef","signInHandler","setItem","userToken","getItem","googleRespone","userData","profileObj","authId","googleId","size","clientId","buttonText","onSuccess","onFailure","cookiePolicy","SigninPage","Register","confirmPasswordRef","permissions","setPermissions","handleCheckbox","checked","handleRegister","confirmPassword","ArrowBack","CreateAnnouncement","announceId","useDropzone","acceptedFiles","getRootProps","getInputProps","setText","success","setSuccess","fail","setFail","titleRef","typeRef","facultyRef","setAnnouncement","fetchUserAnnounce","path","richText","editor","getData","handleSubmit","detail","NewAnnouncement","filesReq","push","err","status","handleUpdate","colspan","colSpan","ClassicEditor","selected","disabled","Alert","severity","UserAnnouncement","announce","updatedAt","StyledTableCell","styled","TableCell","theme","tableCellClasses","head","backgroundColor","palette","light","common","black","body","StyledTableRow","TableRow","hover","border","scope","align","href","MyAnnouncement","fetchOk","setFetchOk","haveAnnouncements","setHaveAnnouncments","rowsPerPage","setRowsPerPage","fetchAnnouncements","then","response","startIcon","TableContainer","Paper","Table","minWidth","TableHead","TableBody","TableFooter","TablePagination","rowsPerPageOptions","onPageChange","newPage","onRowsPerPageChange","App","socketDispatch","io","element","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.68abb3b4.chunk.js","sourcesContent":["import React from 'react'\r\nimport './Announcements.css'\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, Button } from '@mui/material';\r\nimport parse from 'html-react-parser'\r\n\r\nexport default function Announcements({announcement}) {\r\n\r\n    const [date, setDate] = useState(new Date(announcement.createdAt))\r\n    const [open, setOpen] = useState(false);\r\n    const handleClickOpen = () => () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n    const descriptionElementRef = useRef(null);\r\n    useEffect(() => {\r\n        if (open) {\r\n            const { current: descriptionElement } = descriptionElementRef;\r\n            if (descriptionElement !== null) {\r\n                descriptionElement.focus();\r\n            }\r\n        }\r\n    }, [open]);\r\n\r\n    return (\r\n        <div className=\"announcements\">\r\n            <ul className=\"announcements-list\">\r\n                <li className=\"announcements-list-item\" onClick={handleClickOpen()}>\r\n                    <div className=\"announcements-list-item-title\">{announcement.title}</div>\r\n                    <div className=\"announcements-list-item-text\">{parse(announcement.text)}</div>\r\n                    <div className=\"announcements-list-item-bottom\">\r\n                        <div className=\"announcements-list-item-faculty\">{announcement.faculty}</div>\r\n                        <div className=\"announcements-list-item-date\">{date.toLocaleDateString(\"en-US\")}</div>\r\n                    </div>  \r\n                </li>           \r\n            </ul>\r\n\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                scroll=\"paper\"\r\n                aria-labelledby=\"scroll-dialog-title\"\r\n                aria-describedby=\"scroll-dialog-description\"\r\n                maxWidth=\"lg\"\r\n                fullWidth\r\n            >\r\n                <DialogTitle id=\"scroll-dialog-title\">{announcement.title}</DialogTitle>\r\n                <DialogContent dividers={true}>\r\n                <div className='announcements-container'>\r\n                    <div className='announcements-sender'>{announcement.faculty} | {date.toLocaleDateString(\"en-US\")}</div>\r\n                    <DialogContentText\r\n                        id=\"scroll-dialog-description\"\r\n                        ref={descriptionElementRef}\r\n                        tabIndex={-1}\r\n                    >\r\n                        {parse(announcement.text)}\r\n                    </DialogContentText>\r\n                </div>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                <Button onClick={handleClose}>Đóng</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport Announcements from './Announcements/Announcements'\r\nimport {Pagination} from '@mui/material'\r\nimport './Announcement.css'\r\nimport axios from 'axios'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\n\r\nexport default function Announcement({announceCategory}) {\r\n    const SV = process.env.REACT_APP_SV_HOST;\r\n\r\n    const [announcements, setAnnouncements] = useState([])\r\n    const [display, setDisplay] = useState([])\r\n    const [page, setPage] = useState(1)\r\n    const [totalPage, setTotalPage] = useState(0)\r\n    const [categoryName, setCategoryName] = useState('')\r\n    const limit = 5\r\n    const category = [\r\n        {\r\n            id: \"cthhsv\",\r\n            name: \"Phòng Công tác học sinh sinh viên\",\r\n        },\r\n        {\r\n            id: \"ptc\",\r\n            name: \"Phòng tài chính\",\r\n        },\r\n        {\r\n            id: \"tdtclc\",\r\n            name: \"TDT Creative Language Center\",\r\n        },\r\n        {\r\n            id: \"ttth\",\r\n            name: \"Trung tâm tin học\",\r\n        },\r\n        {\r\n            id: \"ttdtptxh\",\r\n            name: \"Trung tâm đào tạo phát triển xã hội\",\r\n        },\r\n        {\r\n            id: \"ttptkh\",\r\n            name: \"Trung tâm phát triển Khoa học quản lý và Ứng dụng công nghệ\",\r\n        },\r\n        {\r\n            id: \"tthtdn\",\r\n            name: \"Trung tâm hợp tác doanh nghiệp và cựu sinh viên\",\r\n        },\r\n        {\r\n            id: \"kl\",\r\n            name: \"Khoa Luật\",\r\n        },\r\n        {\r\n            id: \"ttnn\",\r\n            name: \"Trung tâm ngoại ngữ - tin học - bồi dưỡng văn hóa\",\r\n        },\r\n        {\r\n            id: \"vcskt\",\r\n            name: \"Viện chính sách kinh tế và kinh doanh\",\r\n        },\r\n        {\r\n            id: \"kmtcn\",\r\n            name: \"Khoa Mỹ thuật công nghiệp\",\r\n        },\r\n        {\r\n            id: \"kddt\",\r\n            name: \"Khoa Điện - Điện tử\",\r\n        },\r\n        {\r\n            id: \"kcntt\",\r\n            name: \"Khoa Công nghệ thông tin\",\r\n        },\r\n        {\r\n            id: \"kqtkd\",\r\n            name: \"Khoa Quản trị kinh doanh\",\r\n        },\r\n        {\r\n            id: \"kmt\",\r\n            name: \"Khoa Môi trường và bảo hộ lao động\",\r\n        },\r\n        {\r\n            id: \"kldcd\",\r\n            name: \"Khoa Lao động công đoàn\",\r\n        },\r\n        {\r\n            id: \"ktcnn\",\r\n            name: \"Khoa Tài chính ngân hàng\",\r\n        },\r\n        {\r\n            id: \"kgdqt\",\r\n            name: \"Khoa giáo dục quốc tế\",\r\n        }\r\n    ]\r\n\r\n    const fetchAnnouncement = async () => {\r\n        try{\r\n            const res = announceCategory ? await axios.get(SV + '/announcements/' + announceCategory) : await axios.get(SV + '/announcements/')\r\n            announceCategory ? setCategoryName(category.filter(c => c.id == announceCategory)[0].name) : setCategoryName(\"Tất cả thông báo\")\r\n            setAnnouncements(res.data)\r\n        }\r\n        catch(err){\r\n\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchAnnouncement()\r\n        \r\n        \r\n    }, [announceCategory])\r\n\r\n    useEffect(() => {\r\n        setTotalPage(Math.ceil(announcements.length/limit))\r\n        const dp = announcements.slice((page - 1) * limit, page * limit)\r\n        setDisplay([...dp])\r\n\r\n    }, [page, announcements])\r\n\r\n\r\n    const pageHandle = (event, value) => {\r\n        setPage(value)\r\n    }\r\n\r\n    return (\r\n        <div className=\"announcement\">\r\n            \r\n            <div className=\"announcement-top\">\r\n                <div className=\"announcement-category\">\r\n                    {categoryName}\r\n                </div>\r\n            \r\n            </div>\r\n            <div className=\"announcement-bottom\">\r\n                {display.map(a => <Announcements key={a._id} announcement={a} />)}\r\n                \r\n                <Pagination count={totalPage} onChange={pageHandle} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","export const AuthReducer = (state, action) => {\r\n    switch(action.type){\r\n        case \"SIGNIN_START\":\r\n            return{\r\n                user: null,\r\n                isFetching: true,\r\n                error: false,\r\n            }\r\n        \r\n        case \"SIGNIN_SUCCESS\":\r\n            return{\r\n                user: action.payload,\r\n                isFetching: false,\r\n                error: false,\r\n            }\r\n            \r\n        case \"SIGNIN_FAILURE\":\r\n            return{\r\n                user: null,\r\n                isFetching: false,\r\n                error: action.payload,\r\n            }    \r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n","import { createContext, useReducer } from \"react\";\r\nimport { AuthReducer } from \"./AuthReducer\"\r\n\r\nconst initialState = {\r\n    user: null,\r\n    isFetching: false,\r\n    error: false\r\n}\r\n\r\nexport const AuthContext = createContext(initialState)\r\n\r\nexport const AuthContextProvider = ({children}) => {\r\n    const [state, dispatch] = useReducer(AuthReducer, initialState)\r\n\r\n    return (\r\n        <AuthContext.Provider value={{user: state.user, isFetching: state.isFetching, error: state.error, dispatch}}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    )\r\n}","export const SocketReducer = (state, action) => {\r\n    switch(action.type){\r\n        case \"SOCKET_START\":\r\n            return{\r\n                socket: null,\r\n                isFetching: true,\r\n                error: false,\r\n            }\r\n        \r\n        case \"SOCKET_SUCCESS\":\r\n            return{\r\n                socket: action.payload,\r\n                isFetching: false,\r\n                error: false,\r\n            }\r\n            \r\n        case \"SOCKET_FAILURE\":\r\n            return{\r\n                socket: null,\r\n                isFetching: false,\r\n                error: action.payload,\r\n            }    \r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n","import { createContext, useReducer } from \"react\";\r\nimport { SocketReducer } from \"./SocketReducer\";\r\n\r\nconst initialState = {\r\n    socket: null,\r\n    isFetching: false,\r\n    error: false\r\n}\r\n\r\nexport const SocketContext = createContext(initialState)\r\n\r\nexport const SocketContextProvider = ({children}) => {\r\n    const [state, dispatch] = useReducer(SocketReducer, initialState)\r\n\r\n    return (\r\n        <SocketContext.Provider value={{socket: state.socket, isFetching: state.isFetching, error: state.error, dispatch}}>\r\n            {children}\r\n        </SocketContext.Provider>\r\n    )\r\n}","import * as React from 'react'\r\nimport { useContext, useEffect } from 'react'\r\nimport {Search, Notifications, Person, Home, NotificationImportant, PersonAdd, Settings, Logout, AddAlert} from '@mui/icons-material'\r\nimport {Menu, MenuItem, Avatar, Divider, ListItemIcon, List, ListItemAvatar, ListItemText, Typography, ListItemButton} from '@mui/material'\r\nimport './Navbar.css'\r\nimport { Link } from 'react-router-dom'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { SocketContext } from '../../context/SocketContext'\r\nimport { useState } from 'react'\r\n\r\nexport default function Navbar() {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const { socket } = useContext(SocketContext)\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [anchorE2, setAnchorE2] = useState(null);\r\n    const [anchorE3, setAnchorE3] = useState(null);\r\n    const openE1 = Boolean(anchorEl);\r\n    const openE2 = Boolean(anchorE2);\r\n    const openE3 = Boolean(anchorE3);\r\n    const handleClickE1 = (event) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleCloseE1 = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleClickE2 = (event) => {\r\n        setAnchorE2(event.currentTarget);\r\n    };\r\n    const handleCloseE2 = () => {\r\n        setAnchorE2(null);\r\n    };\r\n\r\n    const handleClickE3 = (event) => {\r\n        setAnchorE3(event.currentTarget);\r\n        setRead(notificationLength)\r\n        setNotificationLength(0)\r\n    };\r\n    const handleCloseE3 = () => {\r\n        setAnchorE3(null);\r\n    };\r\n\r\n    const { user } = useContext(AuthContext)\r\n\r\n    const logoutHandler = () => {\r\n        localStorage.clear()\r\n        window.location.reload()\r\n    }\r\n\r\n    const [notification, setNotification] = useState([])\r\n    const [notificationLength, setNotificationLength] = useState(0)\r\n    const [read, setRead] = useState(0)\r\n\r\n    useEffect(() => {\r\n        socket.on('getAnnouncementNotification', (data) => {\r\n            setNotification(prev => [data, ...prev])\r\n        })\r\n    }, [socket])\r\n\r\n    useEffect(() => {\r\n        setNotificationLength(notification.length - read)\r\n    }, [notification])\r\n\r\n\r\n    return (\r\n        <div className=\"navbarContainer\">\r\n            <div className=\"navbar-left\">\r\n                <Link to=\"/\">\r\n                    <div className=\"logo\">TDTU</div>\r\n                </Link>\r\n                \r\n                <div className=\"navbar-search\">\r\n                    <Search className=\"navbar-search-icon\"/>\r\n                    <input placeholder=\"Tìm kiếm người dùng\" className=\"navbar-search-bar\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"navbar-center\">\r\n                <Link to=\"/\">\r\n                <div className=\"navbar-link\">\r\n                    <Home/>\r\n                    <div className=\"navbar-link-text\">Trang chủ</div>\r\n                </div>\r\n                </Link>\r\n                <Link to=\"/announcement\">\r\n                <div className=\"navbar-link\">\r\n                    <NotificationImportant/>\r\n                    <div className=\"navbar-link-text\">Thông báo</div>\r\n                </div>\r\n                </Link>\r\n            </div>\r\n            <div className=\"navbar-right\">\r\n                <div className=\"navbar-icons\">\r\n                    <div className=\"navbar-icons-item\" onClick={handleClickE1}>\r\n                        <Person className=\"navbar-icons-item-icon\"/>\r\n                        <span className=\"navbar-icons-item-badge\">1</span>\r\n                    </div>\r\n\r\n                    <Menu\r\n                        anchorEl={anchorEl}\r\n                        open={openE1}\r\n                        onClose={handleCloseE1}\r\n                        onClick={handleCloseE1}\r\n                        \r\n                        PaperProps={{\r\n                        elevation: 0,\r\n                        sx: {\r\n                            overflowY: 'scroll',\r\n                            filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n                            mt: 1.5,\r\n                            height: '90vh',\r\n                            width: '100%', \r\n                            maxWidth: 360,\r\n                        },\r\n                        }}\r\n                        transformOrigin={{ horizontal: 'center', vertical: 'top' }}\r\n                        anchorOrigin={{ horizontal: 'center', vertical: 'bottom' }}\r\n                    >\r\n                        <List sx={{  bgcolor: 'background.paper' }}>\r\n                        <ListItemButton alignItems=\"flex-start\">\r\n                            <ListItemAvatar>\r\n                            <Avatar alt=\"Remy Sharp\" src=\"/static/images/avatar/1.jpg\" />\r\n                            </ListItemAvatar>\r\n                            <ListItemText\r\n                            primary=\"Brunch this weekend?\"\r\n                            secondary={\r\n                                <React.Fragment>\r\n                                <Typography\r\n                                    sx={{ display: 'inline' }}\r\n                                    component=\"span\"\r\n                                    variant=\"body2\"\r\n                                    color=\"text.primary\"\r\n                                >\r\n                                    Ali Connors\r\n                                </Typography>\r\n                                {\" — I'll be in your neighborhood doing errands this…\"}\r\n                                </React.Fragment>\r\n                            }\r\n                            />\r\n                        </ListItemButton>\r\n                        <Divider variant=\"inset\" component=\"li\" />\r\n                        <ListItemButton alignItems=\"flex-start\">\r\n                            <ListItemAvatar>\r\n                            <Avatar alt=\"Travis Howard\" src=\"/static/images/avatar/2.jpg\" />\r\n                            </ListItemAvatar>\r\n                            <ListItemText\r\n                            primary=\"Summer BBQ\"\r\n                            secondary={\r\n                                <React.Fragment>\r\n                                <Typography\r\n                                    sx={{ display: 'inline' }}\r\n                                    component=\"span\"\r\n                                    variant=\"body2\"\r\n                                    color=\"text.primary\"\r\n                                >\r\n                                    to Scott, Alex, Jennifer\r\n                                </Typography>\r\n                                {\" — Wish I could come, but I'm out of town this…\"}\r\n                                </React.Fragment>\r\n                            }\r\n                            />\r\n                        </ListItemButton>\r\n                        <Divider variant=\"inset\" component=\"li\" />\r\n                        <ListItemButton alignItems=\"flex-start\">\r\n                            <ListItemAvatar>\r\n                            <Avatar alt=\"Cindy Baker\" src=\"/static/images/avatar/3.jpg\" />\r\n                            </ListItemAvatar>\r\n                            <ListItemText\r\n                            primary=\"Oui Oui\"\r\n                            secondary={\r\n                                <React.Fragment>\r\n                                <Typography\r\n                                    sx={{ display: 'inline' }}\r\n                                    component=\"span\"\r\n                                    variant=\"body2\"\r\n                                    color=\"text.primary\"\r\n                                >\r\n                                    Sandra Adams\r\n                                </Typography>\r\n                                {' — Do you have Paris recommendations? Have you ever…'}\r\n                                </React.Fragment>\r\n                            }\r\n                            />\r\n                        </ListItemButton>\r\n                        <Divider variant=\"inset\" component=\"li\" />\r\n                        <ListItemButton alignItems=\"flex-start\">\r\n                            <ListItemAvatar>\r\n                            <Avatar alt=\"Cindy Baker\" src=\"/static/images/avatar/3.jpg\" />\r\n                            </ListItemAvatar>\r\n                            <ListItemText\r\n                            primary=\"Oui Oui\"\r\n                            secondary={\r\n                                <React.Fragment>\r\n                                <Typography\r\n                                    sx={{ display: 'inline' }}\r\n                                    component=\"span\"\r\n                                    variant=\"body2\"\r\n                                    color=\"text.primary\"\r\n                                >\r\n                                    Sandra Adams\r\n                                </Typography>\r\n                                {' — Do you have Paris recommendations? Have you ever…'}\r\n                                </React.Fragment>\r\n                            }\r\n                            />\r\n                        </ListItemButton>\r\n                        </List>\r\n                    </Menu>\r\n\r\n                    <div className=\"navbar-icons-item\" onClick={handleClickE3}>\r\n                        <Notifications className=\"navbar-icons-item-icon\"/>\r\n                        {notificationLength === 0 ? null : <span className=\"navbar-icons-item-badge\">{notificationLength}</span>}\r\n                    </div>\r\n\r\n                    <Menu\r\n                        anchorEl={anchorE3}\r\n                        open={openE3}\r\n                        onClose={handleCloseE3}\r\n                        onClick={handleCloseE3}\r\n                        \r\n                        PaperProps={{\r\n                        elevation: 0,\r\n                        sx: {\r\n                            overflowY: 'scroll',\r\n                            filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n                            mt: 1.5,\r\n                            height: '90vh',\r\n                            width: '100%', \r\n                            maxWidth: 360,\r\n                        },\r\n                        }}\r\n                        transformOrigin={{ horizontal: 'center', vertical: 'top' }}\r\n                        anchorOrigin={{ horizontal: 'center', vertical: 'bottom' }}\r\n                    >\r\n                        <List sx={{  bgcolor: 'background.paper' }}>\r\n                        {notification.map(n => (\r\n                            <>\r\n                            <ListItemButton alignItems=\"flex-start\">\r\n                                <ListItemAvatar>\r\n                                <Avatar alt=\"Remy Sharp\" src={PF + n.avatar} />\r\n                                </ListItemAvatar>\r\n                                <ListItemText\r\n                                primary={n.sendName}\r\n                                secondary={\r\n                                    <React.Fragment>\r\n                                    <Typography\r\n                                        sx={{ display: 'inline' }}\r\n                                        component=\"span\"\r\n                                        variant=\"body2\"\r\n                                        color=\"text.primary\"\r\n                                    >\r\n                                       {n.category + ' — Vừa đăng một thông báo mới'}\r\n                                    </Typography>\r\n                                   \r\n                                    </React.Fragment>\r\n                                }\r\n                                />\r\n                            </ListItemButton>\r\n                            <Divider variant=\"inset\" component=\"li\" />                           \r\n                            </>\r\n                            \r\n                        ))}\r\n                        \r\n                        \r\n                        </List>\r\n                    </Menu>\r\n                </div>\r\n                <div className=\"navbar-user\" onClick={handleClickE2}>\r\n                    <div className=\"navbar-user-name\">{user.username}</div>\r\n                    <img src={PF+user.avatar} alt=\"\" className=\"navbar-avatar\" />\r\n                </div>\r\n                \r\n                <Menu\r\n                    anchorEl={anchorE2}\r\n                    open={openE2}\r\n                    onClose={handleCloseE2}\r\n                    onClick={handleCloseE2}\r\n                    className=\"navbar-user-menu\"\r\n                    PaperProps={{\r\n                    elevation: 0,\r\n                    sx: {\r\n                        overflow: 'visible',\r\n                        filter: 'drop-shadow(0px 2px 8px rgba(0,0,0,0.32))',\r\n                        mt: 1.5,\r\n                        '& .MuiAvatar-root': {\r\n                        width: 32,\r\n                        height: 32,\r\n                        ml: -0.5,\r\n                        mr: 1,\r\n                        },\r\n                        '&:before': {\r\n                        content: '\"\"',\r\n                        display: 'block',\r\n                        position: 'absolute',\r\n                        top: 0,\r\n                        right: 14,\r\n                        width: 10,\r\n                        height: 10,\r\n                        bgcolor: 'background.paper',\r\n                        transform: 'translateY(-50%) rotate(45deg)',\r\n                        zIndex: 0,\r\n                        },\r\n                    },\r\n                    }}\r\n                    transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n                    anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n                >\r\n                    <Link to={\"/profile/\" + user.emailname}>\r\n                        <MenuItem>\r\n                        <Avatar src={PF+user.avatar} /> Trang cá nhân\r\n                        </MenuItem>\r\n                    </Link>\r\n                    \r\n                    <Divider />\r\n                    {user.role === 'admin' \r\n                        ? <Link to=\"/register\">\r\n                            <MenuItem>\r\n                            <ListItemIcon>\r\n                                <PersonAdd fontSize=\"small\" />\r\n                            </ListItemIcon>\r\n                            Tạo tài khoản Phòng/Khoa\r\n                            </MenuItem>\r\n                        </Link> \r\n                        \r\n                        : user.role === 'faculty'\r\n                        ? <Link to=\"/announcement/list\">\r\n                            <MenuItem>\r\n                            <ListItemIcon>\r\n                            <AddAlert fontSize=\"small\" />\r\n                            </ListItemIcon>\r\n                            Quản lý thông báo\r\n                            </MenuItem>\r\n                        </Link>\r\n                        : null\r\n                    }\r\n                    \r\n                    <MenuItem>\r\n                    <ListItemIcon>\r\n                        <Settings fontSize=\"small\" />\r\n                    </ListItemIcon>\r\n                    Cài Đặt\r\n                    </MenuItem>\r\n                    \r\n                    <MenuItem onClick={logoutHandler} >\r\n                    <ListItemIcon>\r\n                        <Logout fontSize=\"small\" />\r\n                    </ListItemIcon>\r\n                    Đăng xuất\r\n                    </MenuItem>\r\n                \r\n                    \r\n                    \r\n                </Menu>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import './Rightbar.css'\r\nimport { useContext, useEffect, useRef, useState } from 'react'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport axios from 'axios'\r\nimport { SocketContext } from '../../context/SocketContext'\r\n\r\nexport default function Rightbar() {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const { user } = useContext(AuthContext)\r\n    const { socket } = useContext(SocketContext)\r\n    const [onlineUsers, setOnlineUsers] = useState([])\r\n    const [allUsers, setAllUsers] = useState([])\r\n    const [onlineUsersInfo, setOnlineUsersInfo] = useState([])\r\n\r\n    useEffect(() => {\r\n        const fetchUser = async () =>{\r\n            const res = await axios.get(SV + '/users/all')\r\n            setAllUsers(res.data)\r\n        }\r\n        fetchUser()\r\n\r\n        socket.emit('addUser', user._id)\r\n        socket.on('getUsers', users => {\r\n            setOnlineUsers(users.filter(u => u.userId !== user._id))\r\n        })\r\n    }, [user])\r\n\r\n    useEffect(() => {\r\n        setOnlineUsersInfo(allUsers.filter(a => onlineUsers.some(o => o.userId === a._id)))\r\n    }, [allUsers, onlineUsers])\r\n    \r\n\r\n    return (\r\n        <div className=\"rightbar\">\r\n            <div className=\"rightbar-title\">Trực tuyến ({onlineUsersInfo.length})</div>\r\n            <ul className=\"rightbar-online-list\">\r\n                {onlineUsersInfo.map(o => (\r\n                    <li className=\"rightbar-online-list-items\">\r\n                        <div className=\"rightbar-online-list-item-avatar\">\r\n                            <img src={PF+o.avatar} alt=\"\" />\r\n                            <span className=\"rightbar-online-tick\"></span>\r\n                        </div>\r\n                        <span className=\"rightbar-online-list-item-user\">{o.username}</span>\r\n                    </li>\r\n                ))}\r\n                \r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n","\r\nimport './Sidebar.css'\r\nimport { useContext } from 'react'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faBell, faCalendarAlt, faClipboardCheck, faClipboardList, faClock, faHome } from '@fortawesome/free-solid-svg-icons'\r\nimport { Link } from 'react-router-dom'\r\n\r\nexport default function Sidebar() {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const { user } = useContext(AuthContext)\r\n\r\n    const sidebarItem = [\r\n        {\r\n            name: \"Trang chủ\",\r\n            icon: <FontAwesomeIcon icon={faHome} className=\"font-awesome\" />\r\n        },\r\n        {\r\n            name: \"Thông báo\",\r\n            icon: <FontAwesomeIcon icon={faBell} className=\"font-awesome\" />\r\n        },\r\n        {\r\n            name: \"Thời khóa biểu\",\r\n            icon: <FontAwesomeIcon icon={faClock} className=\"font-awesome\" />\r\n        },\r\n        {\r\n            name: \"Lịch thi\",\r\n            icon: <FontAwesomeIcon icon={faCalendarAlt} className=\"font-awesome\" />\r\n        },\r\n        {\r\n            name: \"Điểm thi\",\r\n            icon: <FontAwesomeIcon icon={faClipboardList} className=\"font-awesome\" />\r\n        },\r\n        {\r\n            name: \"Điểm rèn luyện\",\r\n            icon: <FontAwesomeIcon icon={faClipboardCheck} className=\"font-awesome\" />\r\n        },\r\n    ]\r\n\r\n    const category = [\r\n        {\r\n            id: \"cthhsv\",\r\n            name: \"Phòng Công tác học sinh sinh viên\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"ptc\",\r\n            name: \"Phòng tài chính\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"tdtclc\",\r\n            name: \"TDT Creative Language Center\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"ttth\",\r\n            name: \"Trung tâm tin học\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"ttdtptxh\",\r\n            name: \"Trung tâm đào tạo phát triển xã hội\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"ttptkh\",\r\n            name: \"Trung tâm phát triển Khoa học quản lý và Ứng dụng công nghệ\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"tthtdn\",\r\n            name: \"Trung tâm hợp tác doanh nghiệp và cựu sinh viên\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kl\",\r\n            name: \"Khoa Luật\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"ttnn\",\r\n            name: \"Trung tâm ngoại ngữ - tin học - bồi dưỡng văn hóa\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"vcskt\",\r\n            name: \"Viện chính sách kinh tế và kinh doanh\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kmtcn\",\r\n            name: \"Khoa Mỹ thuật công nghiệp\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kddt\",\r\n            name: \"Khoa Điện - Điện tử\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kcntt\",\r\n            name: \"Khoa Công nghệ thông tin\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kqtkd\",\r\n            name: \"Khoa Quản trị kinh doanh\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kmt\",\r\n            name: \"Khoa Môi trường và bảo hộ lao động\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kldcd\",\r\n            name: \"Khoa Lao động công đoàn\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"ktcnn\",\r\n            name: \"Khoa Tài chính ngân hàng\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        },\r\n        {\r\n            id: \"kgdqt\",\r\n            name: \"Khoa giáo dục quốc tế\",\r\n            avatar: PF+\"avatar/noAvatar.jpg\" \r\n        }\r\n    ]\r\n\r\n    return (\r\n        <div className=\"sidebar\">\r\n            <div className=\"sidebar-items\">\r\n                <div className=\"sidebar-user\"> \r\n                    <img src={PF+user.avatar} alt=\"\" className=\"sidebar-user-avatar\" />\r\n                    <div className=\"sidebar-user-name\">{user.username}</div>\r\n                </div>\r\n                <ul className=\"sidebar-list\">\r\n                    {sidebarItem.map(s => (\r\n                        <li className=\"sidebar-list-item\">\r\n                        {s.icon}\r\n                        <span className=\"sidebar-list-item-text\">{s.name}</span>\r\n                    </li>\r\n                    ))}\r\n                </ul>\r\n                <hr className=\"sidebar-line\" />\r\n                <div className=\"sidebar-title\">Lối tắt (Thông báo)</div>\r\n                <ul className=\"sidebar-group\">\r\n                    {category.map(c => (\r\n                        <Link to={\"/announcement/\"+c.id}>\r\n                            <li className=\"sidebar-group-item\">\r\n                                <img src={c.avatar} alt=\"\" className=\"sidebar-group-item-avatar\" />\r\n                                <span className=\"sidebar-group-item-user\">{c.name}</span>\r\n                            </li>\r\n                        </Link>\r\n                        \r\n                    ))}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { useParams } from \"react-router-dom\"\r\nimport Announcement from \"../components/Announcemnet/Announcement\"\r\nimport Navbar from \"../components/NavBar/Navbar\"\r\nimport Rightbar from \"../components/Rightbar/Rightbar\"\r\nimport Sidebar from \"../components/Sidebar/Sidebar\"\r\n\r\nexport default function Profile() {\r\n    const announceCategory = useParams().categoryId\r\n    return (\r\n        <div>\r\n            <Navbar/>\r\n            <div className=\"mainContainer\">\r\n                <Sidebar/>\r\n                <Announcement announceCategory={announceCategory} />\r\n                <Rightbar/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import * as React from 'react'\r\nimport {useState, useEffect, useRef, useContext} from 'react'\r\nimport './Profile.css'\r\nimport axios from 'axios'\r\n\r\n// Dialog\r\nimport {Edit} from '@mui/icons-material';\r\nimport {Avatar, Button, TextField, Dialog,\r\n    IconButton, DialogActions,DialogContent,DialogContentText,\r\n    DialogTitle,Tooltip,Box, InputLabel, MenuItem, FormControl, \r\n    Select,} from '@mui/material/'\r\n\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport DatePicker from '@mui/lab/DatePicker';\r\nimport { AuthContext } from '../../context/AuthContext';\r\n\r\nexport default function Profile({emailname}) {\r\n\r\n    const {user, dispatch} = useContext(AuthContext)\r\n\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n    const [userProfile, setUserProfile] = useState({})\r\n    const [open, setOpen] = useState(false)\r\n    const [openChangePassword, setOpenChangePassword] = useState(false)\r\n    const [avtFile, setAvtFile] = useState(null)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n    const [avt, setAvt] = useState({ profileImage:PF+userProfile.avatar})\r\n    const [major, setMajor] = useState(user.major)\r\n    const [date, setDate] = useState(new Date(user.birthday))\r\n    const [oldPassword, setOldPassword] = useState('')\r\n    const [newPassword, setNewPassword] = useState('')\r\n    const [rePassword, setRePassword] = useState('')\r\n\r\n    const {profileImage} = avt\r\n\r\n    const ITEM_HEIGHT = 48;\r\n    const ITEM_PADDING_TOP = 8;\r\n\r\n    const MenuProps = {\r\n        PaperProps: {\r\n          style: {\r\n            maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\r\n            width: 300,\r\n          },\r\n        },\r\n    };\r\n\r\n    useEffect(() => {\r\n        let isActive = true\r\n        const fetchUser = async () => {\r\n            const res = await axios.get(process.env.REACT_APP_SV_HOST + '/users?emailname=' + emailname)\r\n            if (isActive) {\r\n                setUserProfile(res.data)\r\n            }\r\n        }\r\n        fetchUser()\r\n        return () => isActive = false\r\n    }, [emailname])\r\n    \r\n\r\n    const clickOpen = () => {\r\n        setOpen(true)\r\n        setAvt({profileImage: PF+userProfile.avatar})\r\n    }\r\n    const clickClose = () => {\r\n        setOpen(false)\r\n        setAvt({profileImage: PF+userProfile.avatar})\r\n    }\r\n\r\n    const clickOpenChangePassword = () => {\r\n        setOpenChangePassword(true)\r\n    }\r\n    const clickCloseChangePassword = () => {\r\n        setOpenChangePassword(false)\r\n    }\r\n\r\n    const fileSelected = event => {\r\n        console.log(event.target.files[0]);\r\n    }\r\n\r\n    const imageHandler = event => {\r\n        const reader = new FileReader()\r\n\r\n        reader.onload = () => {\r\n            if(reader.readyState === 2){\r\n                setAvt({profileImage: reader.result})\r\n                console.log(reader.result)\r\n            }\r\n        }\r\n        reader.readAsDataURL(event.target.files[0])\r\n        setAvtFile(event.target.files[0])\r\n    }\r\n\r\n    const handleChangeMajor = (event) => {\r\n        setMajor(event.target.value);\r\n    };\r\n\r\n\r\n    const [nameRef, setNameRef] = useState(user.username)\r\n    const [classNameRef, setClassNameRef] = useState(user.className)\r\n\r\n    const editProfileHandler = async (e) => {\r\n        e.preventDefault()\r\n        const userToUpdate = user\r\n\r\n        if(nameRef === \"\" || nameRef === null){\r\n            setErrorMessage(\"Name can not be empty\")\r\n            console.log(errorMessage)\r\n            return false\r\n        }\r\n        else{\r\n            if(avtFile){\r\n                const data = new FormData()\r\n                const fileName = Date.now() + \"_\" + avtFile.name\r\n                data.append(\"name\", fileName)\r\n                data.append(\"file\", avtFile)\r\n                userToUpdate.avatar = \"avatar/\" + fileName\r\n                try{\r\n                    await axios.post(SV + \"/upload/avatar\", data)\r\n                }\r\n                catch(err){\r\n                    console.log(err)\r\n                }\r\n            }\r\n    \r\n            userToUpdate.username = nameRef\r\n            userToUpdate.className = classNameRef\r\n            userToUpdate.major = major\r\n            userToUpdate.birthday = date.toLocaleDateString(\"en-US\")\r\n    \r\n            try{\r\n                await axios.put(SV + \"/users/\" + user._id, userToUpdate)\r\n                dispatch({type: \"SIGNIN_SUCCESS\", payload: userToUpdate})\r\n            }\r\n            catch(err){\r\n                console.log(err)\r\n            }\r\n        }\r\n       \r\n        \r\n    }\r\n\r\n    const changePasswordHandler = async (e) => {\r\n        e.preventDefault()\r\n        const userToUpdate = user\r\n\r\n        if(oldPassword === \"\" || oldPassword === null){\r\n            setErrorMessage(\"Old password can not be empty\")\r\n            console.log(errorMessage)\r\n            return false\r\n        }\r\n        if(newPassword === \"\" || newPassword === null){\r\n            setErrorMessage(\"New password can not be empty\")\r\n            console.log(errorMessage)\r\n            return false\r\n        }\r\n        if(rePassword === \"\" || rePassword === null){\r\n            setErrorMessage(\"Re password can not be empty\")\r\n            console.log(errorMessage)\r\n            return false\r\n        }\r\n        if(oldPassword === newPassword){\r\n            setErrorMessage(\"Mật khẩu mới trùng với mật khẩu cũ\")\r\n            console.log(errorMessage)\r\n            return false\r\n        }\r\n        if(rePassword !== newPassword){\r\n            setErrorMessage(\"Xác nhận mật khẩu không chính xác\")\r\n            console.log(errorMessage)\r\n            return false\r\n        }\r\n        \r\n        userToUpdate.password = oldPassword\r\n\r\n        try{\r\n            const comparePassword = await axios.post(SV + \"/users/compare/\" + user._id, userToUpdate)\r\n            if(comparePassword.data.code === 'success'){\r\n                userToUpdate.password = newPassword\r\n                const result = await axios.put(SV + \"/users/\" + user._id, userToUpdate)\r\n                if(result.data.code === 'success'){\r\n                    clickCloseChangePassword()\r\n                    setErrorMessage(\"\")\r\n                }\r\n            }\r\n            else{\r\n                setErrorMessage(\"Mật khẩu cũ không chính xác\")\r\n                console.log(errorMessage)\r\n            }\r\n            \r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"profile\">\r\n                <div className=\"profile-cover\">\r\n                    <img src={PF+userProfile.background} alt=\"\" className=\"profile-cover-background\" />\r\n                    <img src={PF+userProfile.avatar} alt=\"\" className=\"profile-cover-avatar\" />\r\n                </div>\r\n                <div className=\"profile-user\">\r\n                    <div className=\"profile-user-name\">\r\n                        {user.emailname === emailname\r\n                        ? <>\r\n                        <div className=\"profile-user-name-box\">t</div>\r\n                        <h2 >{userProfile.username}</h2>\r\n                        <Tooltip title=\"Click to update profile\">\r\n                            <IconButton onClick={clickOpen}>\r\n                                <Edit fontSize=\"small\" />\r\n                            </IconButton>\r\n                        </Tooltip>\r\n                        </>\r\n                        : <h2 >{userProfile.username}</h2>\r\n                        }\r\n                        \r\n                    </div>\r\n                    \r\n                    <Dialog open={open} onClose={clickOpen}>\r\n                        <DialogTitle>Cập nhật thông tin</DialogTitle>\r\n                            <div className='profile-avatar-upload'>\r\n                            <input accept=\"image/*\" id=\"icon-button-file\" type=\"file\" style={{ display: 'none' }} onChange={imageHandler} />\r\n                            <label htmlFor=\"icon-button-file\" style={{  textAlign: 'center' }}>\r\n                                <IconButton component=\"span\" >\r\n                                    <Avatar\r\n                                        src={profileImage} \r\n                                        style={{ margin: \"10px\", width: \"200px\", height: \"200px\",}} \r\n                                    />\r\n                                </IconButton>\r\n                            </label>\r\n                            </div>\r\n                            \r\n                            <DialogContent>\r\n                                <Box\r\n                                component=\"form\"\r\n                                sx={{\r\n                                    '& .MuiTextField-root': { m: 2, width: '25ch' },\r\n                                }}\r\n                                autoComplete=\"off\"\r\n                                >\r\n                                    <div>\r\n                                        <TextField required id=\"outlined-required\" label=\"Tên\" defaultValue={user.username} onChange={(e) => setNameRef(e.target.value)} />\r\n                                        <TextField id=\"outlined-required\" label=\"Lớp\" defaultValue={user.className}onChange={(e) => setClassNameRef(e.target.value)} />\r\n                                        <FormControl sx={{m: 2, width: '25ch'}}>\r\n                                            <InputLabel id=\"demo-simple-select-label\">Khoa</InputLabel>\r\n                                                <Select\r\n                                                labelId=\"demo-simple-select-label\"\r\n                                                id=\"demo-simple-select\"\r\n                                                value={major}\r\n                                                label=\"Khoa\"\r\n                                                onChange={handleChangeMajor}\r\n                                                defaultValue={major}\r\n                                                MenuProps={MenuProps}\r\n                                                >\r\n                                                    <MenuItem value={'CNTT'}>CNTT</MenuItem>\r\n                                                    <MenuItem value={'duoc'}>Dược</MenuItem>\r\n                                                    <MenuItem value={'dientu'}>Điện - điện tử</MenuItem>\r\n                                                    <MenuItem value={'giaoducquocte'}>Giáo dục quốc tế</MenuItem>\r\n                                                    <MenuItem value={'ketoan'}>Kế toán</MenuItem>\r\n                                                    <MenuItem value={'khthethao'}>Khoa học thể thao</MenuItem>\r\n                                                    <MenuItem value={'khungdung'}>Khoa học ứng dụng</MenuItem>\r\n                                                    <MenuItem value={'khxhvnv'}>Khoa học xã hội và nhân văn</MenuItem>\r\n                                                    <MenuItem value={'kythuatcongtrinh'}>Kỹ thuật công trình</MenuItem>\r\n                                                    <MenuItem value={'laodongvacongdoan'}>Lao động và công đoàn</MenuItem>\r\n                                                    <MenuItem value={'luat'}>Luật</MenuItem>\r\n                                                    <MenuItem value={'moitruong'}>Môi trường và bảo hộ lao động</MenuItem>\r\n                                                    <MenuItem value={'mythuat'}>Mỹ thuật công nghiệp</MenuItem>\r\n                                                    <MenuItem value={'ngoaingu'}>Ngoại ngữ</MenuItem>\r\n                                                    <MenuItem value={'qtkd'}>Quản trị kinh doanh</MenuItem>\r\n                                                    <MenuItem value={'tcnh'}>Tài chính - ngân hàng</MenuItem>\r\n                                                    <MenuItem value={'toanthongke'}>Toán - thống kê</MenuItem>\r\n                                                </Select>\r\n                                        </FormControl>\r\n                                        <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n                                            <DatePicker\r\n                                                label=\"Ngày/Tháng/Năm sinh\"\r\n                                                value={date}\r\n                                                defaultValue={date}\r\n                                                onChange={(newValue) => {\r\n                                                setDate(newValue);\r\n                                                }}\r\n                                                renderInput={(params) => <TextField {...params} />}\r\n                                            />\r\n                                        </LocalizationProvider>\r\n                                    </div>\r\n                                </Box>\r\n                            </DialogContent>\r\n                            <DialogActions>\r\n                                <Button onClick={editProfileHandler} type='submit'>Cập nhật</Button>\r\n                                <Button onClick={clickClose} >Hủy</Button>\r\n                            </DialogActions>\r\n                        </Dialog>\r\n\r\n\r\n                    <Dialog open={openChangePassword} onClose={clickOpenChangePassword}>\r\n                        <DialogTitle>Đổi mật khẩu</DialogTitle>\r\n                        \r\n                        <DialogContent>\r\n                            <Box\r\n                            component=\"form\"\r\n                            sx={{\r\n                                '& .MuiTextField-root': { m: 2, width: '100%', maxWidth: '57ch'},\r\n                            }}\r\n                            autoComplete=\"off\"\r\n                            >\r\n                                <div>\r\n                                    <TextField type=\"password\" required id=\"outlined-password-input\" label=\"Mật khẩu hiện tại\" onChange={(e) => setOldPassword(e.target.value)} />\r\n                                    <TextField type=\"password\" required id=\"outlined-password-input\" label=\"Mật khẩu mới\" onChange={(e) => setNewPassword(e.target.value)} />\r\n                                    <TextField type=\"password\" required id=\"outlined-password-input\" label=\"Nhập lại mật khẩu mới\" onChange={(e) => setRePassword(e.target.value)} />\r\n                                    <div className='change-password-message'>{errorMessage!=\"\" ? errorMessage : \"\"}</div>\r\n                                </div>\r\n                            </Box>\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button onClick={changePasswordHandler} type='submit'>Cập nhật</Button>\r\n                            <Button onClick={clickCloseChangePassword} >Hủy</Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n                    <div className=\"profile-user-email\">{userProfile.email}</div>\r\n                </div>\r\n                <div className=\"profile-info\">\r\n                    <div className=\"profile-info-left\">\r\n                        <div className=\"profile-info-text\">Khoa: {userProfile.major ? userProfile.major : \"Không xác định\"}</div>\r\n                        <div className=\"profile-info-text\">Lớp: {userProfile.className ? userProfile.className : \"Không xác định\"}</div>\r\n                    </div>\r\n                    <div className=\"profile-info-right\">\r\n                        <div className=\"profile-info-text\">Ngày sinh: {userProfile.birthday ? userProfile.birthday : \"Không xác định\"}</div>\r\n                        {(user.role != \"student\") && (user.emailname === emailname) ? <div className=\"profile-info-text pw\" onClick={clickOpenChangePassword}>Đổi mật khẩu </div> : null}\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n                           \r\n                            \r\n                    ","export const PostReducer = (state, action) => {\r\n    switch(action.type){\r\n        case \"POST_START\":\r\n            return{\r\n                posts: [],\r\n                isFetching: true,\r\n                error: false,\r\n            }\r\n        \r\n        case \"POST_SUCCESS\":\r\n            return{\r\n                posts: action.payload,\r\n                isFetching: false,\r\n                error: false,\r\n            }\r\n            \r\n        case \"POST_FAILURE\":\r\n            return{\r\n                posts: [],\r\n                isFetching: false,\r\n                error: action.payload,\r\n            }    \r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n","import { createContext, useReducer } from \"react\";\r\nimport { PostReducer } from \"./PostReducer\";\r\n\r\nconst initialState = {\r\n    posts: [],\r\n    isFetching: false,\r\n    error: false\r\n}\r\n\r\nexport const PostContext = createContext(initialState)\r\n\r\nexport const PostContextProvider = ({children}) => {\r\n    const [state, dispatch] = useReducer(PostReducer, initialState)\r\n\r\n    return (\r\n        <PostContext.Provider value={{posts: state.posts, isFetching: state.isFetching, error: state.error, dispatch}}>\r\n            {children}\r\n        </PostContext.Provider>\r\n    )\r\n}","import './Comments.css'\r\nimport { MoreHoriz, Settings } from '@mui/icons-material'\r\nimport { IconButton, MenuItem, Menu, ListItemIcon, Divider, CircularProgress, Dialog, DialogActions, DialogContent, DialogTitle, DialogContentText, Button } from '@mui/material'\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport axios from 'axios';\r\nimport { format } from 'timeago.js'\r\n\r\nexport default function Comments({ comment }) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const { user } = useContext(AuthContext)\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const [openDelConfirm, setOpenDelConfirm] = useState(false);\r\n    const handleClickOpenDelConfirm = () => {\r\n        setOpenDelConfirm(true);\r\n    };\r\n    \r\n    const handleCloseDelConfirm = () => {\r\n        setOpenDelConfirm(false);\r\n    };\r\n\r\n    const [userComment, setUserComment] = useState({})\r\n    const [isDeleted, setIsDeleted] = useState(false)\r\n\r\n    useEffect(() => {\r\n        let isActive = true\r\n        const fetchUser = async () => {\r\n            const res = await axios.get(SV + '/users?userId=' + comment.userId)\r\n            if (isActive) {\r\n                setUserComment(res.data)\r\n            }\r\n        }\r\n        fetchUser()\r\n        return () => isActive = false\r\n    }, [comment.userId])\r\n\r\n\r\n    const deleteHandle = async () => {\r\n        try{\r\n            await axios.post(SV + '/comments/' + comment._id, {userId: user._id})\r\n            setIsDeleted(true)\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"comment-container\">\r\n            {!isDeleted \r\n            ? \r\n            <div className=\"comment\">\r\n                    \r\n                    <div className=\"comment-left\">\r\n                        {userComment.avatar ? <img src={PF+userComment.avatar} alt=\"\" className=\"comment-avatar\" /> : <CircularProgress />}\r\n                    </div>\r\n                    <div className=\"comment-center\">\r\n                        <div className=\"comment-name\">\r\n                            {userComment.username}\r\n                            <p className=\"comment-time\">{format(comment.createdAt)}</p>\r\n                        </div>\r\n                        <div className=\"comment-text\">{comment.text}</div>\r\n                    </div>\r\n                    <div className=\"comment-right\">\r\n                    <IconButton\r\n                        aria-label=\"more\"\r\n                        id=\"long-button\"\r\n                        aria-controls=\"long-menu\"\r\n                        aria-expanded={open ? 'true' : undefined}\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleClick}\r\n                    >\r\n                        <MoreHoriz />\r\n                    </IconButton>\r\n                    \r\n                    <Dialog open={openDelConfirm} onClose={handleCloseDelConfirm}>\r\n                        <DialogTitle>Delete Confirmation</DialogTitle>\r\n                        <DialogContent>\r\n                            <DialogContentText>\r\n                                Do you want to delete this post?\r\n                            </DialogContentText>\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button onClick={deleteHandle}>Confirm</Button>\r\n                            <Button onClick={handleCloseDelConfirm}>Cancel</Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n                    \r\n                    <Menu\r\n                        id=\"long-menu\"\r\n                        MenuListProps={{\r\n                        'aria-labelledby': 'long-button',\r\n                        }}\r\n                        anchorEl={anchorEl}\r\n                        open={open}\r\n                        onClose={handleClose}\r\n                        onClick={handleClose}\r\n                        PaperProps={{\r\n                        style: {\r\n                            maxHeight: 60 * 4.5,\r\n                            width: '30ch',\r\n                        },\r\n                        }}\r\n                        transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n                        anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n                    >\r\n                        {user._id === comment.userId \r\n                        ?\r\n                        <MenuItem onClick={handleClickOpenDelConfirm}>\r\n                        <ListItemIcon>\r\n                            <Settings fontSize=\"small\" />\r\n                        </ListItemIcon>\r\n                        Delete comment\r\n                        </MenuItem>     \r\n                        : null\r\n                        }\r\n                        \r\n                        {user._id === comment.userId \r\n                        ?\r\n                        <MenuItem>\r\n                        <ListItemIcon>\r\n                            <Settings fontSize=\"small\" />\r\n                        </ListItemIcon>\r\n                        Edit comment\r\n                        </MenuItem>\r\n                        \r\n                        : null\r\n                        }\r\n                        <MenuItem>\r\n                        <ListItemIcon>\r\n                            <Settings fontSize=\"small\" />\r\n                        </ListItemIcon>\r\n                        Report\r\n                        </MenuItem>\r\n\r\n                    </Menu>\r\n                    </div>\r\n                </div>\r\n            : \r\n            <div className='comment'>\r\n                <div className=\"comment-left\">\r\n                    <div className='comment-temp'>t</div>\r\n                </div>\r\n                <div className='comment-deleted'>This comment has been deleted</div>\r\n                <div className='comment-right'>\r\n                    <div className='comment-temp'>t</div>\r\n                </div>\r\n            </div>\r\n\r\n            }\r\n                \r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import * as React from 'react'\r\nimport { MoreVert, ThumbUpAlt, Comment, Settings, Send, Replay} from '@mui/icons-material'\r\nimport { IconButton, MenuItem, Menu, ListItemIcon, Box, CircularProgress, Dialog, DialogActions, DialogContent, DialogTitle, DialogContentText, Button, TextField} from '@mui/material'\r\nimport './Post.css'\r\nimport { useState, useEffect, useContext, useRef } from \"react\";\r\nimport axios from 'axios'\r\nimport { Link } from 'react-router-dom';\r\nimport { AuthContext } from '../../context/AuthContext';\r\nimport { format } from 'timeago.js'\r\nimport { PostContext } from '../../context/PostContext';\r\nimport Comments from '../Comment/Comments'\r\n\r\n\r\nexport default function Post({ post }) {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const { user } = useContext(AuthContext)\r\n    const { posts, dispatch } = useContext(PostContext)\r\n\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const open = Boolean(anchorEl);\r\n    const handleClick = (event) => {\r\n      setAnchorEl(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n      setAnchorEl(null);\r\n    };\r\n\r\n    const [openDelConfirm, setOpenDelConfirm] = useState(false);\r\n    const handleClickOpenDelConfirm = () => {\r\n        setOpenDelConfirm(true);\r\n    };\r\n    \r\n    const handleCloseDelConfirm = () => {\r\n        setOpenDelConfirm(false);\r\n    };\r\n\r\n    const [openUpdatePost, setOpenUpdatePost] = useState(false);\r\n    const handleClickOpenUpdatePost = () => {\r\n        setOpenUpdatePost(true);\r\n    };\r\n    \r\n    const handleCloseUpdatePost = () => {\r\n        setOpenUpdatePost(false);\r\n    };\r\n\r\n    const [userPost, setUserPost] = useState({})\r\n    const [likes, setLikes] = useState(0)\r\n    const [isLiked, setIsLiked] = useState(false)\r\n    const [comments, setComments] = useState([])\r\n    const [page, setPage] = useState(0)\r\n    const [isActive, setIsActive] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setIsLiked(post.likes.includes(user._id))\r\n    }, [user._id, post.likes])\r\n\r\n    useEffect(() => {\r\n        let isActive = true\r\n        const fetchUser = async () => {\r\n            const res = await axios.get(SV + '/users?userId=' + post.userId)\r\n            if (isActive) {\r\n                setUserPost(res.data)\r\n                setLikes(post.likes.length)\r\n            }\r\n        }\r\n        fetchUser()\r\n        return () => isActive = false\r\n    }, [post.userId])\r\n\r\n\r\n    const likeClickHandle = async () => {\r\n        try{\r\n            await axios.put(SV + '/posts/' + post._id + '/like', {userId: user._id})\r\n        }\r\n        catch(err){\r\n\r\n        }\r\n        setLikes(!isLiked ? likes + 1 : likes - 1)\r\n        setIsLiked(!isLiked)\r\n    }\r\n\r\n    const deleteHandle = async () => {\r\n        try{\r\n            const cmts = await axios.get(SV + '/comments/' + post._id)\r\n            console.log(cmts.data)\r\n            cmts.data.map(async (cmt) => {\r\n                const user = await axios.get(SV + '/users?userId=' + cmt.userId)\r\n                \r\n                await axios.post(SV + '/comments/' + cmt._id, {userId: user.data._id})\r\n            })\r\n            await axios.post(SV + '/posts/' + post._id, {userId: user._id})\r\n            dispatch({type: \"POST_SUCCESS\", payload: posts.filter(p => p._id !== post._id)})\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    const [postText, setPostText] = useState(\"\")\r\n    const updateHandle = async () => {\r\n        try{   \r\n            const postToUpdate = post\r\n            \r\n            postToUpdate.text = postText\r\n            \r\n            const updatedPost = await axios.put(SV + '/posts/' + post._id, postToUpdate)\r\n            console.log(updatedPost.data)\r\n            const payload = posts.map(p => {\r\n                if(p._id === updatedPost.data._id){\r\n                    return updatedPost.data\r\n                }\r\n                else return p\r\n            })\r\n            console.log(payload)\r\n            dispatch({type: \"POST_SUCCESS\", payload: payload})\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n    \r\n\r\n    const fetchComment = async () => {\r\n        if(page === 0){\r\n            return () => console.log('No cmts')\r\n        }\r\n        try{\r\n            const res = await axios.get(SV + '/comments/pid/' + post._id + '/page/' + page)\r\n            res.data.sort((a, b) => a.createdAt - b.createdAt ? 1 : -1)\r\n            const ps = [ ...res.data, ...comments]\r\n            const payload = ps.filter((object,index) => index === ps.findIndex(obj => JSON.stringify(obj) === JSON.stringify(object)))\r\n            setComments(payload)\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        fetchComment()\r\n    }, [page])\r\n\r\n    const loadCmtHanlde = () => {\r\n        if(comments.length < post.comments.length || comments.length > post.comments.length){\r\n            setPage(page + 1)\r\n        }\r\n    }\r\n    const reloadCmtHanlde = () => {\r\n        if(page > 1){\r\n            setComments([])\r\n            setPage(1)\r\n        }\r\n        else if(page === 1){\r\n            setComments([])\r\n            fetchComment()\r\n        }\r\n    }\r\n\r\n    const openCmtHandle = () => {\r\n        setIsActive(true)\r\n        loadCmtHanlde()\r\n        document.getElementById(post._id).focus()\r\n    }\r\n\r\n    const commentRef = useRef('')\r\n    const commentHandle = async (e) => {\r\n        e.preventDefault()\r\n        if(commentRef.current.value !== ''){\r\n            const newCmt = {\r\n                userId: user._id,\r\n                postId: post._id,\r\n                text: commentRef.current.value\r\n            }\r\n\r\n            try{\r\n                const res = await axios.post(SV + '/comments/', newCmt)\r\n                console.log(res.data)\r\n                setComments([...comments, res.data])\r\n            }\r\n            catch(err){\r\n\r\n            }\r\n            commentRef.current.value = ''\r\n        }\r\n        else{\r\n           \r\n        }\r\n    }\r\n\r\n    return (\r\n\r\n        <div className=\"post\">\r\n            <Dialog open={openDelConfirm} onClose={handleCloseDelConfirm}>\r\n                <DialogTitle>Delete Confirmation</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                        Do you want to delete this post?\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={deleteHandle}>Confirm</Button>\r\n                    <Button onClick={handleCloseDelConfirm}>Cancel</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Dialog open={openUpdatePost} onClose={handleCloseUpdatePost}>\r\n                <DialogTitle>Cập nhật thông tin</DialogTitle>\r\n\r\n                <DialogContent>\r\n                    <Box\r\n                    component=\"form\"\r\n                    sx={{\r\n                        '& .MuiTextField-root': { m: 2, width: 500, maxWidth: '100%', },\r\n                    }}\r\n                    autoComplete=\"off\"\r\n                    >\r\n                        <TextField required id=\"outlined-required\" defaultValue={post.text}  onChange={e => setPostText(e.target.value)} />\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={updateHandle} type='submit'>Cập nhật</Button>\r\n                    <Button onClick={handleCloseUpdatePost} >Hủy</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <div className=\"post-top\">\r\n                <Link to={'/profile/' + userPost.emailname}>\r\n                <div className=\"post-top-left\">\r\n                    {userPost.avatar ? <img src={PF+userPost.avatar} alt=\"\" className=\"post-top-avatar\" /> : <CircularProgress />}\r\n                    <div className=\"post-top-user\">\r\n                        <p className=\"post-top-user-name\">{userPost.username}</p>\r\n                        <p className=\"post-top-user-time\">{format(post.createdAt)}</p>\r\n                    </div>\r\n                </div>\r\n                </Link>\r\n                <div className=\"post-top-right\">\r\n                <IconButton\r\n                    aria-label=\"more\"\r\n                    id=\"long-button\"\r\n                    aria-controls=\"long-menu\"\r\n                    aria-expanded={open ? 'true' : undefined}\r\n                    aria-haspopup=\"true\"\r\n                    onClick={handleClick}\r\n                >\r\n                    <MoreVert />\r\n                </IconButton>\r\n                \r\n                \r\n                \r\n                <Menu\r\n                    id=\"long-menu\"\r\n                    MenuListProps={{\r\n                    'aria-labelledby': 'long-button',\r\n                    }}\r\n                    anchorEl={anchorEl}\r\n                    open={open}\r\n                    onClose={handleClose}\r\n                    onClick={handleClose}\r\n                    PaperProps={{\r\n                    style: {\r\n                        maxHeight: 60 * 4.5,\r\n                        width: '30ch',\r\n                    },\r\n                    }}\r\n                    transformOrigin={{ horizontal: 'right', vertical: 'top' }}\r\n                    anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\r\n                >\r\n                    {user._id === post.userId \r\n                    ?\r\n                    <MenuItem onClick={handleClickOpenDelConfirm}>\r\n                    <ListItemIcon>\r\n                        <Settings fontSize=\"small\" />\r\n                    </ListItemIcon>\r\n                    Xóa bài viết\r\n                    </MenuItem>     \r\n                    : null\r\n                    }\r\n                    \r\n                    {user._id === post.userId \r\n                    ?\r\n                    <MenuItem onClick={handleClickOpenUpdatePost}>\r\n                    <ListItemIcon>\r\n                        <Settings fontSize=\"small\" />\r\n                    </ListItemIcon>\r\n                    Sửa bài viết\r\n                    </MenuItem>\r\n                    \r\n                    : null\r\n                    }\r\n            \r\n                    \r\n                    <MenuItem>\r\n                    <ListItemIcon>\r\n                        <Settings fontSize=\"small\" />\r\n                    </ListItemIcon>\r\n                    Báo cáo\r\n                    </MenuItem>\r\n\r\n                </Menu>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"post-center\">\r\n                <div className=\"post-center-text\">\r\n                    {post.text}\r\n                </div>\r\n                {post.img ? <img src={PF+post.img} alt=\"\" className=\"post-center-media\" /> : null}\r\n                \r\n            </div>\r\n\r\n            <div className=\"post-bottom\">\r\n                <div className=\"post-bottom-count\">\r\n                    <div className=\"post-bottom-count-like\">\r\n                        <ThumbUpAlt className=\"post-bottom-count-icon\"/>\r\n                        <span className=\"post-bottom-count-text\">{likes}</span> \r\n                    </div>\r\n                    <div className=\"post-bottom-count-comments\">\r\n                        {post.comments.length + ' comments'} \r\n                    </div>\r\n                </div>\r\n                <hr />\r\n                <div className=\"post-bottom-item\">\r\n                    <div className=\"post-bottom-like-comment\" onClick={likeClickHandle}>\r\n                        <ThumbUpAlt style={{ fill: 'rgb(58, 174, 252)' }}/>\r\n                        <span className=\"post-bottom-like-comment-text\">Thích</span>\r\n                    </div>\r\n                    <div className=\"post-bottom-like-comment\" onClick={openCmtHandle}>\r\n                        <Comment/>\r\n                        <span className=\"post-bottom-like-comment-text\">Bình luận</span>\r\n                    </div>\r\n                </div>\r\n                <hr />\r\n            </div>\r\n            <div className=\"post-comments\">\r\n                <div className=\"post-load-comments\">\r\n                    <p className='post-load-comments-text' onClick={reloadCmtHanlde}>Tải lại <Replay className='load-comments-icon' /></p>\r\n                    <p className='post-load-comments-text' onClick={loadCmtHanlde}><Replay className='load-comments-icon' /> Tải</p>\r\n                </div>\r\n                {comments.map((comment) => (\r\n                    <Comments key={comment._id} comment={comment} />\r\n                ))}\r\n                \r\n\r\n                <form className={'post-send-comment ' + (isActive ? 'active' : '')} onSubmit={commentHandle}>\r\n                    <img src={PF+user.avatar} alt=\"\" className=\"comment-avatar\" />\r\n                    <div className=\"comment-input\">\r\n                        <input type=\"text\" placeholder='Input message' id={post._id} ref={commentRef} />\r\n                    </div>\r\n                    \r\n                    <button type='submit' className='comment-input-btn'><Send /></button>\r\n                </form>\r\n            </div>\r\n\r\n\r\n        </div>\r\n\r\n        \r\n    )\r\n}\r\n","import {Photo, Tag, AddReaction} from '@mui/icons-material'\r\nimport './Share.css'\r\nimport { useContext, useRef, useState } from 'react'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { PostContext } from '../../context/PostContext'\r\nimport axios from 'axios'\r\n\r\nexport default function Share() {\r\n    const PF = process.env.REACT_APP_PUBLIC_FOLDER\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const { user } = useContext(AuthContext)\r\n    const { posts, dispatch} = useContext(PostContext)\r\n\r\n    const [file, setFile] = useState(null)\r\n    const [errorMessage, setErrorMessage] = useState('')\r\n\r\n    const statusTextRef = useRef(\"\")\r\n\r\n    const submitHandle = async (e) => {\r\n        e.preventDefault()\r\n        if(statusTextRef.current.value === \"\" || statusTextRef.current.value === null){\r\n            setErrorMessage(\"Please enter Username\")\r\n            return false\r\n        }\r\n\r\n        const newPost = {\r\n            userId: user._id,\r\n            text: statusTextRef.current.value\r\n        }\r\n\r\n        if(file){\r\n            const data = new FormData()\r\n            const fileName = Date.now() + \"_\" + file.name\r\n            data.append(\"name\", fileName)\r\n            data.append(\"file\", file)\r\n            newPost.img = \"post/\" + fileName\r\n            try{\r\n                await axios.post(SV + \"/upload/post\", data)\r\n            }\r\n            catch(err){\r\n                console.log(err)\r\n            }\r\n        }\r\n        try{\r\n            await axios.post(SV + \"/posts/\", {newPost})\r\n            const getNewPost = await axios.get(SV + '/posts/profile/emailname/'+ user.emailname +'/page/1/limit/1')\r\n            dispatch({type: \"POST_SUCCESS\", payload: [getNewPost.data[0], ...posts]})\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"share\">\r\n            <form className=\"shareContainer\" onSubmit={submitHandle}>\r\n                <div className=\"share-top\">\r\n                    <img src={PF+user.avatar} alt=\"\" className=\"share-avatar\" />\r\n                    <div className=\"share-input\">\r\n                        <input type=\"text\" className=\"share-input-box\" placeholder={\"What's on your mind \" + user.username + \"?\"} ref={statusTextRef} />\r\n                    </div>\r\n                    <div >\r\n                        <button className=\"share-btn\" type='submit'>Đăng</button>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div className=\"share-bottom\">\r\n                    <div className=\"share-options\">\r\n                        <label htmlFor=\"file\" className=\"share-option-item\">\r\n                            <Photo htmlColor=\"#20ab00\" className=\"share-option-item-icon\"/>\r\n                            <span className=\"share-option-item-text\">Ảnh hoặc Video</span>\r\n                        </label>\r\n                        <input type=\"file\" name=\"file\" id=\"file\" style={{display: \"none\"}} onChange={(e) => setFile(e.target.files[0])} />\r\n                        <div className=\"share-option-item\">\r\n                            <Tag htmlColor=\"#fa7500\" className=\"share-option-item-icon\"/>\r\n                            <span className=\"share-option-item-text\">Tag Friends</span>\r\n                        </div>\r\n                        <div className=\"share-option-item\">\r\n                            <AddReaction htmlColor=\"#fcba03\" className=\"share-option-item-icon\"/>\r\n                            <span className=\"share-option-item-text\">Cảm xúc</span>\r\n                        </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import Profile from \"../Profile/Profile\";\r\nimport Post from \"../Post/Post\";\r\nimport Share from \"../Share/Share\";\r\nimport './Feed.css'\r\nimport { useState, useEffect, useContext } from \"react\";\r\nimport axios from 'axios'\r\nimport { CircularProgress } from '@mui/material'\r\nimport { PostContext } from \"../../context/PostContext\";\r\nimport { CheckCircleOutline } from \"@mui/icons-material\";\r\nimport { AuthContext } from \"../../context/AuthContext\";\r\n\r\n\r\nexport default function Feed({emailname}) {\r\n    const [page, setPage] = useState(1)\r\n    const [isEnd, setIsEnd] = useState(false)\r\n\r\n\r\n    const {posts, isFetching, dispatch} = useContext(PostContext)\r\n    const {user} = useContext(AuthContext)\r\n\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n    \r\n\r\n    const fetchPosts = async () => {\r\n        try{\r\n            \r\n            const res = emailname \r\n            ? await axios.get(SV + '/posts/profile/emailname/' + emailname + '/page/' + page + '/limit/10')\r\n            : await axios.get(SV + '/posts/timeline/page/' + page + '/limit/10') \r\n            const newPosts = posts.concat(res.data)\r\n\r\n            if (newPosts.length === posts.length){\r\n                setIsEnd(true)\r\n                \r\n            }\r\n\r\n            if(page === 1){\r\n                dispatch({type: \"POST_SUCCESS\", payload: [...res.data] })\r\n            }\r\n            else{\r\n                const ps = [...posts, ...res.data]\r\n                const payload = ps.filter((object,index) => index === ps.findIndex(obj => JSON.stringify(obj) === JSON.stringify(object)))\r\n                dispatch({type: \"POST_SUCCESS\", payload: payload })\r\n            }  \r\n            \r\n        }\r\n        catch(err){\r\n            dispatch({type: \"POST_FAILURE\", payload: err})\r\n        }\r\n        \r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchPosts()\r\n        \r\n    }, [page, emailname])\r\n\r\n\r\n    const handleScroll = () => {\r\n        const bottom = Math.ceil(window.innerHeight + window.scrollY) >= document.documentElement.scrollHeight\r\n        setTimeout(() => {\r\n            if (bottom && !isEnd) {\r\n                setPage(page + 1)\r\n            }\r\n        }, 100)\r\n        \r\n        \r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll, {\r\n            passive: true\r\n        });\r\n      \r\n        return () => {\r\n            window.removeEventListener('scroll', handleScroll);\r\n        };\r\n        \r\n    }, [posts])\r\n    \r\n\r\n    const HomeFeed = () => {\r\n        return(\r\n            <>\r\n                <Share/>\r\n                {posts.map((p) => (\r\n                    <Post key={p._id} post={p} />\r\n                ))}\r\n                \r\n            </> \r\n        )\r\n    }\r\n\r\n    const ProfileFeed = () => {\r\n        return(\r\n            <>\r\n                <Profile emailname={emailname}/>\r\n                {user.emailname === emailname ? <Share/>  : null}    \r\n                {posts.map((p) => (\r\n                    <Post key={p._id} post={p} />\r\n                ))}\r\n                \r\n            </> \r\n        )\r\n    }\r\n\r\n    return (\r\n        isFetching\r\n        ? <CircularProgress/>\r\n        : <div className=\"feed\">\r\n            <div className=\"feed-items\">\r\n                {emailname ? <ProfileFeed/> : <HomeFeed/>} \r\n                {isEnd ? <div className=\"feed-end\"><CheckCircleOutline /> No more posts to load </div> : null}        \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import { useContext, useEffect } from \"react\"\r\nimport Feed from \"../components/Feed/Feed\"\r\nimport Navbar from \"../components/NavBar/Navbar\"\r\nimport Rightbar from \"../components/Rightbar/Rightbar\"\r\nimport Sidebar from \"../components/Sidebar/Sidebar\"\r\nimport { PostContext } from \"../context/PostContext\"\r\n\r\nexport default function Home() {\r\n    const { posts, dispatch } = useContext(PostContext)\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n        dispatch({type: \"POST_START\"})\r\n    }, [])\r\n    \r\n    return (\r\n        <div>\r\n            <Navbar/>\r\n            <div className=\"mainContainer\">\r\n                <Sidebar/>\r\n                <Feed/>\r\n                <Rightbar/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import Feed from \"../components/Feed/Feed\"\r\nimport Navbar from \"../components/NavBar/Navbar\"\r\nimport Rightbar from \"../components/Rightbar/Rightbar\"\r\nimport Sidebar from \"../components/Sidebar/Sidebar\"\r\nimport { useParams } from \"react-router\"\r\nimport { PostContext } from \"../context/PostContext\"\r\nimport { useContext, useEffect } from \"react\"\r\n\r\nexport default function Profile() {\r\n    const emailname = useParams().emailname\r\n    const { posts, dispatch } = useContext(PostContext)\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n        dispatch({type: \"POST_START\"})\r\n        \r\n    }, [])\r\n\r\n    return (\r\n        <div>\r\n            <Navbar/>\r\n            <div className=\"mainContainer\">\r\n                <Sidebar/>\r\n                <Feed emailname={emailname} />\r\n                <Rightbar/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import axios from 'axios'\r\nimport { useRef } from 'react'\r\nimport { useContext } from 'react'\r\nimport { useState } from 'react'\r\nimport {GoogleLogin} from 'react-google-login'\r\nimport './Signin.css'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport { CircularProgress } from '@mui/material'\r\n\r\nexport default function Signin() {\r\n\r\n    const [toggle, setToggle] = useState('toggle')\r\n    const [toggleBtnStd, setToggleBtnStd] = useState('toggle-btn std or')\r\n    const [toggleBtnOth, setToggleBtnOth] = useState('toggle-btn oth')\r\n    const [students, setStudents] = useState('students')\r\n    const [others, setOthers] = useState('others')\r\n    const [ggErrorMessage, setGgErrorMessage] = useState(\"\")\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n    const emailnameRef = useRef()\r\n    const passwordRef = useRef()\r\n    const {isFetching, error, dispatch} = useContext(AuthContext)\r\n\r\n    const studentSignin = () => {\r\n        setToggle('toggle')\r\n        setStudents('students') \r\n        setOthers('others')\r\n        setToggleBtnOth('toggle-btn oth')\r\n        setToggleBtnStd('toggle-btn std or')\r\n    }\r\n    const othersSignin = () => {\r\n        setToggle('toggle or')\r\n        setStudents('students or') \r\n        setOthers('others or')\r\n        setToggleBtnOth('toggle-btn oth or')\r\n        setToggleBtnStd('toggle-btn std')\r\n    }\r\n\r\n    const signInHandler = async (e) => {\r\n        e.preventDefault()\r\n\r\n        const emailname = emailnameRef.current.value\r\n        const password = passwordRef.current.value\r\n\r\n        if(emailname === \"\" || emailname === null){\r\n            setErrorMessage(\"Vui lòng nhập tài khoản\")\r\n            return false\r\n        }\r\n        if(password === \"\" || password === null){\r\n            setErrorMessage(\"Vui lòng nhập mật khẩu\")\r\n            return false\r\n        }\r\n\r\n        dispatch({type: \"SIGNIN_START\"})\r\n        try{\r\n            const res = await axios.post(SV+\"/auth/signin\", {emailname, password})\r\n            if(res.data.code === \"success\"){\r\n                localStorage.setItem('userToken', res.data.userToken)\r\n                const user = await axios.get(SV+\"/auth/user/\" + localStorage.getItem('userToken'))\r\n                \r\n                dispatch({type: \"SIGNIN_SUCCESS\", payload: user.data})\r\n            }\r\n            if(res.data.code === \"user not found\"){\r\n                setErrorMessage(\"Tài khoản không tồn tại\")\r\n                dispatch({type: \"SIGNIN_FAILURE\", payload: res.data.code})\r\n                return false\r\n            }\r\n            if(res.data.code === \"wrong password\"){\r\n                setErrorMessage(\"Sai mật khẩu\")\r\n                dispatch({type: \"SIGNIN_FAILURE\", payload: res.data.code})\r\n                return false\r\n            }\r\n            \r\n        }\r\n        catch(err){\r\n            dispatch({type: \"SIGNIN_FAILURE\", payload: err})\r\n        }\r\n    }\r\n\r\n    const googleRespone = async (res) => {\r\n        const userData = res.profileObj\r\n        \r\n        dispatch({type: \"SIGNIN_START\"})\r\n        try{\r\n            const res = await axios.post(SV+\"/auth/signin/google\", {authId: userData.googleId, email: userData.email, name: userData.name})\r\n            if(res.data.code === \"success\"){\r\n                localStorage.setItem('userToken', res.data.userToken)\r\n                const user = await axios.get(SV+\"/auth/user/\" + localStorage.getItem('userToken'))\r\n                dispatch({type: \"SIGNIN_SUCCESS\", payload: user.data})\r\n            }\r\n            if(res.data.code === \"email not aceptable\"){\r\n                setGgErrorMessage(\"Chỉ được phép đăng nhập bằng email có đuôi student.tdtu.edu.vn hoặc tdtu.edu.vn\")\r\n                dispatch({type: \"SIGNIN_FAILURE\", payload: res.data.code})\r\n                return false\r\n            }\r\n        }\r\n        catch(err){\r\n            dispatch({type: \"SIGNIN_FAILURE\", payload: err})\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"signin-container\">\r\n            \r\n            <div className=\"signin-form\">\r\n                <h1 className=\"signin-logo\">TDTU</h1>\r\n                <div className=\"toggle-box\">\r\n                    <div className={toggle}></div>\r\n                    <button type=\"button\" className={toggleBtnStd} onClick={studentSignin}>Sinh viên</button>\r\n                    <button type=\"button\" className={toggleBtnOth} onClick={othersSignin}>Khác</button>\r\n                </div>\r\n\r\n\r\n                <form className={others} onSubmit={signInHandler}>\r\n                    <div className=\"form-group\">\r\n                        <input type=\"text\" placeholder=\"Tài khoản\" ref={emailnameRef}/>\r\n                    </div>\r\n                    <br/>\r\n                    <div className=\"form-group\">  \r\n                        <input type=\"password\" placeholder=\"Mật khẩu\" ref={passwordRef}/>\r\n                    </div>\r\n                    {errorMessage ? <div className='signin-error'>{errorMessage}</div> : null}\r\n                    <button className=\"signin-submit-btn\" type=\"submit\">{ isFetching ? <CircularProgress color=\"secondary\" size=\"20px\" /> : \"Đăng nhập\"}</button>\r\n                </form>\r\n\r\n                <div className={students}>\r\n                    \r\n\r\n                    <GoogleLogin \r\n                        clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\r\n                        buttonText='Đăng nhập với Google'\r\n                        onSuccess={googleRespone}\r\n                        onFailure={googleRespone}\r\n                        cookiePolicy={'single_host_origin'}\r\n                    ></GoogleLogin>\r\n\r\n                    {ggErrorMessage ? <div className='signin-error'>{ggErrorMessage}</div> : null}\r\n                </div>\r\n                \r\n            </div>\r\n            \r\n        </div>  \r\n        </>\r\n    )\r\n}\r\n","import Signin from \"../components/Signin/Signin\"\r\n\r\nexport default function SigninPage() {\r\n    return (\r\n        <>\r\n            <Signin />\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './Register.css'\r\nimport { useRef, useState, useEffect } from 'react'\r\nimport { ArrowBack } from '@mui/icons-material'\r\nimport { Link } from 'react-router-dom'\r\nimport axios from 'axios'\r\n\r\nexport default function Register() {\r\n\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const emailnameRef = useRef()\r\n    const nameRef = useRef()\r\n    const passwordRef = useRef()\r\n    const confirmPasswordRef = useRef()\r\n\r\n    const [permissions, setPermissions] = useState([])\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n\r\n    const handleCheckbox = (e) => {\r\n        if(e.target.checked){\r\n            setPermissions([...permissions, e.target.value])\r\n        }\r\n        else{\r\n            setPermissions(permissions.filter(p => p !== e.target.value))\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(errorMessage)\r\n    }, [errorMessage])\r\n\r\n    const handleRegister = async (e) => {\r\n        e.preventDefault()\r\n\r\n        const emailname = emailnameRef.current.value\r\n        const name = nameRef.current.value\r\n        const password = passwordRef.current.value\r\n        const confirmPassword = confirmPasswordRef.current.value\r\n        if(emailname === \"\" || emailname === null){\r\n            setErrorMessage(\"Please enter Username\")\r\n            return false\r\n        }\r\n        if(name === \"\" || name === null){\r\n            setErrorMessage(\"Please enter Name\")\r\n            return false\r\n        }\r\n        if(password === \"\" || password === null){\r\n            setErrorMessage(\"Please enter Password\")\r\n            return false\r\n        }\r\n        if(password !== confirmPassword){\r\n            setErrorMessage(\"Password does not match\")\r\n            return false\r\n        }\r\n        if(permissions.length === 0){\r\n            setErrorMessage(\"You must grant at least one permission\")\r\n            return false\r\n        }\r\n\r\n        try {\r\n            const res = await axios.post(SV+\"/auth/register\", {emailname, name, password, permissions})\r\n        }\r\n        catch(err){\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n        <div className=\"register-form\">\r\n            <h1 className=\"register-logo\">TDTU</h1>\r\n\r\n            <form className=\"register\" onSubmit={handleRegister}>\r\n                <div className=\"register-input-group\">\r\n                    <div className=\"form-group\">\r\n                        <input type=\"text\" placeholder=\"Username\" ref={emailnameRef}/>\r\n                    </div>\r\n                    <br/>\r\n                    <div className=\"form-group\">\r\n                        <input type=\"text\" placeholder=\"Name\" ref={nameRef}/>\r\n                    </div>\r\n                    <br/>\r\n                    <div className=\"form-group\">  \r\n                        <input type=\"password\" placeholder=\"Password\" ref={passwordRef}/>\r\n                    </div>\r\n                    <br/>\r\n                    <div className=\"form-group\">  \r\n                        <input type=\"password\" placeholder=\"Confirm Password\" ref={confirmPasswordRef}/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"register-checkbox-group1\">\r\n                    \r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Phòng Công tác học sinh sinh viên\" onChange={handleCheckbox} /> Phòng Công tác học sinh sinh viên</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Phòng Đại học\" onChange={handleCheckbox} /> Phòng Đại học</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Phòng Sau đại học\" onChange={handleCheckbox} /> Phòng Sau đại học</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Phòng điện toán và máy tính\" onChange={handleCheckbox} /> Phòng điện toán và máy tính</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Phòng khảo thí và kiểm định chất lượng\" onChange={handleCheckbox} /> Phòng khảo thí và kiểm định chất lượng</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Phòng tài chính\" onChange={handleCheckbox} /> Phòng tài chính</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"TDT Creative Language Center\" onChange={handleCheckbox} /> TDT Creative Language Center</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Trung tâm tin học\" onChange={handleCheckbox} /> Trung tâm tin học</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Trung tâm đào tạo phát triển xã hội\" onChange={handleCheckbox} /> Trung tâm đào tạo phát triển xã hội</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Trung tâm phát triển Khoa học quản lý và Ứng dụng công nghệ\" onChange={handleCheckbox} /> Trung tâm phát triển Khoa học quản lý và Ứng dụng công nghệ</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Trung tâm hợp tác doanh nghiệp và cựu sinh viên\" onChange={handleCheckbox} /> Trung tâm hợp tác doanh nghiệp và cựu sinh viên</label>\r\n                    \r\n                </div>\r\n\r\n                <div className=\"register-checkbox-group2\">\r\n                    \r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Luật\" onChange={handleCheckbox} /> Khoa Luật</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Trung tâm ngoại ngữ - tin học - bồi dưỡng văn hóa\" onChange={handleCheckbox} /> Trung tâm ngoại ngữ - tin học - bồi dưỡng văn hóa</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Viện chính sách kinh tế và kinh doanh\" onChange={handleCheckbox} /> Viện chính sách kinh tế và kinh doanh</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Mỹ thuật công nghiệp\" onChange={handleCheckbox} /> Khoa Mỹ thuật công nghiệp</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Điện - Điện tử\" onChange={handleCheckbox} /> Khoa Điện - Điện tử</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Công nghệ thông tin\" onChange={handleCheckbox} /> Khoa Công nghệ thông tin</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Quản trị kinh doanh\" onChange={handleCheckbox} /> Khoa Quản trị kinh doanh</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Môi trường và bảo hộ lao động\" onChange={handleCheckbox} /> Khoa Môi trường và bảo hộ lao động</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Lao động công đoàn\" onChange={handleCheckbox} /> Khoa Lao động công đoàn</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa Tài chính ngân hàng\" onChange={handleCheckbox} />  Khoa Tài chính ngân hàng</label>\r\n                    <br />\r\n                    <label><input type=\"checkbox\" name=\"permission\" value=\"Khoa giáo dục quốc tế\" onChange={handleCheckbox} />  Khoa giáo dục quốc tế</label>\r\n                </div>\r\n                \r\n                <button className=\"submit-btn\" type=\"submit\" >Register</button>\r\n                <br />\r\n            </form>\r\n            <Link className=\"register-back\" to=\"/\"><ArrowBack /></Link>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n","import {React, useState, useRef, useContext, useEffect} from 'react'\r\nimport Navbar from '../../components/NavBar/Navbar'\r\nimport Rightbar from '../../components/Rightbar/Rightbar'\r\nimport Sidebar from '../../components/Sidebar/Sidebar'\r\nimport {useDropzone} from 'react-dropzone'\r\nimport './CreateAnnouncement.css'\r\nimport { CKEditor } from '@ckeditor/ckeditor5-react';\r\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\nimport axios from 'axios'\r\nimport {AuthContext} from '../../context/AuthContext';\r\nimport {Alert, IconButton, Collapse} from '@mui/material';\r\nimport { SocketContext } from '../../context/SocketContext'\r\nimport {CloseIcon, ArrowBack} from '@mui/icons-material'\r\nimport { Link, useParams } from 'react-router-dom'\r\n\r\nexport default function CreateAnnouncement({announceId}) {\r\n    const SV = process.env.REACT_APP_SV_HOST;\r\n    const params = useParams()\r\n    const {user} = useContext(AuthContext);\r\n    const {socket} = useContext(SocketContext)\r\n\r\n    const {acceptedFiles, getRootProps, getInputProps} = useDropzone();\r\n\r\n    const [text, setText] = useState('');\r\n    const [multipleFiles, setMultipleFiles] = useState('');\r\n    const [success, setSuccess] = useState(false);\r\n    const [fail, setFail] = useState(false);\r\n    \r\n    const titleRef = useRef()\r\n    const detailRef = useRef()\r\n    const typeRef = useRef()\r\n    const facultyRef = useRef()\r\n    const [errorMessage, setErrorMessage] = useState(\"\")\r\n    const [announcement, setAnnouncement] = useState({})\r\n\r\n    useEffect(() => {\r\n        console.log(errorMessage)\r\n    }, [errorMessage])\r\n\r\n   \r\n\r\n    useEffect(() => {\r\n        const fetchUserAnnounce = async () => {\r\n            try {\r\n                const res = await axios.get(SV + '/announcements/list/' + params.announceId)\r\n                setAnnouncement(res.data)\r\n                setText(res.data.text)\r\n                document.getElementById('announce-title').value = res.data.title\r\n                document.getElementById('announce-type').value = res.data.type\r\n                document.getElementById('announce-faculty').value = res.data.faculty\r\n            } catch (error) {\r\n                console.log(error)\r\n            }\r\n            \r\n        }\r\n        fetchUserAnnounce()\r\n        \r\n    }, [params.announceId])\r\n    \r\n    const files = acceptedFiles.map(file => (\r\n        <li key={file.path}>\r\n            {file.path} - {file.size} bytes\r\n        </li>\r\n    ));\r\n    \r\n    const richText = (event, editor) => {\r\n        const data = editor.getData();\r\n        setText(data)\r\n    }\r\n    \r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const title = titleRef.current.value;\r\n        const detail = text\r\n        const type = typeRef.current.value;\r\n        const faculty = facultyRef.current.value;\r\n\r\n         // console.log({title, detail, type, faculty});\r\n        if(title === \"\" || title === null){\r\n            setErrorMessage(\"Enter the title\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n\r\n        if(detail === \"\" || detail === null){\r\n            setErrorMessage(\"Enter your announcement's detail\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n\r\n        if(type === \"\" || type === null){\r\n            setErrorMessage(\"Enter your announcement's type\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n\r\n        if(faculty === \"\" || faculty === null){\r\n            setErrorMessage(\"Enter your announcement's faculty\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n        \r\n        else{\r\n            try{\r\n                const NewAnnouncement = {\r\n                    userId: user._id,\r\n                    title: title,\r\n                    text: detail, \r\n                    type: type,\r\n                    faculty: faculty,\r\n                }\r\n                \r\n                if(acceptedFiles){\r\n                    let filesReq = []\r\n                    acceptedFiles.map(file => {\r\n                        const data = new FormData()\r\n                        const fileName = Date.now() + \"_\" + file.name\r\n                        data.append(\"name\", fileName)\r\n                        data.append(\"file\", file)\r\n                        filesReq.push(\"announcement/\" + fileName)\r\n                        try{\r\n                            axios.post(SV + \"/upload/announcement\", data)\r\n                        }\r\n                        catch(err){\r\n                            console.log(err)\r\n                        }\r\n                    })\r\n                    NewAnnouncement.file = filesReq\r\n                }\r\n\r\n                const res = await axios.post(SV + \"/announcements/\", NewAnnouncement)\r\n                if(res.status === 200){\r\n                    document.getElementById('announce-title').value = ''\r\n                    document.getElementById('announce-type').value = ''\r\n                    document.getElementById('announce-faculty').value = ''\r\n                    setText('')\r\n                    setSuccess(true)\r\n                    \r\n                    socket.emit(\"createNewAnnouncement\", {sendName: user.username, avatar: user.avatar, data: res.data})\r\n\r\n                }else{\r\n                    setFail(true)\r\n                }\r\n\r\n                /*fetch(SV + \"/announcements/\", {\r\n                    method: 'POST',\r\n                    body: JSON.stringify(NewAnnouncement),\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                })\r\n                .then(res => { \r\n                    res.json()\r\n                    if(res.status === 200){\r\n                        document.getElementById('announce-title').value = ''\r\n                        document.getElementById('announce-type').value = ''\r\n                        document.getElementById('announce-faculty').value = ''\r\n                        setText('')\r\n                        setSuccess(true)\r\n                        \r\n                        socket.emit(\"createNewAnnouncement\", {sendName: user.username, data: res.data})\r\n\r\n                    }else{\r\n                        setFail(true)\r\n                    }\r\n                }\r\n                )\r\n                .then(data => console.log(data)); */\r\n            }\r\n            catch{\r\n            }\r\n            \r\n        }\r\n\r\n        \r\n    }\r\n\r\n    const handleUpdate = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const title = titleRef.current.value;\r\n        const detail = text\r\n        const type = typeRef.current.value;\r\n        const faculty = facultyRef.current.value;\r\n\r\n         // console.log({title, detail, type, faculty});\r\n         if(title === \"\" || title === null){\r\n            setErrorMessage(\"Enter the title\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n\r\n        if(detail === \"\" || detail === null){\r\n            setErrorMessage(\"Enter your announcement's detail\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n\r\n        if(type === \"\" || type === null){\r\n            setErrorMessage(\"Enter your announcement's type\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n\r\n        if(faculty === \"\" || faculty === null){\r\n            setErrorMessage(\"Enter your announcement's faculty\");\r\n            setFail(true)\r\n            return false\r\n        }\r\n        \r\n        else{\r\n            try{\r\n                const NewAnnouncement = {\r\n                    userId: user._id,\r\n                    title: title,\r\n                    text: detail, \r\n                    type: type,\r\n                    faculty: faculty,\r\n                }\r\n                \r\n                if(acceptedFiles){\r\n                    let filesReq = []\r\n                    acceptedFiles.map(file => {\r\n                        const data = new FormData()\r\n                        const fileName = Date.now() + \"_\" + file.name\r\n                        data.append(\"name\", fileName)\r\n                        data.append(\"file\", file)\r\n                        filesReq.push(\"announcement/\" + fileName)\r\n                        try{\r\n                            axios.post(SV + \"/upload/announcement\", data)\r\n                        }\r\n                        catch(err){\r\n                            console.log(err)\r\n                        }\r\n                    })\r\n                    NewAnnouncement.file = filesReq\r\n                }\r\n\r\n                const res = await axios.put(SV + \"/announcements/\" + announcement._id , NewAnnouncement)\r\n                if(res.status === 200){\r\n                    document.getElementById('announce-title').value = ''\r\n                    document.getElementById('announce-type').value = ''\r\n                    document.getElementById('announce-faculty').value = ''\r\n                    setText('')\r\n                    setSuccess(true)\r\n                    \r\n                    socket.emit(\"createNewAnnouncement\", {sendName: user.username, avatar: user.avatar, data: res.data})\r\n\r\n                }else{\r\n                    setFail(true)\r\n                }\r\n            }\r\n            catch{\r\n            }\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    return (\r\n        <div>\r\n        <Navbar />\r\n        \r\n        <div className='mainContainer'>\r\n            <Sidebar />\r\n            <div className=\"CA-container\">\r\n                <h1>THÔNG BÁO</h1>\r\n                {params.announceId ? (\r\n                    <form className='announce-form' onSubmit={handleUpdate}>\r\n                    <table className='announce-table'>\r\n                        <tr>\r\n                            <td colspan='2'>\r\n                                <IconButton variant=\"outlined\" color=\"error\">\r\n                                    <Link to=\"/announcement/list\"><ArrowBack/></Link>\r\n                                </IconButton>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td >\r\n                                <label htmlFor=\"announce-title\"><h3>Tiêu đề</h3></label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan='2'>\r\n                                <input ref={titleRef} type=\"text\" name=\"announce-title\" id=\"announce-title\" className='announce-input-text'/>\r\n                            </td>\r\n                        </tr>\r\n\r\n                        <tr>\r\n                            <td>\r\n                                <label htmlFor=\"announce-detail\"><h3>Chi tiết</h3> </label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan='2'>\r\n                                <div className=\"rich\">\r\n                                    <CKEditor\r\n                                        editor={ClassicEditor}\r\n                                        data={text}\r\n                                        onChange={richText}\r\n                                    />\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                        \r\n                        <tr>\r\n                            <td>\r\n                                <label htmlFor=\"announce-type\"></label><h3>Chủ đề</h3>\r\n                            </td>\r\n                            <td>\r\n                                <label htmlFor=\"announce-faculty\"></label><h3>Phòng ban</h3>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td >\r\n                                <select name=\"announce-type\" id=\"announce-type\" ref={typeRef}>\r\n                                    <option value='' selected=\"selected\" disabled>Chủ đề</option>\r\n                                    <option value=\"Hướng dẫn\">Hướng dẫn</option>\r\n                                    <option value=\"Kế hoạch\">Kế hoạch</option>\r\n                                    <option value=\"Sự kiện\">Sự kiện</option>\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <select name=\"announce-faculty\" id=\"announce-faculty\" ref={facultyRef}>\r\n                                    <option value='' selected=\"selected\" disabled>Khoa</option>\r\n                                    {user.permissions.map(p => <option value={p}>{p}</option>)}\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n\r\n                        <tr>\r\n                            <td>\r\n                                <label htmlFor=\"announce-file\"><h3>Tệp tin đính kèm</h3></label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan='2'>\r\n                                <div className=\"files-form\">\r\n                                    <div {...getRootProps({className: 'dropzone'})}>\r\n                                        <input {...getInputProps()} />\r\n                                        <p>Kéo thả files hoặc nhấn để chọn file</p>\r\n                                    </div>\r\n                                    <aside>\r\n                                        <h4>Files</h4>\r\n                                        <ul>{files}</ul>\r\n                                    </aside>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                    {success ? (\r\n                        <div><Alert severity=\"success\">Update successfully</Alert></div>\r\n                    ) : (\r\n                        <div style={{display: 'none'}}><h1 style={{display: 'none'}}>Not Good</h1></div>\r\n                    )\r\n                    }\r\n                     {fail ? \r\n                        (\r\n                            <div><Alert severity=\"error\">{errorMessage}</Alert></div>\r\n\r\n                        ) : (\r\n                            <div><h1 style={{display: 'none'}}>Not Good</h1></div>\r\n                        )\r\n                    }\r\n\r\n                    \r\n                    <div className=\"btn-group\">\r\n                        <button className=\"announce-btn-submit\" type=\"submit\" >Update</button>\r\n                        <button className=\"announce-btn-reset\" type=\"reset\" >Cancel</button>\r\n                    </div>\r\n                </form>\r\n                ) : (\r\n                    <form className='announce-form' onSubmit={handleSubmit}>\r\n                    <table className='announce-table'>\r\n                        <tr>\r\n                            <td colspan='2'>\r\n                                <IconButton variant=\"outlined\" color=\"error\">\r\n                                    <Link to=\"/announcement/list\"><ArrowBack/></Link>\r\n                                </IconButton>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td >\r\n                                <label htmlFor=\"announce-title\"><h3>Tiêu đề</h3></label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan='2'>\r\n                                <input ref={titleRef} type=\"text\" name=\"announce-title\" id=\"announce-title\" className='announce-input-text'/>\r\n                            </td>\r\n                        </tr>\r\n\r\n                        <tr>\r\n                            <td>\r\n                                <label htmlFor=\"announce-detail\"><h3>Chi tiết</h3> </label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan='2'>\r\n                                <div className=\"rich\">\r\n                                    <CKEditor\r\n                                        editor={ClassicEditor}\r\n                                        data={text}\r\n                                        onChange={richText}\r\n                                    />\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                        \r\n                        <tr>\r\n                            <td>\r\n                                <label htmlFor=\"announce-type\"></label><h3>Chủ đề</h3>\r\n                            </td>\r\n                            <td>\r\n                                <label htmlFor=\"announce-faculty\"></label><h3>Phòng ban</h3>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td >\r\n                                <select name=\"announce-type\" id=\"announce-type\" ref={typeRef} >\r\n                                    <option value='' selected=\"selected\" disabled>Chủ đề</option>\r\n                                    <option value=\"Hướng dẫn\">Hướng dẫn</option>\r\n                                    <option value=\"Kế hoạch\">Kế hoạch</option>\r\n                                    <option value=\"Sự kiện\">Sự kiện</option>\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <select name=\"announce-faculty\" id=\"announce-faculty\" ref={facultyRef}>\r\n                                    <option value='' selected=\"selected\" disabled>Khoa</option>\r\n                                    {user.permissions.map(p => <option value={p}>{p}</option>)}\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n\r\n                        <tr>\r\n                            <td>\r\n                                <label htmlFor=\"announce-file\"><h3>Tệp tin đính kèm</h3></label>\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td colSpan='2'>\r\n                                <div className=\"files-form\">\r\n                                    <div {...getRootProps({className: 'dropzone'})}>\r\n                                        <input {...getInputProps()} />\r\n                                        <p>Kéo thả files hoặc nhấn để chọn file</p>\r\n                                    </div>\r\n                                    <aside>\r\n                                        <h4>Files</h4>\r\n                                        <ul>{files}</ul>\r\n                                    </aside>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                    {success ? (\r\n                        <div><Alert severity=\"success\">Submit successfully</Alert></div>\r\n                    ) : (\r\n                        <div style={{display: 'none'}}><h1 style={{display: 'none'}}>Not Good</h1></div>\r\n                    )\r\n                    }\r\n                     {fail ? \r\n                        (\r\n                            <div><Alert severity=\"error\">{errorMessage}</Alert></div>\r\n\r\n                        ) : (\r\n                            <div><h1 style={{display: 'none'}}>Not Good</h1></div>\r\n                        )\r\n                    }\r\n\r\n                    \r\n                    <div className=\"btn-group\">\r\n                        <button className=\"announce-btn-submit\" type=\"submit\" >Submit</button>\r\n                        <button className=\"announce-btn-reset\" type=\"reset\" >Cancel</button>\r\n                    </div>\r\n                </form>\r\n                )}\r\n                \r\n               \r\n            </div>\r\n            <Rightbar/>\r\n        </div>\r\n        </div>\r\n    )\r\n}\r\n","import {React, useState, useEffect, useContext} from 'react'\r\nimport { AuthContext } from '../../../context/AuthContext'\r\nimport { useParams  } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport {Dialog, DialogActions, DialogContent, DialogTitle, DialogContentText, Paper, Fab} from '@mui/material';\r\nimport TableCell, { tableCellClasses }  from '@mui/material/TableCell';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport { styled } from '@mui/material/styles';\r\nimport Button from '@mui/material/Button';\r\nimport parse from 'html-react-parser'\r\nimport { format } from 'timeago.js'\r\nimport './MyAnnouncement.css'\r\n\r\n\r\nexport default function UserAnnouncement({ announce, index }) {\r\n    const param = useParams()\r\n    const [announcements, setAnnouncements] = useState({})\r\n    const [date, setDate] = useState(new Date(announce.updatedAt))\r\n    const {user} = useContext(AuthContext)\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const [openDelConfirm, setOpenDelConfirm] = useState(false);\r\n    const [openDetail, setOpenDetail] = useState(false);\r\n\r\n    const handleClickOpenDelConfirm = () => {\r\n        setOpenDelConfirm(true);\r\n    };\r\n    \r\n    const handleCloseDelConfirm = () => {\r\n        setOpenDelConfirm(false);\r\n    };\r\n\r\n    const StyledTableCell = styled(TableCell)(({ theme }) => ({\r\n        [`&.${tableCellClasses.head}`]: {\r\n          backgroundColor: theme.palette.primary.light,\r\n          color: theme.palette.common.black,\r\n        },\r\n        [`&.${tableCellClasses.body}`]: {\r\n          fontSize: 14,\r\n        },\r\n      }));\r\n      \r\n      const StyledTableRow = styled(TableRow)(({ theme }) => ({\r\n        '&:nth-of-type(odd)': {\r\n          backgroundColor: theme.palette.action.hover,\r\n        },\r\n        // hide last border\r\n        '&:last-child td, &:last-child th': {\r\n          border: 0,\r\n        },\r\n      }));\r\n\r\n    useEffect(() => {\r\n        let isActive = true\r\n        const fetchUser = async () => {\r\n            const res = await axios.get(SV + '/users?userId=' + announce.userId)\r\n            if (isActive) {\r\n                setAnnouncements(res.data)\r\n            }\r\n        }\r\n        fetchUser()\r\n        return () => isActive = false\r\n    }, [announce.userId])\r\n\r\n    const deleteHandle = () => {\r\n        try{\r\n            axios.post(SV + '/announcements/' + announce._id, {userId: user._id})\r\n            \r\n        }catch(err){\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <>  \r\n            <Dialog open={openDelConfirm} onClose={handleCloseDelConfirm}>\r\n                <DialogTitle>Delete Confirmation</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                            Do you want to delete this announcement?\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={deleteHandle}>Confirm</Button>\r\n                    <Button onClick={handleCloseDelConfirm}>Cancel</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n            <StyledTableRow\r\n            key={announce._id}\r\n            sx={{ '&:last-child td, &:last-child th': { border: 0 } }}>\r\n                <StyledTableCell component=\"th\" scope=\"row\">\r\n                    {index}\r\n                </StyledTableCell>\r\n                <StyledTableCell sx={{ maxWidth:150, maxHeight:20}} component=\"th\" scope=\"row\" className=\"announce-overflow\">\r\n                    {announce.title}\r\n                </StyledTableCell>\r\n                <StyledTableCell align=\"left\">{announce.type}</StyledTableCell>\r\n                <StyledTableCell align=\"left\" sx={{ maxWidth:150}}>{announce.faculty}</StyledTableCell>\r\n                <StyledTableCell align=\"left\">{date.toLocaleDateString(\"en-US\")}</StyledTableCell>\r\n                <StyledTableCell align=\"left\">{format(date)}</StyledTableCell>\r\n                <StyledTableCell align=\"left\">\r\n                    <Button variant=\"outlined\" href={\"/announcement/create/\" + announce._id}>\r\n                        Detail\r\n                    </Button>\r\n                    <Button variant=\"outlined\" sx={{ml: 1}} color=\"error\" onClick = {handleClickOpenDelConfirm}>Delete</Button>\r\n                </StyledTableCell>\r\n            </StyledTableRow>\r\n\r\n            {/* Delete Dialog */}\r\n            \r\n\r\n            {/* Detail Dialog */}\r\n            {/* <Dialog open={openDetail} onClose={handleCloseDetail}>\r\n                <DialogTitle>{announce.title}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText>\r\n                            {parse(announce.text)}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button>Confirm</Button>\r\n                    <Button onClick={handleCloseDetail}>Cancel</Button>\r\n                </DialogActions>\r\n            </Dialog>     */}\r\n        </>\r\n    )\r\n}\r\n\r\n","import {React, useState, useEffect, useContext, useTheme} from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { AuthContext } from '../../context/AuthContext'\r\nimport Navbar from '../../components/NavBar/Navbar'\r\nimport Rightbar from '../../components/Rightbar/Rightbar'\r\nimport Sidebar from '../../components/Sidebar/Sidebar'\r\nimport axios from 'axios'\r\nimport {CheckCircleOutline} from '@mui/icons-material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport { Paper} from '@mui/material';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableCell, { tableCellClasses }  from '@mui/material/TableCell';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableHead from '@mui/material/TableHead';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport TableFooter from '@mui/material/TableFooter';\r\nimport TablePagination from '@mui/material/TablePagination';\r\nimport { styled } from '@mui/material/styles';\r\nimport Button from '@mui/material/Button';\r\nimport Divider from '@mui/material/Divider';\r\nimport './MyAnnouncement.css'\r\nimport UserAnnouncement from '../../components/Announcemnet/MyAnnouncement/MyAnnouncement'\r\n\r\n\r\nexport default function MyAnnouncement({}) {\r\n    const [fetchOk, setFetchOk] = useState(false)\r\n    const [haveAnnouncements, setHaveAnnouncments] = useState(false)\r\n    const [announcements, setAnnouncements] = useState([])\r\n    const {user} = useContext(AuthContext)\r\n    const SV = process.env.REACT_APP_SV_HOST\r\n\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(5);\r\n    \r\n\r\n    const handleChangePage = (event, newPage) => {\r\n        setPage(newPage);\r\n    };\r\n\r\n    const handleChangeRowsPerPage = (event) => {\r\n        setRowsPerPage(+event.target.value);\r\n        setPage(0);\r\n    };\r\n\r\n\r\n    const StyledTableCell = styled(TableCell)(({ theme }) => ({\r\n        [`&.${tableCellClasses.head}`]: {\r\n          backgroundColor: theme.palette.primary.light,\r\n          color: theme.palette.common.black,\r\n        },\r\n        [`&.${tableCellClasses.body}`]: {\r\n          fontSize: 14,\r\n        },\r\n      }));\r\n      \r\n      const StyledTableRow = styled(TableRow)(({ theme }) => ({\r\n        '&:nth-of-type(odd)': {\r\n          backgroundColor: theme.palette.action.hover,\r\n        },\r\n        // hide last border\r\n        '&:last-child td, &:last-child th': {\r\n          border: 0,\r\n        },\r\n      }));\r\n\r\n    const fetchAnnouncements = async () => {\r\n        await axios.get(SV + '/announcements/list/userId/'+user._id)\r\n        .then(response => {\r\n            if(response.status === 200){\r\n                if(response.data.length > 0){\r\n                    setHaveAnnouncments(true)\r\n                    setAnnouncements(response.data)\r\n                    console.log(response.data);\r\n                }\r\n                setFetchOk(true)\r\n            }else{\r\n                setFetchOk(false)\r\n            }\r\n        })\r\n      \r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchAnnouncements()\r\n    }, [user._id])\r\n\r\n    let index = 0\r\n    return (\r\n        <div>\r\n            <Navbar/>\r\n            <div className='mainContainer'>\r\n                <Sidebar />\r\n                <div className=\"MA-container\">\r\n                    \r\n                    <h1>My Announcements</h1>\r\n                    <div id=\"add-announcement\" >\r\n                        <Button startIcon={<AddIcon/>} variant=\"outlined\">\r\n                            <Link to=\"/announcement/create\">\r\n                                Add an announcement\r\n                            </Link>\r\n                        </Button>\r\n                    </div>\r\n                    {fetchOk ?\r\n                    // Have Announcement\r\n                        haveAnnouncements ?\r\n                            <TableContainer sx={{mt: 3}} component={Paper}>\r\n                                <Table sx={{ minWidth:800 }} aria-label=\"simple table\">\r\n                                    <TableHead>\r\n                                        <TableRow>\r\n                                            <StyledTableCell align=\"left\">#</StyledTableCell>\r\n                                            <StyledTableCell align=\"left\">Title</StyledTableCell>\r\n                                            <StyledTableCell align=\"left\">Type</StyledTableCell>\r\n                                            <StyledTableCell align=\"left\">Faculty</StyledTableCell>\r\n                                            <StyledTableCell align=\"left\">Update at</StyledTableCell>\r\n                                            <StyledTableCell align=\"left\">Time</StyledTableCell>\r\n                                            <StyledTableCell align=\"left\"></StyledTableCell>     \r\n                                        </TableRow>\r\n                                    </TableHead>\r\n                                    <TableBody>\r\n                                        {(rowsPerPage > 0\r\n                                        ? announcements.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                                        : announcements).map((announce) => (\r\n                                            <UserAnnouncement key={announce._id} announce={announce} index={index += 1}/>\r\n                                        ))}\r\n                                    </TableBody>\r\n                                   \r\n                                </Table>\r\n                                <Divider/>\r\n                                <TableFooter>\r\n                                    <TablePagination\r\n                                        rowsPerPageOptions={[5,10, 25, 100]}\r\n                                        component=\"div\"\r\n                                        count={announcements.length}\r\n                                        rowsPerPage={rowsPerPage}\r\n                                        page={page}\r\n                                        onPageChange={handleChangePage}\r\n                                        onRowsPerPageChange={handleChangeRowsPerPage}\r\n                                    />\r\n                                    </TableFooter>\r\n                                \r\n                               \r\n                                </TableContainer> :\r\n                    // Don't Have Announcement\r\n                            <div className=\"feed-end\"><CheckCircleOutline /> No more announcements </div>\r\n                        : \r\n                    <div>error</div>}\r\n\r\n                        \r\n                    </div>\r\n                <Rightbar/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n","import Announcement from \"./pages/Announcement\";\r\nimport Home from \"./pages/Home\";\r\nimport Profile from \"./pages/Profile\";\r\nimport SigninPage from \"./pages/SigninPage\";\r\nimport {BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom'\r\nimport './App.css'\r\nimport { useContext, useEffect } from \"react\";\r\nimport { AuthContext } from \"./context/AuthContext\";\r\nimport { SocketContext } from \"./context/SocketContext\";\r\nimport axios from \"axios\";\r\nimport Register from \"./pages/Register/Register\";\r\nimport CreateAnnouncement from \"./pages/CreateAnnouncement/CreateAnnouncement\";\r\nimport MyAnnouncement from \"./pages/MyAnnouncement/MyAnnouncement\";\r\nimport { io } from 'socket.io-client'\r\n\r\nfunction App() {\r\n  const SV = process.env.REACT_APP_SV_HOST\r\n  const ENDPOINT = 'ws://https://tdtu-social-nw-server.herokuapp.com/'\r\n  \r\n  const userToken = localStorage.getItem('userToken')\r\n  const {user, dispatch} = useContext(AuthContext)\r\n  const {socket, dispatch: socketDispatch} = useContext(SocketContext)\r\n\r\n  const fetchUser = async () => {\r\n    dispatch({type: \"SIGNIN_START\"})\r\n    try{\r\n      const user = await axios.get(SV+\"/auth/user/\" + userToken)\r\n      dispatch({type: \"SIGNIN_SUCCESS\", payload: user.data})\r\n    }\r\n    catch(err){\r\n      dispatch({type: \"SIGNIN_FAILURE\", payload: err})\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if(userToken){\r\n      fetchUser()\r\n    }\r\n\r\n    socketDispatch({type: \"SOCKET_SUCCESS\", payload: io(ENDPOINT)})\r\n  }, [])\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        <Route path=\"/\" element={  user ? <Home/> : <SigninPage />} />\r\n\r\n        <Route path=\"/signin\" element={  user ? <Navigate to=\"/\" /> : <SigninPage />} />   \r\n\r\n        <Route path=\"/announcement\" element={  user ? <Announcement/> : <SigninPage />} />  \r\n\r\n        <Route path=\"/announcement/:categoryId\" element={  user ? <Announcement/> : <SigninPage />} /> \r\n\r\n        <Route path=\"/announcement/create\" element={  user && user.role === \"faculty\" ? <CreateAnnouncement/> : <SigninPage />} />\r\n\r\n        <Route path=\"/announcement/create/:announceId\" element={  user && user.role === \"faculty\" ? <CreateAnnouncement/> : <SigninPage />} />\r\n\r\n        <Route path=\"/announcement/list\" element={  user && user.role === \"faculty\" ? <MyAnnouncement/> : <SigninPage />} />   \r\n\r\n        <Route path=\"/profile/:emailname\" element={  user ? <Profile /> : <SigninPage />} />\r\n\r\n        <Route path=\"/register\" element={ user && user.role === \"admin\" ? <Register /> : <Navigate to=\"/\" />} />\r\n\r\n        <Route path=\"*\" element={<Navigate to =\"/\" />}/>\r\n      </Routes>\r\n    </Router>\r\n    \r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {AuthContextProvider} from './context/AuthContext'\r\nimport {PostContextProvider} from './context/PostContext'\r\nimport { SocketContextProvider } from './context/SocketContext';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <PostContextProvider>\r\n      <AuthContextProvider>\r\n        <SocketContextProvider>\r\n        <App /> \r\n        </SocketContextProvider>\r\n      </AuthContextProvider>\r\n    </PostContextProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}